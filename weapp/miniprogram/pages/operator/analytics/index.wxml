<custom-navbar title="全局数据分析" showBack="{{true}}" bind:navheight="onNavHeight" />

<view class="page-container {{isLargeScreen ? 'large-screen' : ''}}" style="padding-top: {{navBarHeight}}px;">
  <view class="content">
    <!-- 核心指标 -->
    <view class="metrics-grid">
      <view wx:for="{{metrics}}" wx:key="label" class="metric-card">
        <text class="metric-label">{{item.label}}</text>
        <text class="metric-value">{{item.value}}</text>
        <view class="metric-trend {{item.trend}}">
          <t-icon name="{{item.trend === 'up' ? 'arrow-up' : 'arrow-down'}}" size="24rpx" />
          <text>{{item.change}}</text>
        </view>
      </view>
    </view>

    <!-- 区域分布图 -->
    <view class="chart-card">
      <view class="card-header">
        <text class="card-title">区域订单分布</text>
      </view>
      <view class="chart-container">
        <ec-canvas id="mychart-dom-bar" canvas-id="mychart-bar" ec="{{ ec }}"></ec-canvas>
      </view>
    </view>

    <!-- 商户排行榜 -->
    <view class="table-card">
      <view class="card-header">
        <text class="card-title">商户 GMV 排行榜</text>
      </view>
      <view class="ranking-list">
        <view wx:for="{{topMerchants}}" wx:key="rank" class="ranking-item">
          <view class="rank-num rank-{{item.rank}}">{{item.rank}}</view>
          <view class="merchant-info">
            <text class="merchant-name">{{item.name}}</text>
            <text class="merchant-orders">{{item.orders}} 单</text>
          </view>
          <text class="merchant-gmv">¥{{item.gmv}}</text>
        </view>
      </view>
    </view>
  </view>
</view>
