<custom-navbar title="我的" showLocation="{{false}}" bind:navheight="onNavHeight" />

<!-- PC 端：仅显示工作台入口 -->
<match-media min-width="750">
  <view class="pc-user-center" style="padding-top: {{navBarHeight}}px;">
    <view class="pc-user-header">
      <text class="pc-header-title">用户中心</text>
    </view>
    
    <!-- 工作台入口 (保留) -->
    <view class="pc-section" wx:if="{{workbenches.length > 0}}">
      <view class="pc-section-title">工作台</view>
      <view class="pc-workbench-grid">
        <view 
          wx:for="{{workbenches}}" 
          wx:key="id"
          class="pc-workbench-item"
          bindtap="onWorkbenchTap"
          data-path="{{item.path}}"
        >
          <t-icon name="{{item.icon}}" size="32px" />
          <text class="pc-workbench-name">{{item.name}}</text>
        </view>
      </view>
    </view>
    
    <!-- 提示 -->
    <view class="pc-hint-section">
      <text class="pc-hint-icon">📱</text>
      <text class="pc-hint-text">更多功能请使用手机访问</text>
    </view>
  </view>
</match-media>

<!-- 手机端：完整页面 -->
<match-media max-width="749">
  <view class="page-container customer-page-container" style="padding-top: {{navBarHeight}}px;">
    <view class="content-wrapper">
      <!-- User Profile Card -->
      <view class="profile-section">
        <view class="user-card">
          <button class="avatar-wrapper" open-type="chooseAvatar" bind:chooseavatar="onChooseAvatar">
            <auth-image wx:if="{{userInfo.avatarUrl}}" class="avatar" src="{{userInfo.avatarUrl}}" mode="aspectFill" />
            <t-icon wx:else name="user" size="48rpx" color="#999" />
          </button>
          <view class="info-wrapper">
            <input type="nickname" class="nickname-input" placeholder="请输入昵称" value="{{userInfo.nickName}}" bind:change="onNicknameChange" bind:blur="onNicknameChange" />
          </view>
        </view>
      </view>

      <!-- 网格化内容区域 -->
      <view class="user-grid-layout">
        <!-- Workbenches (for registered roles) -->
        <view class="section workbench-section" wx:if="{{workbenches.length > 0}}">
          <view class="section-title">工作台</view>
          <t-grid column="2" border="{{false}}">
            <t-grid-item 
              wx:for="{{workbenches}}" 
              wx:key="id"
              text="{{item.name}}"
              icon="{{item.icon}}"
              bind:click="onWorkbenchTap"
              data-path="{{item.path}}"
            />
          </t-grid>
        </view>

        <!-- Common Functions -->
        <view class="section functions-section">
          <view class="section-title">常用功能</view>
          <t-cell-group theme="card">
            <t-cell title="我的订单" arrow hover bind:click="onMyOrders" />
            <t-cell title="我的预订" arrow hover bind:click="onMyReservations" />
            <t-cell title="地址管理" arrow hover bind:click="onAddresses" />
            <t-cell title="积分中心" arrow hover bind:click="onPoints" />
            <t-cell title="优惠券" arrow hover bind:click="onCoupons" />
            <t-cell title="收藏夹" arrow hover bind:click="onFavorites" />
            <t-cell title="会员中心" arrow hover bind:click="onMembership" />
            <t-cell title="我的评价" arrow hover bind:click="onMyReviews" />
            <t-cell title="钱包" arrow hover bind:click="onWallet" />
            <t-cell title="信用分" arrow hover bind:click="onCredit" />
            <t-cell title="联系客服" arrow hover bind:click="onContact" />
          </t-cell-group>
        </view>
      </view>

      <!-- Registration Options -->
      <view class="section registration-section">
        <view class="section-title">入驻申请</view>
        <t-cell-group theme="card">
          <t-cell 
            wx:for="{{registrationOptions}}" 
            wx:key="id"
            title="{{item.name}}"
            description="{{item.desc}}"
            arrow
            hover
            bind:click="onRegisterTap"
            data-id="{{item.id}}"
          />
        </t-cell-group>
      </view>
    </view>
  </view>
</match-media>

