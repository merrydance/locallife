<custom-navbar title="我的信用" showBack="{{true}}" bind:navheight="onNavHeight" />

<view class="page-container" style="padding-top: {{navBarHeight}}px;">
  <t-loading wx:if="{{loading}}" theme="circular" size="40rpx" class="loading" />

  <view wx:if="{{!loading}}" class="content">
    <!-- 信用仪表盘 -->
    <view class="credit-card">
      <view class="score-circle">
        <text class="score-value">{{score}}</text>
        <text class="score-label">信用分</text>
      </view>
      <view class="level-info">
        <text class="level-name">{{level}}</text>
        <text class="level-desc">{{levelDesc}}</text>
      </view>
    </view>

    <!-- 权益列表 -->
    <view class="section">
      <view class="section-title">当前权益</view>
      <view class="privileges-grid">
        <view wx:for="{{privileges}}" wx:key="*this" class="privilege-item">
          <t-icon name="check-circle-filled" size="40rpx" color="#00A870" />
          <text>{{item}}</text>
        </view>
      </view>
    </view>

    <!-- 信用记录 -->
    <view class="section">
      <view class="section-title">信用记录</view>
      <view class="history-list">
        <view wx:for="{{history}}" wx:key="id" class="history-item">
          <view class="item-left">
            <text class="item-reason">{{item.reason}}</text>
            <text class="item-time">{{item.created_at}}</text>
          </view>
          <text class="item-amount {{item.type === 'REWARD' ? 'positive' : 'negative'}}">
            {{item.type === 'REWARD' ? '+' : ''}}{{item.amount}}
          </text>
        </view>
      </view>
    </view>
  </view>
</view>
