<custom-navbar title="我的钱包" showBack="{{true}}" bind:navheight="onNavHeight" />

<view class="page-container customer-page-container" style="padding-top: {{navBarHeight}}px;">
  <!-- 余额卡片 -->
  <view class="balance-card">
    <view class="balance-info">
      <text class="label">账户余额(元)</text>
      <text class="amount">{{balance / 100}}</text>
    </view>
    <view class="actions">
      <t-button theme="primary" size="small" bindtap="onTopUp">充值</t-button>
      <t-button theme="light" size="small" bindtap="onWithdraw">提现</t-button>
    </view>
  </view>

  <!-- 交易记录 -->
  <view class="transactions-section">
    <view class="section-title">交易记录</view>
    <t-loading wx:if="{{loading}}" theme="circular" size="40rpx" class="loading" />

    <view wx:if="{{!loading}}" class="transactions-list">
      <view wx:if="{{transactions.length === 0}}" class="empty">
        <t-empty description="暂无交易记录" />
      </view>

      <view wx:else>
        <view wx:for="{{transactions}}" wx:key="id" class="transaction-item">
          <view class="item-left">
            <text class="item-title">{{item.title}}</text>
            <text class="item-time">{{item.time}}</text>
          </view>
          <text class="item-amount {{item.amount > 0 ? 'positive' : 'negative'}}">
            {{item.amount > 0 ? '+' : ''}}{{item.amount / 100}}
          </text>
        </view>
      </view>
    </view>
  </view>
</view>
