<view class="container">
    <t-tabs value="{{activeTab}}" bind:change="onTabChange" sticky>
        <t-tab-panel label="全部" value="0" />
        <t-tab-panel label="系统通知" value="1" />
        <t-tab-panel label="订单消息" value="2" />
    </t-tabs>
    
    <view class="actions">
        <text class="mark-read" bind:tap="onMarkAllRead">全部已读</text>
    </view>

    <view class="list">
        <view class="msg-card {{item.is_read ? 'read' : 'unread'}}" wx:for="{{notifications}}" wx:key="id" bind:tap="onItemClick" data-id="{{item.id}}" data-index="{{index}}">
            <view class="icon-box">
                <t-icon name="{{item.type === 'order' ? 'shop' : (item.type === 'system' ? 'notification' : 'discount')}}" size="48rpx" />
                <view class="dot" wx:if="{{!item.is_read}}" />
            </view>
            <view class="content-box">
                <view class="header">
                    <text class="title">{{item.title}}</text>
                    <text class="time">{{item.created_at}}</text>
                </view>
                <view class="body">{{item.content}}</view>
            </view>
        </view>
        
        <view class="load-more">
            <t-loading wx:if="{{loading}}" theme="circular" size="40rpx" text="加载中..." />
            <view wx:if="{{!loading && !hasMore}}" class="no-more">没有更多了</view>
        </view>
    </view>
</view>
