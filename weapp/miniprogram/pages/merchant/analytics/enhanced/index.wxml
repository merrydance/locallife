<custom-navbar title="数据分析" showBack="{{true}}" bind:navheight="onNavHeight" />

<view class="page-container {{isLargeScreen ? 'large-screen' : ''}}" style="padding-top: {{navBarHeight}}px;">
  <view class="content">
    <!-- 核心指标 -->
    <view class="metrics-grid">
      <view wx:for="{{metrics}}" wx:key="label" class="metric-card">
        <text class="metric-label">{{item.label}}</text>
        <text class="metric-value">{{item.value}}</text>
        <view class="metric-trend {{item.trend}}">
          <t-icon name="{{item.trend === 'up' ? 'arrow-up' : 'arrow-down'}}" size="24rpx" />
          <text>{{item.change}}</text>
        </view>
      </view>
    </view>

    <!-- 销售趋势图 -->
    <view class="chart-card">
      <view class="card-header">
        <text class="card-title">销售趋势</text>
        <view class="card-actions">
          <t-tag variant="light" theme="primary">近7天</t-tag>
        </view>
      </view>
      <view class="chart-container">
        <ec-canvas id="mychart-dom-line" canvas-id="mychart-line" ec="{{ ec }}"></ec-canvas>
      </view>
    </view>

    <!-- 时段分布图 -->
    <view class="chart-card">
      <view class="card-header">
        <text class="card-title">时段分布</text>
      </view>
      <view class="chart-container">
        <ec-canvas id="mychart-dom-pie" canvas-id="mychart-pie" ec="{{ ecPie }}"></ec-canvas>
      </view>
    </view>
  </view>
</view>
