<custom-navbar title="打印机管理" showBack="{{true}}" bind:navheight="onNavHeight">
  <view slot="right">
    <t-button size="small" icon="add" bindtap="onAddPrinter">添加</t-button>
  </view>
</custom-navbar>

<view class="page-container {{isLargeScreen ? 'large-screen' : ''}}" style="padding-top: {{navBarHeight}}px;">
  <t-loading wx:if="{{loading}}" theme="circular" size="40rpx" class="loading" />

  <view wx:if="{{!loading}}" class="printers-container">
    <view wx:if="{{printers.length === 0}}" class="empty">
      <t-empty description="暂无打印机" />
    </view>

    <view wx:else class="printers-grid">
      <view wx:for="{{printers}}" wx:key="id" class="printer-card">
        <view class="printer-header">
          <view class="printer-info">
            <text class="printer-name">{{item.name}}</text>
            <t-tag size="small" theme="{{item.status === 'ONLINE' ? 'success' : 'danger'}}">
              {{item.status === 'ONLINE' ? '在线' : '离线'}}
            </t-tag>
          </view>
          <t-tag size="small">{{item.type === 'YILIANYUN' ? '易联云' : '飞鹅'}}</t-tag>
        </view>

        <view class="printer-details">
          <view class="detail-row">
            <text class="label">序列号:</text>
            <text class="value">{{item.sn}}</text>
          </view>
          <view class="detail-row">
            <text class="label">位置:</text>
            <text class="value">{{item.location === 'FRONT' ? '前台' : item.location === 'KITCHEN' ? '后厨' : '吧台'}}</text>
          </view>
          <view class="detail-row">
            <text class="label">自动打印:</text>
            <text class="value">{{item.auto_print ? '开启' : '关闭'}}</text>
          </view>
        </view>

        <view class="printer-actions">
          <t-button size="small" icon="print" bindtap="onTestPrint" data-id="{{item.id}}">测试</t-button>
          <t-button size="small" bindtap="onEditPrinter" data-id="{{item.id}}">编辑</t-button>
          <t-button size="small" theme="danger" bindtap="onDeletePrinter" data-id="{{item.id}}">删除</t-button>
        </view>
      </view>
    </view>
  </view>
</view>
