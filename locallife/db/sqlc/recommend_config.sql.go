// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.30.0
// source: recommend_config.sql

package db

import (
	"context"

	"github.com/jackc/pgx/v5/pgtype"
)

const createRecommendConfig = `-- name: CreateRecommendConfig :one
INSERT INTO recommend_configs (
    name,
    distance_weight,
    route_weight,
    urgency_weight,
    profit_weight,
    max_distance,
    max_results,
    is_active
) VALUES (
    $1, $2, $3, $4, $5, $6, $7, $8
) RETURNING id, name, distance_weight, route_weight, urgency_weight, profit_weight, max_distance, max_results, is_active, created_at, updated_at
`

type CreateRecommendConfigParams struct {
	Name           string         `json:"name"`
	DistanceWeight pgtype.Numeric `json:"distance_weight"`
	RouteWeight    pgtype.Numeric `json:"route_weight"`
	UrgencyWeight  pgtype.Numeric `json:"urgency_weight"`
	ProfitWeight   pgtype.Numeric `json:"profit_weight"`
	MaxDistance    int32          `json:"max_distance"`
	MaxResults     int32          `json:"max_results"`
	IsActive       bool           `json:"is_active"`
}

func (q *Queries) CreateRecommendConfig(ctx context.Context, arg CreateRecommendConfigParams) (RecommendConfig, error) {
	row := q.db.QueryRow(ctx, createRecommendConfig,
		arg.Name,
		arg.DistanceWeight,
		arg.RouteWeight,
		arg.UrgencyWeight,
		arg.ProfitWeight,
		arg.MaxDistance,
		arg.MaxResults,
		arg.IsActive,
	)
	var i RecommendConfig
	err := row.Scan(
		&i.ID,
		&i.Name,
		&i.DistanceWeight,
		&i.RouteWeight,
		&i.UrgencyWeight,
		&i.ProfitWeight,
		&i.MaxDistance,
		&i.MaxResults,
		&i.IsActive,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const getActiveRecommendConfig = `-- name: GetActiveRecommendConfig :one
SELECT id, name, distance_weight, route_weight, urgency_weight, profit_weight, max_distance, max_results, is_active, created_at, updated_at FROM recommend_configs
WHERE is_active = true
ORDER BY id DESC
LIMIT 1
`

func (q *Queries) GetActiveRecommendConfig(ctx context.Context) (RecommendConfig, error) {
	row := q.db.QueryRow(ctx, getActiveRecommendConfig)
	var i RecommendConfig
	err := row.Scan(
		&i.ID,
		&i.Name,
		&i.DistanceWeight,
		&i.RouteWeight,
		&i.UrgencyWeight,
		&i.ProfitWeight,
		&i.MaxDistance,
		&i.MaxResults,
		&i.IsActive,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const getRecommendConfig = `-- name: GetRecommendConfig :one
SELECT id, name, distance_weight, route_weight, urgency_weight, profit_weight, max_distance, max_results, is_active, created_at, updated_at FROM recommend_configs
WHERE name = $1 LIMIT 1
`

func (q *Queries) GetRecommendConfig(ctx context.Context, name string) (RecommendConfig, error) {
	row := q.db.QueryRow(ctx, getRecommendConfig, name)
	var i RecommendConfig
	err := row.Scan(
		&i.ID,
		&i.Name,
		&i.DistanceWeight,
		&i.RouteWeight,
		&i.UrgencyWeight,
		&i.ProfitWeight,
		&i.MaxDistance,
		&i.MaxResults,
		&i.IsActive,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const listRecommendConfigs = `-- name: ListRecommendConfigs :many
SELECT id, name, distance_weight, route_weight, urgency_weight, profit_weight, max_distance, max_results, is_active, created_at, updated_at FROM recommend_configs
ORDER BY created_at DESC
`

func (q *Queries) ListRecommendConfigs(ctx context.Context) ([]RecommendConfig, error) {
	rows, err := q.db.Query(ctx, listRecommendConfigs)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []RecommendConfig{}
	for rows.Next() {
		var i RecommendConfig
		if err := rows.Scan(
			&i.ID,
			&i.Name,
			&i.DistanceWeight,
			&i.RouteWeight,
			&i.UrgencyWeight,
			&i.ProfitWeight,
			&i.MaxDistance,
			&i.MaxResults,
			&i.IsActive,
			&i.CreatedAt,
			&i.UpdatedAt,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const updateRecommendConfig = `-- name: UpdateRecommendConfig :one
UPDATE recommend_configs
SET 
    distance_weight = $2,
    route_weight = $3,
    urgency_weight = $4,
    profit_weight = $5,
    max_distance = $6,
    max_results = $7,
    is_active = $8,
    updated_at = now()
WHERE id = $1
RETURNING id, name, distance_weight, route_weight, urgency_weight, profit_weight, max_distance, max_results, is_active, created_at, updated_at
`

type UpdateRecommendConfigParams struct {
	ID             int64          `json:"id"`
	DistanceWeight pgtype.Numeric `json:"distance_weight"`
	RouteWeight    pgtype.Numeric `json:"route_weight"`
	UrgencyWeight  pgtype.Numeric `json:"urgency_weight"`
	ProfitWeight   pgtype.Numeric `json:"profit_weight"`
	MaxDistance    int32          `json:"max_distance"`
	MaxResults     int32          `json:"max_results"`
	IsActive       bool           `json:"is_active"`
}

func (q *Queries) UpdateRecommendConfig(ctx context.Context, arg UpdateRecommendConfigParams) (RecommendConfig, error) {
	row := q.db.QueryRow(ctx, updateRecommendConfig,
		arg.ID,
		arg.DistanceWeight,
		arg.RouteWeight,
		arg.UrgencyWeight,
		arg.ProfitWeight,
		arg.MaxDistance,
		arg.MaxResults,
		arg.IsActive,
	)
	var i RecommendConfig
	err := row.Scan(
		&i.ID,
		&i.Name,
		&i.DistanceWeight,
		&i.RouteWeight,
		&i.UrgencyWeight,
		&i.ProfitWeight,
		&i.MaxDistance,
		&i.MaxResults,
		&i.IsActive,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}
