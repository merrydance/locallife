// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.30.0
// source: delivery_fee_config.sql

package db

import (
	"context"

	"github.com/jackc/pgx/v5/pgtype"
)

const createDeliveryFeeConfig = `-- name: CreateDeliveryFeeConfig :one
INSERT INTO delivery_fee_configs (
  region_id,
  base_fee,
  base_distance,
  extra_fee_per_km,
  value_ratio,
  max_fee,
  min_fee,
  is_active
) VALUES (
  $1, $2, $3, $4, $5, $6, $7, $8
) RETURNING id, region_id, base_fee, base_distance, extra_fee_per_km, value_ratio, max_fee, min_fee, is_active, created_at, updated_at
`

type CreateDeliveryFeeConfigParams struct {
	RegionID      int64          `json:"region_id"`
	BaseFee       int64          `json:"base_fee"`
	BaseDistance  int32          `json:"base_distance"`
	ExtraFeePerKm int64          `json:"extra_fee_per_km"`
	ValueRatio    pgtype.Numeric `json:"value_ratio"`
	MaxFee        pgtype.Int8    `json:"max_fee"`
	MinFee        int64          `json:"min_fee"`
	IsActive      bool           `json:"is_active"`
}

func (q *Queries) CreateDeliveryFeeConfig(ctx context.Context, arg CreateDeliveryFeeConfigParams) (DeliveryFeeConfig, error) {
	row := q.db.QueryRow(ctx, createDeliveryFeeConfig,
		arg.RegionID,
		arg.BaseFee,
		arg.BaseDistance,
		arg.ExtraFeePerKm,
		arg.ValueRatio,
		arg.MaxFee,
		arg.MinFee,
		arg.IsActive,
	)
	var i DeliveryFeeConfig
	err := row.Scan(
		&i.ID,
		&i.RegionID,
		&i.BaseFee,
		&i.BaseDistance,
		&i.ExtraFeePerKm,
		&i.ValueRatio,
		&i.MaxFee,
		&i.MinFee,
		&i.IsActive,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const deleteDeliveryFeeConfig = `-- name: DeleteDeliveryFeeConfig :exec
DELETE FROM delivery_fee_configs
WHERE id = $1
`

func (q *Queries) DeleteDeliveryFeeConfig(ctx context.Context, id int64) error {
	_, err := q.db.Exec(ctx, deleteDeliveryFeeConfig, id)
	return err
}

const getActiveDeliveryFeeConfigByRegion = `-- name: GetActiveDeliveryFeeConfigByRegion :one
SELECT id, region_id, base_fee, base_distance, extra_fee_per_km, value_ratio, max_fee, min_fee, is_active, created_at, updated_at FROM delivery_fee_configs
WHERE region_id = $1 AND is_active = true LIMIT 1
`

func (q *Queries) GetActiveDeliveryFeeConfigByRegion(ctx context.Context, regionID int64) (DeliveryFeeConfig, error) {
	row := q.db.QueryRow(ctx, getActiveDeliveryFeeConfigByRegion, regionID)
	var i DeliveryFeeConfig
	err := row.Scan(
		&i.ID,
		&i.RegionID,
		&i.BaseFee,
		&i.BaseDistance,
		&i.ExtraFeePerKm,
		&i.ValueRatio,
		&i.MaxFee,
		&i.MinFee,
		&i.IsActive,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const getDeliveryFeeConfig = `-- name: GetDeliveryFeeConfig :one
SELECT id, region_id, base_fee, base_distance, extra_fee_per_km, value_ratio, max_fee, min_fee, is_active, created_at, updated_at FROM delivery_fee_configs
WHERE id = $1 LIMIT 1
`

func (q *Queries) GetDeliveryFeeConfig(ctx context.Context, id int64) (DeliveryFeeConfig, error) {
	row := q.db.QueryRow(ctx, getDeliveryFeeConfig, id)
	var i DeliveryFeeConfig
	err := row.Scan(
		&i.ID,
		&i.RegionID,
		&i.BaseFee,
		&i.BaseDistance,
		&i.ExtraFeePerKm,
		&i.ValueRatio,
		&i.MaxFee,
		&i.MinFee,
		&i.IsActive,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const getDeliveryFeeConfigByRegion = `-- name: GetDeliveryFeeConfigByRegion :one
SELECT id, region_id, base_fee, base_distance, extra_fee_per_km, value_ratio, max_fee, min_fee, is_active, created_at, updated_at FROM delivery_fee_configs
WHERE region_id = $1 LIMIT 1
`

func (q *Queries) GetDeliveryFeeConfigByRegion(ctx context.Context, regionID int64) (DeliveryFeeConfig, error) {
	row := q.db.QueryRow(ctx, getDeliveryFeeConfigByRegion, regionID)
	var i DeliveryFeeConfig
	err := row.Scan(
		&i.ID,
		&i.RegionID,
		&i.BaseFee,
		&i.BaseDistance,
		&i.ExtraFeePerKm,
		&i.ValueRatio,
		&i.MaxFee,
		&i.MinFee,
		&i.IsActive,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const listActiveDeliveryFeeConfigs = `-- name: ListActiveDeliveryFeeConfigs :many
SELECT id, region_id, base_fee, base_distance, extra_fee_per_km, value_ratio, max_fee, min_fee, is_active, created_at, updated_at FROM delivery_fee_configs
WHERE is_active = true
ORDER BY region_id
`

func (q *Queries) ListActiveDeliveryFeeConfigs(ctx context.Context) ([]DeliveryFeeConfig, error) {
	rows, err := q.db.Query(ctx, listActiveDeliveryFeeConfigs)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []DeliveryFeeConfig{}
	for rows.Next() {
		var i DeliveryFeeConfig
		if err := rows.Scan(
			&i.ID,
			&i.RegionID,
			&i.BaseFee,
			&i.BaseDistance,
			&i.ExtraFeePerKm,
			&i.ValueRatio,
			&i.MaxFee,
			&i.MinFee,
			&i.IsActive,
			&i.CreatedAt,
			&i.UpdatedAt,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const listDeliveryFeeConfigs = `-- name: ListDeliveryFeeConfigs :many
SELECT id, region_id, base_fee, base_distance, extra_fee_per_km, value_ratio, max_fee, min_fee, is_active, created_at, updated_at FROM delivery_fee_configs
ORDER BY region_id
LIMIT $1 OFFSET $2
`

type ListDeliveryFeeConfigsParams struct {
	Limit  int32 `json:"limit"`
	Offset int32 `json:"offset"`
}

func (q *Queries) ListDeliveryFeeConfigs(ctx context.Context, arg ListDeliveryFeeConfigsParams) ([]DeliveryFeeConfig, error) {
	rows, err := q.db.Query(ctx, listDeliveryFeeConfigs, arg.Limit, arg.Offset)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []DeliveryFeeConfig{}
	for rows.Next() {
		var i DeliveryFeeConfig
		if err := rows.Scan(
			&i.ID,
			&i.RegionID,
			&i.BaseFee,
			&i.BaseDistance,
			&i.ExtraFeePerKm,
			&i.ValueRatio,
			&i.MaxFee,
			&i.MinFee,
			&i.IsActive,
			&i.CreatedAt,
			&i.UpdatedAt,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const updateDeliveryFeeConfig = `-- name: UpdateDeliveryFeeConfig :one
UPDATE delivery_fee_configs
SET
  base_fee = COALESCE($2, base_fee),
  base_distance = COALESCE($3, base_distance),
  extra_fee_per_km = COALESCE($4, extra_fee_per_km),
  value_ratio = COALESCE($5, value_ratio),
  max_fee = $6,
  min_fee = COALESCE($7, min_fee),
  is_active = COALESCE($8, is_active),
  updated_at = now()
WHERE id = $1
RETURNING id, region_id, base_fee, base_distance, extra_fee_per_km, value_ratio, max_fee, min_fee, is_active, created_at, updated_at
`

type UpdateDeliveryFeeConfigParams struct {
	ID            int64          `json:"id"`
	BaseFee       pgtype.Int8    `json:"base_fee"`
	BaseDistance  pgtype.Int4    `json:"base_distance"`
	ExtraFeePerKm pgtype.Int8    `json:"extra_fee_per_km"`
	ValueRatio    pgtype.Numeric `json:"value_ratio"`
	MaxFee        pgtype.Int8    `json:"max_fee"`
	MinFee        pgtype.Int8    `json:"min_fee"`
	IsActive      pgtype.Bool    `json:"is_active"`
}

func (q *Queries) UpdateDeliveryFeeConfig(ctx context.Context, arg UpdateDeliveryFeeConfigParams) (DeliveryFeeConfig, error) {
	row := q.db.QueryRow(ctx, updateDeliveryFeeConfig,
		arg.ID,
		arg.BaseFee,
		arg.BaseDistance,
		arg.ExtraFeePerKm,
		arg.ValueRatio,
		arg.MaxFee,
		arg.MinFee,
		arg.IsActive,
	)
	var i DeliveryFeeConfig
	err := row.Scan(
		&i.ID,
		&i.RegionID,
		&i.BaseFee,
		&i.BaseDistance,
		&i.ExtraFeePerKm,
		&i.ValueRatio,
		&i.MaxFee,
		&i.MinFee,
		&i.IsActive,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}
