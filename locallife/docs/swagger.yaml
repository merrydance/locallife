basePath: /v1
definitions:
  algorithm.FraudDetectionResult:
    properties:
      confidence:
        description: 匹配规则数量
        type: integer
      description:
        type: string
      isFraud:
        type: boolean
      merchantSuspect:
        description: 是否商户可疑（多个独立用户投诉同一商户）
        type: boolean
      patternType:
        description: device-reuse, address-cluster, coordinated-claims
        type: string
      relatedClaimIDs:
        items:
          format: int64
          type: integer
        type: array
      relatedUserIDs:
        items:
          format: int64
          type: integer
        type: array
      shouldBlock:
        description: 是否应该立即拉黑
        type: boolean
      suspectMerchantID:
        description: 可疑商户ID
        format: int64
        type: integer
    type: object
  api.BusinessLicenseOCRData:
    properties:
      address:
        description: 地址
        type: string
      business_scope:
        description: 经营范围
        type: string
      credit_code:
        description: 统一社会信用代码
        type: string
      enterprise_name:
        description: 企业名称
        type: string
      error:
        description: failure reason (if any)
        type: string
      legal_representative:
        description: 法定代表人
        type: string
      ocr_at:
        description: OCR识别时间
        type: string
      queued_at:
        description: task enqueued time
        type: string
      reg_num:
        description: 注册号
        type: string
      registered_capital:
        description: 注册资本
        type: string
      started_at:
        description: task started processing time
        type: string
      status:
        description: pending/processing/done/failed
        type: string
      type_of_enterprise:
        description: 类型
        type: string
      valid_period:
        description: 营业期限（如：2020年01月01日至2040年01月01日 或 长期）
        type: string
    type: object
  api.DeliveryFeeResult:
    properties:
      baseFee:
        format: int64
        type: integer
      deliverySuspended:
        type: boolean
      distanceFee:
        format: int64
        type: integer
      finalFee:
        format: int64
        type: integer
      peakHourCoefficient:
        format: float64
        type: number
      promotionDiscount:
        format: int64
        type: integer
      subtotalFee:
        format: int64
        type: integer
      suspendReason:
        type: string
      valueFee:
        format: int64
        type: integer
      weatherCoefficient:
        format: float64
        type: number
    type: object
  api.ErrorResponse:
    properties:
      error:
        example: error message
        type: string
    type: object
  api.FoodPermitOCRData:
    properties:
      company_name:
        description: 企业名称
        type: string
      error:
        description: failure reason (if any)
        type: string
      ocr_at:
        description: OCR识别时间
        type: string
      permit_no:
        description: 许可证编号
        type: string
      queued_at:
        description: task enqueued time
        type: string
      raw_text:
        description: 原始OCR文本
        type: string
      started_at:
        description: task started processing time
        type: string
      status:
        description: pending/processing/done/failed
        type: string
      valid_from:
        description: 有效期起
        type: string
      valid_to:
        description: 有效期止（如：2025年12月31日 或 长期）
        type: string
    type: object
  api.HealthCertOCRData:
    properties:
      cert_number:
        description: 证书编号
        type: string
      id_number:
        description: 身份证号
        type: string
      name:
        description: 姓名
        type: string
      ocr_at:
        description: OCR识别时间
        type: string
      valid_end:
        description: 有效期截止
        type: string
      valid_start:
        description: 有效期起始
        type: string
    type: object
  api.IDCardOCRData:
    properties:
      address:
        description: 地址
        type: string
      gender:
        description: 性别
        type: string
      id_number:
        description: 身份证号
        type: string
      name:
        description: 姓名
        type: string
      nation:
        description: 民族
        type: string
      ocr_at:
        description: OCR识别时间
        type: string
      valid_end:
        description: 有效期截止（"长期" 或日期）
        type: string
      valid_start:
        description: 有效期起始
        type: string
    type: object
  api.MerchantIDCardOCRData:
    properties:
      address:
        description: 地址
        type: string
      error:
        description: failure reason (if any)
        type: string
      gender:
        description: 性别
        type: string
      id_number:
        description: 身份证号
        type: string
      name:
        description: 姓名
        type: string
      nation:
        description: 民族
        type: string
      ocr_at:
        description: OCR识别时间
        type: string
      queued_at:
        description: task enqueued time
        type: string
      started_at:
        description: task started processing time
        type: string
      status:
        description: pending/processing/done/failed
        type: string
      valid_date:
        description: 有效期（背面）
        type: string
    type: object
  api.MerchantProfileDTO:
    properties:
      completed_orders:
        type: integer
      food_safety_incidents:
        type: integer
      foreign_object_claims:
        type: integer
      id:
        type: integer
      merchant_id:
        type: integer
      total_claims:
        type: integer
      total_orders:
        type: integer
      total_sales:
        type: integer
      trust_score:
        type: integer
    type: object
  api.MessageResponse:
    properties:
      message:
        example: ok
        type: string
    type: object
  api.OperatorIDCardBackOCR:
    properties:
      ocr_at:
        type: string
      valid_end:
        type: string
      valid_start:
        type: string
    type: object
  api.OperatorIDCardOCRData:
    properties:
      address:
        type: string
      gender:
        type: string
      id_number:
        type: string
      name:
        type: string
      nation:
        type: string
      ocr_at:
        type: string
    type: object
  api.ReportFoodSafetyRequest:
    properties:
      description:
        maxLength: 1000
        minLength: 10
        type: string
      evidence_photos:
        description: 食安必须有证据
        maxLength: 500
        type: string
      incident_type:
        enum:
        - foreign-object
        - contamination
        - expired
        type: string
      merchant_id:
        minimum: 1
        type: integer
      order_id:
        minimum: 1
        type: integer
      reporter_id:
        minimum: 1
        type: integer
      severity_level:
        maximum: 5
        minimum: 1
        type: integer
    required:
    - description
    - evidence_photos
    - incident_type
    - merchant_id
    - order_id
    - reporter_id
    - severity_level
    type: object
  api.ReportFoodSafetyResponse:
    properties:
      incident_id:
        type: integer
      merchant_suspended:
        type: boolean
      message:
        type: string
      suspend_duration:
        description: 小时
        type: integer
    type: object
  api.ReviewClaimRequest:
    properties:
      approved:
        description: 是否通过
        type: boolean
      approved_amount:
        description: 审核通过金额（分）
        minimum: 1
        type: integer
      review_note:
        description: 审核备注
        maxLength: 500
        minLength: 5
        type: string
    required:
    - approved
    - review_note
    type: object
  api.RiderProfileDTO:
    properties:
      completed_deliveries:
        type: integer
      id:
        type: integer
      on_time_deliveries:
        type: integer
      rider_id:
        type: integer
      total_damage_incidents:
        type: integer
      total_deliveries:
        type: integer
      trust_score:
        type: integer
    type: object
  api.RoleAccessEntry:
    properties:
      auth_required:
        example: true
        type: boolean
      notes:
        example: merchant ownership validated inside handler
        type: string
      path_prefix:
        example: /v1/dishes
        type: string
      roles:
        example:
        - merchant
        items:
          type: string
        type: array
    type: object
  api.RoleAccessResponse:
    properties:
      entries:
        items:
          $ref: '#/definitions/api.RoleAccessEntry'
        type: array
      generated_at:
        example: "2024-12-31T23:59:59Z"
        type: string
    type: object
  api.SubmitAppealRequest:
    properties:
      appeal_reason:
        maxLength: 1000
        minLength: 10
        type: string
      entity_id:
        minimum: 1
        type: integer
      entity_type:
        enum:
        - customer
        - merchant
        - rider
        type: string
      evidence:
        maxLength: 500
        type: string
    required:
    - appeal_reason
    - entity_id
    - entity_type
    type: object
  api.SubmitClaimRequest:
    properties:
      claim_amount:
        description: 最高100万分(1万元)
        maximum: 100000000
        minimum: 1
        type: integer
      claim_reason:
        maxLength: 1000
        minLength: 5
        type: string
      claim_type:
        enum:
        - foreign-object
        - damage
        - timeout
        - food-safety
        type: string
      evidence_photos:
        items:
          type: string
        maxItems: 10
        type: array
      order_id:
        minimum: 1
        type: integer
    required:
    - claim_amount
    - claim_reason
    - claim_type
    - order_id
    type: object
  api.SubmitClaimResponse:
    properties:
      approved_amount:
        type: integer
      claim_id:
        type: integer
      compensation_source:
        description: merchant, rider, platform
        type: string
      needs_evidence:
        description: 是否需要证据
        type: boolean
      reason:
        type: string
      refund_eta:
        description: 秒赔/自动通过时提供预计到账时间
        type: string
      status:
        description: instant, auto, manual, evidence-required, platform-pay
        type: string
      warning:
        description: 警告信息
        type: string
    type: object
  api.SubmitRecoveryRequest:
    properties:
      commitment_message:
        description: 改善承诺
        maxLength: 500
        minLength: 10
        type: string
      entity_id:
        minimum: 1
        type: integer
      entity_type:
        description: merchant/rider
        enum:
        - merchant
        - rider
        type: string
    required:
    - commitment_message
    - entity_id
    - entity_type
    type: object
  api.SuspendMerchantRequest:
    properties:
      admin_id:
        minimum: 1
        type: integer
      duration_hours:
        description: 最长30天
        maximum: 720
        minimum: 1
        type: integer
      merchant_id:
        minimum: 1
        type: integer
      reason:
        maxLength: 500
        minLength: 5
        type: string
    required:
    - admin_id
    - duration_hours
    - merchant_id
    - reason
    type: object
  api.TriggerFraudDetectionRequest:
    properties:
      address_id:
        type: integer
      claim_id:
        type: integer
      device_fingerprint:
        type: string
    type: object
  api.TrustScoreChangeResponse:
    properties:
      created_at:
        type: string
      entity_id:
        type: integer
      entity_type:
        type: string
      id:
        type: integer
      is_auto:
        type: boolean
      new_score:
        type: integer
      old_score:
        type: integer
      reason_description:
        type: string
      reason_type:
        type: string
      score_change:
        type: integer
    type: object
  api.TrustScoreProfileResponse:
    properties:
      customer:
        $ref: '#/definitions/api.UserProfileDTO'
      merchant:
        $ref: '#/definitions/api.MerchantProfileDTO'
      rider:
        $ref: '#/definitions/api.RiderProfileDTO'
    type: object
  api.UserProfileDTO:
    properties:
      completed_orders:
        type: integer
      id:
        type: integer
      role:
        type: string
      total_claims:
        type: integer
      total_orders:
        type: integer
      trust_score:
        type: integer
      user_id:
        type: integer
      violation_count:
        type: integer
    type: object
  api.addCartItemRequest:
    properties:
      combo_id:
        description: 套餐ID (dish_id和combo_id二选一)
        minimum: 1
        type: integer
      customizations:
        additionalProperties: true
        description: 定制选项 (选填)
        type: object
      dish_id:
        description: 菜品ID (dish_id和combo_id二选一)
        minimum: 1
        type: integer
      merchant_id:
        description: 商户ID (必填)
        minimum: 1
        type: integer
      quantity:
        description: 数量 (必填，范围：1-99)
        maximum: 99
        minimum: 1
        type: integer
    required:
    - merchant_id
    - quantity
    type: object
  api.addComboDishBodyRequest:
    properties:
      dish_id:
        minimum: 1
        type: integer
    required:
    - dish_id
    type: object
  api.addDishItem:
    properties:
      combo_id:
        minimum: 1
        type: integer
      dish_id:
        minimum: 1
        type: integer
      quantity:
        maximum: 99
        minimum: 1
        type: integer
    required:
    - quantity
    type: object
  api.addDishesRequest:
    properties:
      items:
        items:
          $ref: '#/definitions/api.addDishItem'
        maxItems: 50
        minItems: 1
        type: array
    required:
    - items
    type: object
  api.addFavoriteDishRequest:
    properties:
      dish_id:
        minimum: 1
        type: integer
    required:
    - dish_id
    type: object
  api.addFavoriteMerchantRequest:
    properties:
      merchant_id:
        minimum: 1
        type: integer
    required:
    - merchant_id
    type: object
  api.addTableImageRequest:
    properties:
      image_url:
        maxLength: 500
        minLength: 1
        type: string
      is_primary:
        type: boolean
      sort_order:
        maximum: 100
        minimum: 0
        type: integer
    required:
    - image_url
    type: object
  api.addTableTagRequest:
    properties:
      tag_id:
        minimum: 1
        type: integer
    required:
    - tag_id
    type: object
  api.appealResponse:
    properties:
      appellant_id:
        type: integer
      appellant_type:
        type: string
      claim_id:
        type: integer
      compensated_at:
        type: string
      compensation_amount:
        type: integer
      created_at:
        type: string
      evidence_urls:
        items:
          type: string
        type: array
      id:
        type: integer
      reason:
        type: string
      region_id:
        type: integer
      review_notes:
        type: string
      reviewed_at:
        type: string
      reviewer_id:
        type: integer
      status:
        type: string
    type: object
  api.applyRiderRequest:
    properties:
      id_card_no:
        type: string
      phone:
        type: string
      real_name:
        maxLength: 50
        minLength: 2
        type: string
    required:
    - id_card_no
    - phone
    - real_name
    type: object
  api.batchDishStatusResponse:
    properties:
      failed:
        description: 更新失败的ID
        items:
          type: integer
        type: array
      message:
        type: string
      updated:
        description: 更新成功的ID
        items:
          type: integer
        type: array
    type: object
  api.batchUpdateDishStatusRequest:
    properties:
      dish_ids:
        description: 菜品ID列表，最多100个
        items:
          type: integer
        maxItems: 100
        minItems: 1
        type: array
      is_online:
        description: true=上架, false=下架
        type: boolean
    required:
    - dish_ids
    - is_online
    type: object
  api.browseHistoryItem:
    properties:
      id:
        description: 浏览记录ID
        type: integer
      image_url:
        description: 目标图片URL
        type: string
      last_viewed_at:
        description: 最后浏览时间
        type: string
      name:
        description: 目标名称
        type: string
      target_id:
        description: 目标ID
        type: integer
      target_type:
        description: 浏览目标类型：merchant=商户, dish=菜品
        type: string
      view_count:
        description: 浏览次数
        type: integer
    type: object
  api.businessHourItem:
    properties:
      close_time:
        description: HH:MM 格式
        type: string
      day_of_week:
        description: 0=周日, 1=周一, ..., 6=周六
        maximum: 6
        minimum: 0
        type: integer
      is_closed:
        description: 是否休息
        type: boolean
      open_time:
        description: HH:MM 格式
        type: string
    required:
    - close_time
    - open_time
    type: object
  api.businessHourResponse:
    properties:
      close_time:
        type: string
      day_name:
        type: string
      day_of_week:
        type: integer
      id:
        type: integer
      is_closed:
        type: boolean
      open_time:
        type: string
    type: object
  api.businessHoursListResponse:
    properties:
      hours:
        items:
          $ref: '#/definitions/api.businessHourResponse'
        type: array
    type: object
  api.calculateCartRequest:
    properties:
      address_id:
        description: 配送地址ID (选填，用于计算配送费)
        minimum: 1
        type: integer
      merchant_id:
        description: 商户ID (必填)
        minimum: 1
        type: integer
      voucher_id:
        description: 优惠券ID (选填，用于计算优惠)
        minimum: 1
        type: integer
    required:
    - merchant_id
    type: object
  api.calculateCartResponse:
    properties:
      delivery_fee:
        description: 配送费（分）
        type: integer
      delivery_fee_discount:
        description: 配送费满返减免（分）
        type: integer
      discount_amount:
        description: 优惠券减免金额（分）
        type: integer
      discount_info:
        description: 优惠说明
        type: string
      meets_min_order:
        description: 是否满足起送金额
        type: boolean
      min_order_amount:
        description: 最小起送金额（分），0表示无限制
        type: integer
      subtotal:
        description: 商品小计（分）
        type: integer
      total_amount:
        description: 实付金额（分）
        type: integer
    type: object
  api.calculateDeliveryFeeRequest:
    properties:
      distance:
        description: 米
        type: integer
      merchant_id:
        type: integer
      order_amount:
        type: integer
      region_id:
        type: integer
    required:
    - distance
    - merchant_id
    - order_amount
    - region_id
    type: object
  api.cancelReservationRequest:
    properties:
      id:
        minimum: 1
        type: integer
      reason:
        maxLength: 500
        type: string
    required:
    - id
    type: object
  api.cartItemResponse:
    properties:
      combo_id:
        type: integer
      customizations:
        additionalProperties: true
        type: object
      dish_id:
        type: integer
      id:
        type: integer
      image_url:
        type: string
      is_available:
        type: boolean
      member_price:
        type: integer
      name:
        description: 商品信息
        type: string
      quantity:
        type: integer
      subtotal:
        type: integer
      unit_price:
        type: integer
    type: object
  api.cartResponse:
    properties:
      id:
        type: integer
      items:
        items:
          $ref: '#/definitions/api.cartItemResponse'
        type: array
      merchant_id:
        type: integer
      subtotal:
        type: integer
      total_count:
        type: integer
    type: object
  api.cartSummaryResponse:
    properties:
      cart_count:
        description: 购物车数量（商户数）
        type: integer
      total_amount:
        description: 商品总金额（分）
        type: integer
      total_items:
        description: 商品总数
        type: integer
    type: object
  api.categoryStatRow:
    properties:
      category_name:
        description: 分类名称
        type: string
      merchant_count:
        description: 商户数
        type: integer
      order_count:
        description: 订单数
        type: integer
      total_sales:
        description: 总销售额(分)
        type: integer
    type: object
  api.checkInventoryRequest:
    properties:
      date:
        type: string
      dish_id:
        minimum: 1
        type: integer
      quantity:
        type: integer
    required:
    - date
    - dish_id
    - quantity
    type: object
  api.checkInventoryResponse:
    properties:
      available:
        type: boolean
      current_stock:
        type: integer
      message:
        type: string
    type: object
  api.claimResponse:
    properties:
      approval_type:
        type: string
      approved_amount:
        type: integer
      claim_amount:
        type: integer
      claim_type:
        type: string
      created_at:
        type: string
      description:
        type: string
      evidence_urls:
        items:
          type: string
        type: array
      id:
        type: integer
      is_malicious:
        type: boolean
      order_id:
        type: integer
      review_notes:
        type: string
      reviewed_at:
        type: string
      reviewer_id:
        type: integer
      status:
        type: string
      user_id:
        type: integer
    type: object
  api.clearCartRequest:
    properties:
      merchant_id:
        description: 商户ID (必填)
        minimum: 1
        type: integer
    required:
    - merchant_id
    type: object
  api.combinedCheckoutItem:
    properties:
      delivery_fee:
        description: 配送费（分）
        type: integer
      merchant_id:
        description: 商户ID
        type: integer
      merchant_name:
        description: 商户名称
        type: string
      order_type:
        description: 订单类型
        type: string
      subtotal:
        description: 商品小计（分）
        type: integer
      total_amount:
        description: 小计+配送费（分）
        type: integer
    type: object
  api.combinedCheckoutRequest:
    properties:
      address_id:
        description: 配送地址ID（外卖时必填）
        minimum: 1
        type: integer
      cart_ids:
        description: 要结算的购物车ID列表（必填，最多10个）
        items:
          type: integer
        maxItems: 10
        minItems: 1
        type: array
    required:
    - cart_ids
    type: object
  api.combinedCheckoutResponse:
    properties:
      can_combine_pay:
        description: 是否可以合单支付
        type: boolean
      items:
        description: 各商户订单
        items:
          $ref: '#/definitions/api.combinedCheckoutItem'
        type: array
      message:
        description: 提示信息
        type: string
      total_amount:
        description: 支付总额（分）
        type: integer
      total_delivery_fee:
        description: 配送费合计（分）
        type: integer
      total_subtotal:
        description: 商品合计（分）
        type: integer
    type: object
  api.comboSetResponse:
    properties:
      combo_price:
        type: integer
      description:
        type: string
      id:
        type: integer
      is_online:
        type: boolean
      name:
        type: string
    type: object
  api.comboSetWithDetailsResponse:
    properties:
      combo_price:
        type: integer
      description:
        type: string
      dishes:
        items:
          $ref: '#/definitions/api.dishInComboResponse'
        type: array
      id:
        type: integer
      is_online:
        type: boolean
      name:
        type: string
      tags:
        items:
          $ref: '#/definitions/api.tagResponse'
        type: array
    type: object
  api.comboSummary:
    properties:
      combo_price:
        description: 套餐价（分）
        type: integer
      distance:
        description: 距离与运费（需要用户位置）
        type: integer
      estimated_delivery_fee:
        description: 预估配送费（分）
        type: integer
      id:
        type: integer
      image_url:
        type: string
      merchant_id:
        type: integer
      merchant_latitude:
        type: number
      merchant_logo:
        type: string
      merchant_longitude:
        type: number
      merchant_name:
        description: 商户信息
        type: string
      merchant_region_id:
        type: integer
      monthly_sales:
        description: 销量与标签
        type: integer
      name:
        type: string
      original_price:
        description: 原价（分）
        type: integer
      savings_percent:
        description: 优惠百分比
        type: number
      tags:
        description: 套餐标签
        items:
          type: string
        type: array
    type: object
  api.createComboSetRequest:
    properties:
      combo_price:
        description: 套餐优惠价（分），最大100万元
        maximum: 100000000
        type: integer
      description:
        description: 描述，最大500字符
        maxLength: 500
        type: string
      dish_ids:
        description: 可选：创建时关联菜品，最多50个
        items:
          type: integer
        maxItems: 50
        type: array
      is_online:
        description: 是否上线
        type: boolean
      name:
        description: 套餐名称，最大100字符
        maxLength: 100
        minLength: 1
        type: string
      original_price:
        description: 原价（分），可选
        minimum: 0
        type: integer
    required:
    - combo_price
    - name
    type: object
  api.createDailyInventoryRequest:
    properties:
      date:
        description: 日期 YYYY-MM-DD
        type: string
      dish_id:
        minimum: 1
        type: integer
      total_quantity:
        description: -1表示无限库存
        minimum: -1
        type: integer
    required:
    - date
    - dish_id
    - total_quantity
    type: object
  api.createDeliveryFeeConfigRequest:
    properties:
      base_distance:
        type: integer
      base_fee:
        minimum: 0
        type: integer
      extra_fee_per_km:
        minimum: 0
        type: integer
      max_fee:
        type: integer
      min_fee:
        minimum: 0
        type: integer
      region_id:
        type: integer
      value_ratio:
        maximum: 1
        minimum: 0
        type: number
    required:
    - base_distance
    - base_fee
    - extra_fee_per_km
    - region_id
    type: object
  api.createDeliveryPromotionRequest:
    properties:
      discount_amount:
        maximum: 10000000
        type: integer
      min_order_amount:
        maximum: 100000000
        minimum: 0
        type: integer
      name:
        maxLength: 50
        minLength: 1
        type: string
      valid_from:
        type: string
      valid_until:
        type: string
    required:
    - discount_amount
    - min_order_amount
    - name
    - valid_from
    - valid_until
    type: object
  api.createDishCategoryRequest:
    properties:
      name:
        maxLength: 30
        minLength: 1
        type: string
      sort_order:
        maximum: 999
        minimum: 0
        type: integer
    required:
    - name
    type: object
  api.createDishRequest:
    properties:
      category_id:
        minimum: 1
        type: integer
      description:
        maxLength: 500
        type: string
      image_url:
        maxLength: 500
        type: string
      ingredient_ids:
        description: 最多20个食材
        items:
          type: integer
        maxItems: 20
        type: array
      is_available:
        type: boolean
      is_online:
        type: boolean
      member_price:
        maximum: 9999900
        minimum: 1
        type: integer
      name:
        maxLength: 50
        minLength: 1
        type: string
      prepare_time:
        description: 预估制作时间（分钟），0表示使用默认值10分钟
        maximum: 120
        minimum: 0
        type: integer
      price:
        description: 最高99999元
        maximum: 9999900
        minimum: 1
        type: integer
      sort_order:
        maximum: 999
        minimum: 0
        type: integer
      tag_ids:
        description: 最多10个标签
        items:
          type: integer
        maxItems: 10
        type: array
    required:
    - name
    - price
    type: object
  api.createMerchantAppealRequest:
    properties:
      claim_id:
        minimum: 1
        type: integer
      evidence_urls:
        items:
          type: string
        maxItems: 10
        type: array
      reason:
        maxLength: 1000
        minLength: 10
        type: string
    required:
    - claim_id
    - reason
    type: object
  api.createMerchantApplicationRequest:
    properties:
      business_address:
        maxLength: 200
        minLength: 5
        type: string
      business_license_image_url:
        maxLength: 500
        type: string
      business_license_number:
        description: 统一社会信用代码或注册号
        maxLength: 30
        minLength: 8
        type: string
      business_scope:
        maxLength: 200
        type: string
      contact_phone:
        maxLength: 11
        minLength: 11
        type: string
      latitude:
        description: 纬度，前端地图选点
        type: string
      legal_person_id_back_url:
        maxLength: 500
        type: string
      legal_person_id_front_url:
        maxLength: 500
        type: string
      legal_person_id_number:
        description: 身份证15或18位
        maxLength: 18
        minLength: 15
        type: string
      legal_person_name:
        maxLength: 30
        minLength: 2
        type: string
      longitude:
        description: 经度，前端地图选点
        type: string
      merchant_name:
        maxLength: 50
        minLength: 2
        type: string
      region_id:
        description: 区域ID，前端上报
        minimum: 1
        type: integer
    required:
    - business_address
    - business_license_image_url
    - business_license_number
    - contact_phone
    - latitude
    - legal_person_id_back_url
    - legal_person_id_front_url
    - legal_person_id_number
    - legal_person_name
    - longitude
    - merchant_name
    - region_id
    type: object
  api.createOperatorApplicationRequest:
    properties:
      region_id:
        type: integer
    required:
    - region_id
    type: object
  api.createOrderRequest:
    properties:
      address_id:
        description: 配送地址ID (外卖订单必填)
        example: 5001
        minimum: 1
        type: integer
      items:
        description: 订单商品列表 (必填，至少包含1个商品，最多50个)
        items:
          $ref: '#/definitions/api.orderItemRequest'
        maxItems: 50
        minItems: 1
        type: array
      merchant_id:
        description: 商户ID (必填)
        example: 10001
        minimum: 1
        type: integer
      notes:
        description: 订单备注 (选填，如忌口、特殊要求等，最多500字符)
        example: 不要香菜
        maxLength: 500
        type: string
      order_type:
        description: '订单类型 (必填，枚举值: takeout-外卖, dine_in-堂食, takeaway-打包自取, reservation-预定点菜)'
        enum:
        - takeout
        - dine_in
        - takeaway
        - reservation
        example: takeout
        type: string
      reservation_id:
        description: 预订ID (预定点菜时必填)
        example: 8001
        minimum: 1
        type: integer
      table_id:
        description: 桌台ID (堂食订单必填)
        example: 301
        minimum: 1
        type: integer
      use_balance:
        description: 是否使用会员余额支付 (选填，仅堂食和自提支持)
        example: false
        type: boolean
      user_voucher_id:
        description: 用户优惠券ID (选填，使用已领取的优惠券抵扣)
        example: 9001
        minimum: 1
        type: integer
    required:
    - items
    - merchant_id
    - order_type
    type: object
  api.createPaymentOrderRequest:
    properties:
      business_type:
        enum:
        - order
        - reservation
        type: string
      order_id:
        minimum: 1
        type: integer
      payment_type:
        enum:
        - native
        - miniprogram
        type: string
    required:
    - business_type
    - order_id
    - payment_type
    type: object
  api.createPeakHourConfigRequest:
    properties:
      coefficient:
        type: number
      days_of_week:
        items:
          type: integer
        maxItems: 7
        minItems: 1
        type: array
      end_time:
        type: string
      region_id:
        type: integer
      start_time:
        type: string
    required:
    - coefficient
    - days_of_week
    - end_time
    - region_id
    - start_time
    type: object
  api.createPrinterRequest:
    properties:
      print_dine_in:
        type: boolean
      print_reservation:
        type: boolean
      print_takeout:
        type: boolean
      printer_key:
        maxLength: 100
        type: string
      printer_name:
        maxLength: 100
        type: string
      printer_sn:
        maxLength: 100
        type: string
      printer_type:
        enum:
        - feieyun
        - yilianyun
        - other
        type: string
    required:
    - printer_key
    - printer_name
    - printer_sn
    - printer_type
    type: object
  api.createRechargeRuleRequest:
    properties:
      bonus_amount:
        description: 赠送金额(分),最大100万元
        maximum: 100000000
        minimum: 0
        type: integer
      recharge_amount:
        description: 充值金额(分),最大100万元
        maximum: 100000000
        minimum: 1
        type: integer
      valid_from:
        type: string
      valid_until:
        type: string
    required:
    - bonus_amount
    - recharge_amount
    - valid_from
    - valid_until
    type: object
  api.createRefundOrderRequest:
    properties:
      payment_order_id:
        minimum: 1
        type: integer
      refund_amount:
        minimum: 1
        type: integer
      refund_reason:
        type: string
      refund_type:
        enum:
        - full
        - partial
        type: string
    required:
    - payment_order_id
    - refund_amount
    - refund_type
    type: object
  api.createReservationRequest:
    properties:
      contact_name:
        maxLength: 50
        type: string
      contact_phone:
        maxLength: 20
        type: string
      date:
        description: YYYY-MM-DD
        type: string
      guest_count:
        maximum: 50
        minimum: 1
        type: integer
      items:
        description: 全款模式预点菜品
        items:
          $ref: '#/definitions/api.reservationItem'
        maxItems: 50
        type: array
      notes:
        maxLength: 500
        type: string
      payment_mode:
        enum:
        - deposit
        - full
        type: string
      table_id:
        minimum: 1
        type: integer
      time:
        description: HH:MM
        type: string
    required:
    - contact_name
    - contact_phone
    - date
    - guest_count
    - payment_mode
    - table_id
    - time
    type: object
  api.createReviewRequest:
    properties:
      content:
        maxLength: 1000
        minLength: 1
        type: string
      images:
        description: 最多9张图片（本地 uploads 相对路径）
        items:
          type: string
        maxItems: 9
        type: array
      order_id:
        minimum: 1
        type: integer
    required:
    - content
    - order_id
    type: object
  api.createRiderAppealRequest:
    properties:
      claim_id:
        minimum: 1
        type: integer
      evidence_urls:
        items:
          type: string
        maxItems: 10
        type: array
      reason:
        maxLength: 1000
        minLength: 10
        type: string
    required:
    - claim_id
    - reason
    type: object
  api.createTableRequest:
    properties:
      capacity:
        maximum: 100
        minimum: 1
        type: integer
      description:
        maxLength: 500
        type: string
      minimum_spend:
        maximum: 100000000
        minimum: 0
        type: integer
      qr_code_url:
        maxLength: 500
        type: string
      table_no:
        maxLength: 50
        type: string
      table_type:
        enum:
        - table
        - room
        type: string
    required:
    - capacity
    - table_no
    - table_type
    type: object
  api.createUserAddressRequest:
    properties:
      contact_name:
        example: 张三
        maxLength: 50
        minLength: 1
        type: string
      contact_phone:
        example: "13800138000"
        maxLength: 11
        minLength: 11
        type: string
      detail_address:
        example: 深圳市南山区科苑路15号
        maxLength: 200
        minLength: 1
        type: string
      is_default:
        example: false
        type: boolean
      latitude:
        example: "22.528499"
        type: string
      longitude:
        example: "113.946874"
        type: string
      region_id:
        example: 1
        minimum: 1
        type: integer
    required:
    - contact_name
    - contact_phone
    - detail_address
    - latitude
    - longitude
    type: object
  api.createVoucherRequest:
    properties:
      allowed_order_types:
        description: '允许的订单类型: takeout, dine_in, takeaway, reservation'
        items:
          type: string
        type: array
      amount:
        description: 最大100万元(分)
        maximum: 100000000
        minimum: 1
        type: integer
      code:
        maxLength: 50
        minLength: 1
        type: string
      description:
        maxLength: 500
        type: string
      min_order_amount:
        description: 最大100万元(分)
        maximum: 100000000
        minimum: 0
        type: integer
      name:
        maxLength: 100
        minLength: 1
        type: string
      total_quantity:
        description: 最大100万张
        maximum: 1000000
        minimum: 1
        type: integer
      valid_from:
        type: string
      valid_until:
        type: string
    required:
    - amount
    - code
    - name
    - total_quantity
    - valid_from
    - valid_until
    type: object
  api.customerDetailResponse:
    properties:
      avatar_url:
        type: string
      avg_order_amount:
        type: integer
      favorite_dishes:
        items:
          $ref: '#/definitions/api.favoriteDishRow'
        type: array
      first_order_at:
        type: string
      full_name:
        type: string
      last_order_at:
        type: string
      phone:
        type: string
      total_amount:
        type: integer
      total_orders:
        type: integer
      user_id:
        type: integer
    type: object
  api.customizationGroup:
    properties:
      id:
        type: integer
      is_required:
        type: boolean
      name:
        type: string
      options:
        items:
          $ref: '#/definitions/api.customizationOption'
        type: array
      sort_order:
        type: integer
    type: object
  api.customizationGroupInput:
    properties:
      is_required:
        description: 是否必选
        type: boolean
      name:
        description: 分组名称（如：辣度、规格），最大50字符
        maxLength: 50
        minLength: 1
        type: string
      options:
        description: 选项列表
        items:
          $ref: '#/definitions/api.customizationOptionInput'
        type: array
      sort_order:
        description: 排序
        minimum: 0
        type: integer
    required:
    - name
    - options
    type: object
  api.customizationGroupResponse:
    properties:
      id:
        type: integer
      is_required:
        type: boolean
      name:
        type: string
      options:
        items:
          $ref: '#/definitions/api.customizationOptionResponse'
        type: array
      sort_order:
        type: integer
    type: object
  api.customizationOption:
    properties:
      extra_price:
        type: integer
      id:
        type: integer
      sort_order:
        type: integer
      tag_id:
        type: integer
      tag_name:
        type: string
    type: object
  api.customizationOptionInput:
    properties:
      extra_price:
        description: 加价（分），最大1万元
        maximum: 1000000
        minimum: 0
        type: integer
      sort_order:
        description: 排序
        minimum: 0
        type: integer
      tag_id:
        description: 标签ID（如：微辣、中辣、特辣）
        minimum: 1
        type: integer
    required:
    - tag_id
    type: object
  api.customizationOptionResponse:
    properties:
      extra_price:
        type: integer
      id:
        type: integer
      sort_order:
        type: integer
      tag_id:
        type: integer
      tag_name:
        type: string
    type: object
  api.dailyInventoryResponse:
    properties:
      available:
        description: '计算字段: total - sold'
        type: integer
      date:
        type: string
      dish_id:
        type: integer
      id:
        type: integer
      merchant_id:
        type: integer
      sold_quantity:
        type: integer
      total_quantity:
        type: integer
    type: object
  api.dailyInventoryWithDishResponse:
    properties:
      available:
        type: integer
      date:
        type: string
      dish_id:
        type: integer
      dish_name:
        type: string
      dish_price:
        type: integer
      id:
        type: integer
      merchant_id:
        type: integer
      sold_quantity:
        type: integer
      total_quantity:
        type: integer
    type: object
  api.dailyStatRow:
    properties:
      commission:
        type: integer
      date:
        type: string
      dine_in_orders:
        type: integer
      order_count:
        type: integer
      takeout_orders:
        type: integer
      total_sales:
        type: integer
    type: object
  api.delayReportRequest:
    properties:
      expected_minutes:
        description: 预计延迟分钟数
        maximum: 120
        minimum: 5
        type: integer
      reason:
        description: 延时原因
        maxLength: 500
        minLength: 5
        type: string
    required:
    - expected_minutes
    - reason
    type: object
  api.delayReportResponse:
    properties:
      expected_minutes:
        type: integer
      order_id:
        type: integer
      reason:
        type: string
      reported_at:
        type: string
      status:
        description: pending, acknowledged
        type: string
    type: object
  api.deliveryFeeConfigResponse:
    properties:
      base_distance:
        type: integer
      base_fee:
        type: integer
      created_at:
        type: string
      extra_fee_per_km:
        type: integer
      id:
        type: integer
      is_active:
        type: boolean
      max_fee:
        type: integer
      min_fee:
        type: integer
      region_id:
        type: integer
      updated_at:
        type: string
      value_ratio:
        type: number
    type: object
  api.deliveryPromotionResponse:
    properties:
      created_at:
        type: string
      discount_amount:
        type: integer
      id:
        type: integer
      is_active:
        type: boolean
      merchant_id:
        type: integer
      min_order_amount:
        type: integer
      name:
        type: string
      updated_at:
        type: string
      valid_from:
        type: string
      valid_until:
        type: string
    type: object
  api.deliveryResponse:
    properties:
      assigned_at:
        type: string
      completed_at:
        type: string
      created_at:
        type: string
      delivered_at:
        type: string
      delivery_address:
        type: string
      delivery_contact:
        type: string
      delivery_fee:
        type: integer
      delivery_latitude:
        type: number
      delivery_longitude:
        type: number
      delivery_phone:
        type: string
      distance:
        type: integer
      estimated_delivery_at:
        type: string
      estimated_pickup_at:
        type: string
      id:
        type: integer
      order_id:
        type: integer
      picked_at:
        type: string
      pickup_address:
        type: string
      pickup_contact:
        type: string
      pickup_latitude:
        type: number
      pickup_longitude:
        type: number
      pickup_phone:
        type: string
      rider_earnings:
        type: integer
      rider_id:
        type: integer
      status:
        type: string
    type: object
  api.depositBalanceResponse:
    properties:
      available_deposit:
        description: 可用押金
        type: integer
      frozen_deposit:
        description: 冻结押金
        type: integer
      total_deposit:
        description: 总押金
        type: integer
    type: object
  api.depositRequest:
    properties:
      amount:
        maximum: 1000000
        minimum: 100
        type: integer
      remark:
        maxLength: 200
        type: string
    required:
    - amount
    type: object
  api.depositResponse:
    properties:
      amount:
        type: integer
      balance_after:
        type: integer
      created_at:
        type: string
      id:
        type: integer
      remark:
        type: string
      rider_id:
        type: integer
      type:
        type: string
    type: object
  api.dishCategoryResponse:
    properties:
      id:
        type: integer
      name:
        type: string
      sort_order:
        type: integer
    type: object
  api.dishCategoryStatsRow:
    properties:
      category_name:
        type: string
      order_count:
        type: integer
      total_quantity:
        type: integer
      total_sales:
        type: integer
    type: object
  api.dishCustomizationsResponse:
    properties:
      dish_id:
        type: integer
      groups:
        items:
          $ref: '#/definitions/api.customizationGroupResponse'
        type: array
    type: object
  api.dishInComboResponse:
    properties:
      id:
        type: integer
      name:
        type: string
    type: object
  api.dishResponse:
    properties:
      category_id:
        type: integer
      category_name:
        type: string
      customization_groups:
        items:
          $ref: '#/definitions/api.customizationGroup'
        type: array
      description:
        type: string
      id:
        type: integer
      image_url:
        type: string
      ingredients:
        items:
          $ref: '#/definitions/api.ingredient'
        type: array
      is_available:
        type: boolean
      is_online:
        type: boolean
      member_price:
        type: integer
      merchant_id:
        type: integer
      name:
        type: string
      prepare_time:
        description: 预估制作时间（分钟）
        type: integer
      price:
        type: integer
      sort_order:
        type: integer
      tags:
        items:
          $ref: '#/definitions/api.tagInfo'
        type: array
    type: object
  api.dishStatusResponse:
    properties:
      id:
        type: integer
      is_online:
        type: boolean
      message:
        type: string
      name:
        type: string
    type: object
  api.dishSummary:
    properties:
      distance:
        description: 距离与运费（需要用户位置）
        type: integer
      estimated_delivery_fee:
        description: 预估配送费（分）
        type: integer
      id:
        type: integer
      image_url:
        type: string
      is_available:
        type: boolean
      member_price:
        description: 会员价（分），null表示无会员价
        type: integer
      merchant_id:
        type: integer
      merchant_latitude:
        type: number
      merchant_logo:
        type: string
      merchant_longitude:
        type: number
      merchant_name:
        description: 商户信息
        type: string
      merchant_region_id:
        description: 用于运费计算
        type: integer
      monthly_sales:
        description: 销量与标签
        type: integer
      name:
        type: string
      price:
        description: 原价（分）
        type: integer
      tags:
        description: 菜品标签
        items:
          type: string
        type: array
    type: object
  api.errorMessage:
    properties:
      error:
        example: error message
        type: string
    type: object
  api.errorRes:
    properties:
      error:
        example: error message
        type: string
    type: object
  api.exceptionReportRequest:
    properties:
      description:
        description: 异常描述
        maxLength: 500
        minLength: 5
        type: string
      evidence_urls:
        description: 证据图片URL
        items:
          type: string
        type: array
      exception_type:
        description: 异常类型
        enum:
        - customer_unreachable
        - merchant_not_ready
        - weather_issue
        - road_blocked
        - other
        type: string
    required:
    - description
    - exception_type
    type: object
  api.exceptionReportResponse:
    properties:
      description:
        type: string
      evidence_urls:
        items:
          type: string
        type: array
      exception_type:
        type: string
      id:
        type: integer
      order_id:
        type: integer
      reported_at:
        type: string
      status:
        description: pending, resolved, dismissed
        type: string
    type: object
  api.exploreRoomItem:
    properties:
      capacity:
        type: integer
      description:
        type: string
      distance:
        description: 距离（米），需要传入用户位置
        type: integer
      estimated_delivery_fee:
        description: 预估配送费（分），需要传入用户位置
        type: integer
      id:
        type: integer
      merchant_address:
        type: string
      merchant_id:
        type: integer
      merchant_latitude:
        type: number
      merchant_logo:
        type: string
      merchant_longitude:
        type: number
      merchant_name:
        type: string
      merchant_phone:
        type: string
      minimum_spend:
        description: 分
        type: integer
      monthly_reservations:
        description: 近30天预订量
        type: integer
      primary_image:
        type: string
      status:
        type: string
      table_no:
        type: string
    type: object
  api.exploreRoomsResponse:
    properties:
      page_id:
        type: integer
      page_size:
        type: integer
      rooms:
        items:
          $ref: '#/definitions/api.exploreRoomItem'
        type: array
      total:
        type: integer
    type: object
  api.favoriteDishRow:
    properties:
      dish_id:
        type: integer
      dish_name:
        type: string
      order_count:
        type: integer
      total_quantity:
        type: integer
    type: object
  api.financeOverviewResponse:
    properties:
      completed_orders:
        description: 订单统计
        type: integer
      net_income:
        description: 汇总
        type: integer
      pending_income:
        description: 待结算收入
        type: integer
      pending_orders:
        type: integer
      promotion_orders:
        description: 满返支出统计
        type: integer
      total_gmv:
        description: 金额统计（分）
        type: integer
      total_income:
        description: 商户净收入
        type: integer
      total_operator_fee:
        description: 运营商服务费
        type: integer
      total_platform_fee:
        description: 平台服务费
        type: integer
      total_promotion_exp:
        description: 满返支出总额
        type: integer
      total_service_fee:
        description: 总服务费（平台+运营商）
        type: integer
    type: object
  api.generateTableQRCodeResponse:
    properties:
      merchant_id:
        example: 1
        type: integer
      qr_code_url:
        example: https://api.example.com/v1/scan/table?merchant_id=1&table_no=T01
        type: string
      table_no:
        example: T01
        type: string
    type: object
  api.getDisplayConfigResponse:
    properties:
      created_at:
        type: string
      enable_kds:
        type: boolean
      enable_print:
        type: boolean
      enable_voice:
        type: boolean
      id:
        type: integer
      kds_url:
        type: string
      merchant_id:
        type: integer
      print_dine_in:
        type: boolean
      print_reservation:
        type: boolean
      print_takeout:
        type: boolean
      updated_at:
        type: string
      voice_dine_in:
        type: boolean
      voice_takeout:
        type: boolean
    type: object
  api.getRecommendationConfigResponse:
    properties:
      auto_adjust:
        type: boolean
      exploitation_ratio:
        type: number
      exploration_ratio:
        type: number
      random_ratio:
        type: number
      region_id:
        type: integer
      updated_at:
        type: string
    type: object
  api.growthStatRow:
    properties:
      count:
        description: 数量
        type: integer
      date:
        description: 日期
        type: string
    type: object
  api.hourlyDistributionRow:
    properties:
      hour:
        description: 小时(0-23)
        type: integer
      order_count:
        description: 订单数
        type: integer
      total_gmv:
        description: 总GMV(分)
        type: integer
    type: object
  api.ingredient:
    properties:
      category:
        type: string
      id:
        type: integer
      is_allergen:
        type: boolean
      name:
        type: string
    type: object
  api.inventoryStatsResponse:
    properties:
      available_dishes:
        description: 有库存菜品数
        type: integer
      sold_out_dishes:
        description: 已售罄菜品数
        type: integer
      total_dishes:
        description: 总菜品数
        type: integer
      unlimited_dishes:
        description: 无限库存菜品数
        type: integer
    type: object
  api.joinMembershipRequest:
    properties:
      merchant_id:
        minimum: 1
        type: integer
    required:
    - merchant_id
    type: object
  api.kitchenOrderItem:
    properties:
      customizations:
        items:
          $ref: '#/definitions/api.orderCustomizationItem'
        type: array
      id:
        type: integer
      image_url:
        type: string
      name:
        type: string
      prepare_time:
        description: 预估制作时间（分钟）
        type: integer
      quantity:
        type: integer
    type: object
  api.kitchenOrderResponse:
    properties:
      created_at:
        description: 创建时间
        type: string
      estimated_ready_at:
        description: 预计出餐时间
        type: string
      id:
        description: 订单ID
        type: integer
      is_urged:
        description: 是否催单
        type: boolean
      items:
        description: 订单商品列表
        items:
          $ref: '#/definitions/api.kitchenOrderItem'
        type: array
      notes:
        description: 订单备注
        type: string
      order_no:
        description: 订单编号
        type: string
      order_type:
        description: '订单类型: takeout-外卖, dine_in-堂食, takeaway-打包自取'
        type: string
      paid_at:
        description: 支付时间（订单开始计时的时间）
        type: string
      pickup_number:
        description: 取餐号 (打包自取)
        type: string
      status:
        description: '订单状态: paid-新订单, preparing-制作中, ready-出餐完成'
        type: string
      table_no:
        description: 桌台号 (堂食订单)
        type: string
      waiting_minutes:
        description: 等待时间（分钟）
        type: integer
    type: object
  api.kitchenOrdersResponse:
    properties:
      new_orders:
        description: 新订单列表
        items:
          $ref: '#/definitions/api.kitchenOrderResponse'
        type: array
      preparing_orders:
        description: 制作中订单列表
        items:
          $ref: '#/definitions/api.kitchenOrderResponse'
        type: array
      ready_orders:
        description: 待取餐/待配送订单列表
        items:
          $ref: '#/definitions/api.kitchenOrderResponse'
        type: array
      stats:
        allOf:
        - $ref: '#/definitions/api.kitchenStats'
        description: 统计信息
    type: object
  api.kitchenStats:
    properties:
      avg_prepare_time:
        description: 平均出餐时间（分钟）
        type: integer
      completed_today_count:
        description: 今日完成订单数
        type: integer
      new_count:
        description: 新订单数
        type: integer
      preparing_count:
        description: 制作中订单数
        type: integer
      ready_count:
        description: 待取餐数
        type: integer
    type: object
  api.listBrowseHistoryResponse:
    properties:
      items:
        description: 浏览记录列表
        items:
          $ref: '#/definitions/api.browseHistoryItem'
        type: array
      total:
        description: 总数
        type: integer
    type: object
  api.listComboSetsResponse:
    properties:
      combo_sets:
        items:
          $ref: '#/definitions/api.comboSetResponse'
        type: array
    type: object
  api.listDailyInventoryResponse:
    properties:
      inventories:
        items:
          $ref: '#/definitions/api.dailyInventoryWithDishResponse'
        type: array
    type: object
  api.listDishCategoriesResponse:
    properties:
      categories:
        items:
          $ref: '#/definitions/api.dishCategoryResponse'
        type: array
    type: object
  api.listDishesResponse:
    properties:
      dishes:
        items:
          $ref: '#/definitions/api.dishResponse'
        type: array
      total_count:
        type: integer
    type: object
  api.listNotificationsResponse:
    properties:
      notifications:
        items:
          $ref: '#/definitions/api.notificationResponse'
        type: array
      total_count:
        type: integer
    type: object
  api.listOperatorMerchantsResponse:
    properties:
      limit:
        type: integer
      merchants:
        items:
          $ref: '#/definitions/api.merchantListItem'
        type: array
      page:
        type: integer
      total:
        type: integer
    type: object
  api.listOperatorRidersResponse:
    properties:
      limit:
        type: integer
      page:
        type: integer
      riders:
        items:
          $ref: '#/definitions/api.riderListItem'
        type: array
      total:
        type: integer
    type: object
  api.listRiderPremiumScoreHistoryResponse:
    properties:
      current_score:
        description: 当前积分
        type: integer
      logs:
        description: 历史记录
        items:
          $ref: '#/definitions/api.premiumScoreLogItem'
        type: array
      total:
        description: 总记录数
        type: integer
    type: object
  api.listRoomsForCustomerResponse:
    properties:
      count:
        type: integer
      rooms:
        items:
          $ref: '#/definitions/api.roomListItemResponse'
        type: array
    type: object
  api.listTablesResponse:
    properties:
      count:
        type: integer
      tables:
        items:
          $ref: '#/definitions/api.tableResponse'
        type: array
    type: object
  api.locationPoint:
    properties:
      accuracy:
        description: GPS精度(米)，0-1000
        maximum: 1000
        minimum: 0
        type: number
      heading:
        description: 航向角(度)，0-360
        maximum: 360
        minimum: 0
        type: number
      latitude:
        maximum: 90
        minimum: -90
        type: number
      longitude:
        maximum: 180
        minimum: -180
        type: number
      recorded_at:
        type: string
      speed:
        description: 速度(m/s)，0-200(约720km/h)
        maximum: 200
        minimum: 0
        type: number
    required:
    - latitude
    - longitude
    - recorded_at
    type: object
  api.locationResponse:
    properties:
      accuracy:
        type: number
      heading:
        type: number
      latitude:
        type: number
      longitude:
        type: number
      recorded_at:
        type: string
      speed:
        type: number
    type: object
  api.markAllAsReadResponse:
    properties:
      success:
        type: boolean
    type: object
  api.membershipResponse:
    properties:
      balance:
        type: integer
      created_at:
        type: string
      id:
        type: integer
      merchant_id:
        type: integer
      merchant_name:
        type: string
      total_consumed:
        type: integer
      total_recharged:
        type: integer
      user_id:
        type: integer
    type: object
  api.membershipSettingsResponse:
    properties:
      allow_with_discount:
        type: boolean
      allow_with_voucher:
        type: boolean
      balance_usable_scenes:
        items:
          type: string
        type: array
      bonus_usable_scenes:
        items:
          type: string
        type: array
      max_deduction_percent:
        type: integer
      merchant_id:
        type: integer
    type: object
  api.merchantApplicationDraftResponse:
    properties:
      business_address:
        type: string
      business_license_image_url:
        type: string
      business_license_number:
        type: string
      business_license_ocr:
        $ref: '#/definitions/api.BusinessLicenseOCRData'
      business_scope:
        type: string
      contact_phone:
        type: string
      created_at:
        type: string
      environment_images:
        items:
          type: string
        type: array
      food_permit_ocr:
        $ref: '#/definitions/api.FoodPermitOCRData'
      food_permit_url:
        type: string
      id:
        type: integer
      id_card_back_ocr:
        $ref: '#/definitions/api.MerchantIDCardOCRData'
      id_card_front_ocr:
        $ref: '#/definitions/api.MerchantIDCardOCRData'
      latitude:
        type: string
      legal_person_id_back_url:
        type: string
      legal_person_id_front_url:
        type: string
      legal_person_id_number:
        type: string
      legal_person_name:
        type: string
      longitude:
        type: string
      merchant_name:
        type: string
      region_id:
        type: integer
      reject_reason:
        type: string
      status:
        type: string
      storefront_images:
        items:
          type: string
        type: array
      updated_at:
        type: string
      user_id:
        type: integer
    type: object
  api.merchantApplicationResponse:
    properties:
      business_address:
        type: string
      business_license_image_url:
        type: string
      business_license_number:
        type: string
      business_scope:
        type: string
      contact_phone:
        type: string
      created_at:
        type: string
      id:
        type: integer
      legal_person_id_back_url:
        type: string
      legal_person_id_front_url:
        type: string
      legal_person_id_number:
        type: string
      legal_person_name:
        type: string
      merchant_name:
        type: string
      reject_reason:
        type: string
      reviewed_at:
        type: string
      reviewed_by:
        type: integer
      status:
        type: string
      updated_at:
        type: string
      user_id:
        type: integer
    type: object
  api.merchantApplymentStatusResponse:
    properties:
      reject_reason:
        description: 拒绝原因
        type: string
      sign_url:
        description: 签约链接
        type: string
      status:
        description: 状态
        type: string
      status_desc:
        description: 状态描述
        type: string
      sub_mch_id:
        description: 二级商户号
        type: string
    type: object
  api.merchantBindBankRequest:
    properties:
      account_bank:
        description: 开户银行
        maxLength: 128
        type: string
      account_name:
        description: 开户名称
        maxLength: 128
        type: string
      account_number:
        description: 银行账号
        type: string
      account_type:
        description: 银行账户信息
        enum:
        - ACCOUNT_TYPE_BUSINESS
        - ACCOUNT_TYPE_PRIVATE
        type: string
      bank_address_code:
        description: 开户银行省市编码
        type: string
      bank_name:
        description: 开户银行全称（支行）
        type: string
      contact_email:
        description: 联系邮箱（可选）
        type: string
      contact_phone:
        description: 联系信息
        type: string
    required:
    - account_bank
    - account_name
    - account_number
    - account_type
    - bank_address_code
    - contact_phone
    type: object
  api.merchantBindBankResponse:
    properties:
      applyment_id:
        description: 微信申请单号
        type: integer
      message:
        description: 消息
        type: string
      status:
        description: 状态
        type: string
    type: object
  api.merchantCartResponse:
    properties:
      all_available:
        description: 所有商品是否可购买
        type: boolean
      cart_id:
        description: 购物车ID
        type: integer
      item_count:
        description: 商品数量
        type: integer
      merchant_id:
        description: 商户ID
        type: integer
      merchant_logo:
        description: 商户Logo URL
        type: string
      merchant_name:
        description: 商户名称
        type: string
      subtotal:
        description: 商品小计（分）
        type: integer
    type: object
  api.merchantDetailResponse:
    properties:
      address:
        type: string
      created_at:
        type: string
      description:
        type: string
      id:
        type: integer
      is_open:
        type: boolean
      latitude:
        type: number
      logo_url:
        type: string
      longitude:
        type: number
      name:
        type: string
      owner_user_id:
        type: integer
      phone:
        type: string
      region_id:
        type: integer
      status:
        type: string
      updated_at:
        type: string
      version:
        type: integer
    type: object
  api.merchantHourlyStatsRow:
    properties:
      avg_order_amount:
        type: integer
      hour:
        type: integer
      order_count:
        type: integer
    type: object
  api.merchantListItem:
    properties:
      address:
        type: string
      created_at:
        type: string
      id:
        type: integer
      is_open:
        type: boolean
      latitude:
        type: number
      longitude:
        type: number
      name:
        type: string
      owner_user_id:
        type: integer
      phone:
        type: string
      region_id:
        type: integer
      status:
        type: string
    type: object
  api.merchantOrderSourceStatsRow:
    properties:
      order_count:
        type: integer
      order_type:
        type: string
      total_sales:
        type: integer
    type: object
  api.merchantOverviewResponse:
    properties:
      avg_daily_sales:
        type: integer
      total_commission:
        type: integer
      total_days:
        type: integer
      total_orders:
        type: integer
      total_sales:
        type: integer
    type: object
  api.merchantPromotionsResponse:
    properties:
      delivery_fee_rules:
        description: 满返运费
        items:
          $ref: '#/definitions/api.promotionItem'
        type: array
      discount_rules:
        description: 满减活动
        items:
          $ref: '#/definitions/api.promotionItem'
        type: array
      merchant_id:
        type: integer
      vouchers:
        description: 可领优惠券
        items:
          $ref: '#/definitions/api.promotionItem'
        type: array
    type: object
  api.merchantRankingRow:
    properties:
      avg_order_amount:
        description: 平均订单金额(分)
        type: integer
      merchant_id:
        description: 商户ID
        type: integer
      merchant_name:
        description: 商户名称
        type: string
      order_count:
        description: 订单数
        type: integer
      region_id:
        description: 区域ID
        type: integer
      region_name:
        description: 区域名称
        type: string
      total_commission:
        description: 总佣金(分)
        type: integer
      total_sales:
        description: 总销售额(分)
        type: integer
    type: object
  api.merchantRepurchaseRateResponse:
    properties:
      avg_orders_per_user:
        type: number
      repeat_users:
        type: integer
      repurchase_rate:
        description: 百分比
        type: number
      total_users:
        type: integer
    type: object
  api.merchantResponse:
    properties:
      address:
        type: string
      created_at:
        type: string
      description:
        type: string
      id:
        type: integer
      is_open:
        type: boolean
      latitude:
        type: string
      logo_url:
        type: string
      longitude:
        type: string
      name:
        type: string
      owner_user_id:
        type: integer
      phone:
        type: string
      region_id:
        type: integer
      status:
        type: string
      updated_at:
        type: string
    type: object
  api.merchantStatusResponse:
    properties:
      auto_close_at:
        type: string
      is_open:
        type: boolean
      message:
        type: string
    type: object
  api.merchantSummary:
    properties:
      address:
        type: string
      description:
        type: string
      distance:
        description: 距离（米），需要传入用户位置
        type: integer
      estimated_delivery_fee:
        description: 预估配送费（分），需要传入用户位置
        type: integer
      id:
        type: integer
      latitude:
        type: number
      logo_url:
        type: string
      longitude:
        type: number
      monthly_sales:
        description: 近30天订单量
        type: integer
      name:
        type: string
      region_id:
        description: 区域ID，用于运费计算
        type: integer
      tags:
        description: 商户标签
        items:
          type: string
        type: array
    type: object
  api.miniProgramPayParams:
    properties:
      nonceStr:
        type: string
      package:
        type: string
      paySign:
        type: string
      signType:
        type: string
      timeStamp:
        type: string
    type: object
  api.notificationPreferencesResponse:
    properties:
      created_at:
        type: string
      do_not_disturb_end:
        type: string
      do_not_disturb_start:
        type: string
      enable_delivery_notifications:
        type: boolean
      enable_order_notifications:
        type: boolean
      enable_payment_notifications:
        type: boolean
      enable_system_notifications:
        type: boolean
      updated_at:
        type: string
      user_id:
        type: integer
    type: object
  api.notificationResponse:
    properties:
      content:
        type: string
      created_at:
        type: string
      expires_at:
        type: string
      extra_data:
        additionalProperties: {}
        type: object
      id:
        type: integer
      is_pushed:
        type: boolean
      is_read:
        type: boolean
      pushed_at:
        type: string
      read_at:
        type: string
      related_id:
        type: integer
      related_type:
        type: string
      title:
        type: string
      type:
        type: string
      user_id:
        type: integer
    type: object
  api.operatorApplicationResponse:
    properties:
      business_license_number:
        type: string
      business_license_ocr:
        $ref: '#/definitions/api.BusinessLicenseOCRData'
      business_license_url:
        type: string
      contact_name:
        type: string
      contact_phone:
        type: string
      created_at:
        type: string
      id:
        type: integer
      id_card_back_ocr:
        $ref: '#/definitions/api.OperatorIDCardBackOCR'
      id_card_back_url:
        type: string
      id_card_front_ocr:
        $ref: '#/definitions/api.OperatorIDCardOCRData'
      id_card_front_url:
        type: string
      legal_person_id_number:
        type: string
      legal_person_name:
        type: string
      name:
        type: string
      region_id:
        type: integer
      region_name:
        type: string
      reject_reason:
        type: string
      requested_contract_years:
        type: integer
      reviewed_at:
        type: string
      status:
        type: string
      submitted_at:
        type: string
      updated_at:
        type: string
      user_id:
        type: integer
    type: object
  api.operatorApplymentStatusResponse:
    properties:
      applyment_id:
        description: 微信进件ID
        type: integer
      created_at:
        type: string
      reject_reason:
        description: 拒绝原因
        type: string
      sign_url:
        description: 签约链接
        type: string
      status:
        description: 状态
        type: string
      status_desc:
        description: 状态描述
        type: string
      sub_mch_id:
        description: 二级商户号（开户成功后返回）
        type: string
      updated_at:
        type: string
    type: object
  api.operatorBindBankRequest:
    properties:
      account_bank:
        description: 开户银行
        maxLength: 128
        type: string
      account_name:
        description: 开户名称
        maxLength: 128
        type: string
      account_number:
        description: 银行账号
        type: string
      account_type:
        description: 银行账户信息
        enum:
        - ACCOUNT_TYPE_BUSINESS
        - ACCOUNT_TYPE_PRIVATE
        type: string
      bank_address_code:
        description: 开户银行省市编码
        type: string
      bank_name:
        description: 开户银行全称（支行）
        type: string
      contact_email:
        description: 联系邮箱（可选）
        type: string
      contact_phone:
        description: 联系信息
        type: string
    required:
    - account_bank
    - account_name
    - account_number
    - account_type
    - bank_address_code
    - contact_phone
    type: object
  api.operatorBindBankResponse:
    properties:
      applyment_id:
        description: 微信申请单号
        type: integer
      message:
        description: 消息
        type: string
      status:
        description: 状态
        type: string
    type: object
  api.operatorCommissionItem:
    properties:
      commission:
        description: 佣金金额
        type: integer
      commission_rate:
        description: 如 "3%"
        type: string
      date:
        type: string
      order_count:
        type: integer
      total_gmv:
        type: integer
    type: object
  api.operatorCommissionResponse:
    properties:
      items:
        items:
          $ref: '#/definitions/api.operatorCommissionItem'
        type: array
      limit:
        type: integer
      page:
        type: integer
      summary:
        properties:
          total_commission:
            type: integer
          total_gmv:
            type: integer
          total_orders:
            type: integer
        type: object
      total:
        type: integer
      total_count:
        type: integer
    type: object
  api.operatorFinanceOverviewResponse:
    properties:
      current_month:
        description: 当月统计
        properties:
          pending_commission:
            description: 待分账佣金（当月订单尚未分账部分）
            type: integer
          settled_commission:
            description: 已完成分账佣金
            type: integer
          total_commission:
            description: 平台佣金（运营商可分得 60%）
            type: integer
          total_gmv:
            description: 区域总交易额
            type: integer
          total_orders:
            description: 订单数
            type: integer
        type: object
      region_id:
        description: 区域信息
        type: integer
      region_name:
        type: string
      total:
        description: 累计统计（基于分账完成的订单）
        properties:
          settled_commission:
            description: 已结算（分账完成）
            type: integer
          total_commission:
            description: 累计平台佣金
            type: integer
          total_gmv:
            description: 累计交易额
            type: integer
        type: object
    type: object
  api.operatorMerchantRankingRow:
    properties:
      avg_order_amount:
        type: integer
      merchant_id:
        type: integer
      merchant_name:
        type: string
      order_count:
        type: integer
      total_commission:
        type: integer
      total_sales:
        type: integer
    type: object
  api.operatorRiderRankingRow:
    properties:
      avg_delivery_time_seconds:
        type: integer
      completed_count:
        type: integer
      delivery_count:
        type: integer
      rider_id:
        type: integer
      rider_name:
        type: string
      total_earnings:
        type: integer
    type: object
  api.orderCalculationItem:
    properties:
      combo_id:
        example: 2001
        type: integer
      dish_id:
        example: 1001
        type: integer
      name:
        example: 宫保鸡丁
        type: string
      quantity:
        example: 2
        type: integer
      subtotal:
        example: 5760
        type: integer
      unit_price:
        example: 2880
        type: integer
    type: object
  api.orderCalculationResponse:
    properties:
      delivery_fee:
        description: 配送费 (单位：分)
        example: 500
        type: integer
      delivery_fee_discount:
        description: 配送费优惠 (单位：分)
        example: 200
        type: integer
      discount_amount:
        description: 满减优惠 (单位：分)
        example: 500
        type: integer
      items:
        description: 商品明细
        items:
          $ref: '#/definitions/api.orderCalculationItem'
        type: array
      promotions:
        description: 优惠明细
        items:
          $ref: '#/definitions/api.orderPromotion'
        type: array
      subtotal:
        description: 商品小计 (单位：分)
        example: 5760
        type: integer
      total_amount:
        description: 最终应付金额 (单位：分)
        example: 5560
        type: integer
    type: object
  api.orderCustomizationItem:
    properties:
      extra_price:
        description: 额外价格 (单位：分，0表示不加价，最大100元)
        example: 0
        maximum: 10000
        minimum: 0
        type: integer
      name:
        description: '定制项名称 (如: "辣度", "甜度", "规格"，最多50字符)'
        example: 辣度
        maxLength: 50
        type: string
      value:
        description: '定制项取值 (如: "微辣", "中辣", "特辣"，最多50字符)'
        example: 中辣
        maxLength: 50
        type: string
    required:
    - name
    - value
    type: object
  api.orderItemRequest:
    properties:
      combo_id:
        description: 套餐ID (dish_id和combo_id二选一，不能同时为空)
        example: 2001
        minimum: 1
        type: integer
      customizations:
        description: 定制化选项列表 (选填，如规格、口味等，最多10个)
        items:
          $ref: '#/definitions/api.orderCustomizationItem'
        maxItems: 10
        type: array
      dish_id:
        description: 菜品ID (dish_id和combo_id二选一，不能同时为空)
        example: 1001
        minimum: 1
        type: integer
      quantity:
        description: 数量 (必填，范围：1-99)
        example: 2
        maximum: 99
        minimum: 1
        type: integer
    required:
    - quantity
    type: object
  api.orderItemResponse:
    properties:
      combo_id:
        description: 套餐ID (套餐订单时有值)
        example: 2001
        type: integer
      customizations:
        description: 定制化选项列表
        items:
          $ref: '#/definitions/api.orderCustomizationItem'
        type: array
      dish_id:
        description: 菜品ID (菜品订单时有值)
        example: 1001
        type: integer
      id:
        description: 订单明细ID
        example: 20001
        type: integer
      image_url:
        description: 商品图片URL
        example: https://example.com/images/dish1001.jpg
        type: string
      name:
        description: 商品名称
        example: 宫保鸡丁
        type: string
      quantity:
        description: 数量
        example: 2
        type: integer
      subtotal:
        description: 小计金额 (单位：分，含定制化加价)
        example: 5760
        type: integer
      unit_price:
        description: 单价 (单位：分)
        example: 2880
        type: integer
    type: object
  api.orderPromotion:
    properties:
      amount:
        description: 优惠金额（分）
        example: 1000
        type: integer
      title:
        description: 优惠名称
        example: 满50减10
        type: string
      type:
        description: discount, delivery_fee_return, voucher
        example: discount
        type: string
    type: object
  api.orderResponse:
    properties:
      address_id:
        description: 配送地址ID (外卖订单时有值)
        example: 5001
        type: integer
      cancel_reason:
        description: 取消原因
        example: 商品缺货
        type: string
      cancelled_at:
        description: 取消时间
        example: "2025-12-01T12:25:00Z"
        type: string
      completed_at:
        description: 完成时间
        example: "2025-12-01T13:15:00Z"
        type: string
      created_at:
        description: 创建时间
        example: "2025-12-01T12:20:00Z"
        type: string
      delivery_distance:
        description: 配送距离 (单位：米)
        example: 2500
        type: integer
      delivery_fee:
        description: 配送费 (单位：分)
        example: 500
        type: integer
      delivery_fee_discount:
        description: 配送费优惠 (单位：分)
        example: 200
        type: integer
      discount_amount:
        description: 优惠金额 (单位：分)
        example: 500
        type: integer
      id:
        description: 订单ID
        example: 100001
        type: integer
      items:
        description: 订单商品列表
        items:
          $ref: '#/definitions/api.orderItemResponse'
        type: array
      merchant_id:
        description: 商户ID
        example: 20001
        type: integer
      merchant_name:
        description: 商户名称
        example: 张三餐厅
        type: string
      notes:
        description: 订单备注
        example: 不要香菜
        type: string
      order_no:
        description: 订单编号 (唯一订单号)
        example: ORD20251201123456
        type: string
      order_type:
        description: '订单类型 (枚举: takeout-外卖, dine_in-堂食, takeaway-打包自取, reservation-预定点菜)'
        enum:
        - takeout
        - dine_in
        - takeaway
        - reservation
        example: takeout
        type: string
      paid_at:
        description: 支付时间
        example: "2025-12-01T12:30:00Z"
        type: string
      payment_method:
        description: '支付方式 (枚举: wechat-微信支付, balance-余额支付)'
        enum:
        - wechat
        - balance
        example: wechat
        type: string
      reservation_id:
        description: 预订ID (预定点菜时有值)
        example: 8001
        type: integer
      status:
        description: '订单状态 (枚举: pending-待支付, paid-已支付, preparing-制作中, ready-待取餐/待配送,
          delivering-配送中, completed-已完成, cancelled-已取消)'
        enum:
        - pending
        - paid
        - preparing
        - ready
        - delivering
        - completed
        - cancelled
        example: paid
        type: string
      subtotal:
        description: 商品小计 (单位：分，不含配送费)
        example: 5760
        type: integer
      table_id:
        description: 桌台ID (堂食订单时有值)
        example: 301
        type: integer
      total_amount:
        description: 订单总金额 (单位：分)
        example: 5760
        type: integer
      updated_at:
        description: 更新时间
        example: "2025-12-01T12:30:00Z"
        type: string
      user_id:
        description: 用户ID
        example: 10001
        type: integer
    type: object
  api.paymentOrderResponse:
    properties:
      amount:
        type: integer
      business_type:
        type: string
      created_at:
        type: string
      id:
        type: integer
      order_id:
        type: integer
      out_trade_no:
        type: string
      paid_at:
        type: string
      pay_params:
        allOf:
        - $ref: '#/definitions/api.miniProgramPayParams'
        description: 小程序调起支付参数
      payment_type:
        type: string
      prepay_id:
        type: string
      status:
        type: string
      user_id:
        type: integer
    type: object
  api.peakHourConfigResponse:
    properties:
      coefficient:
        type: number
      created_at:
        type: string
      days_of_week:
        items:
          type: integer
        type: array
      end_time:
        type: string
      id:
        type: integer
      is_active:
        type: boolean
      region_id:
        type: integer
      start_time:
        type: string
      updated_at:
        type: string
    type: object
  api.platformDailyStatRow:
    properties:
      active_merchants:
        description: 活跃商户数
        type: integer
      active_users:
        description: 活跃用户数
        type: integer
      date:
        description: 日期
        type: string
      dine_in_orders:
        description: 堂食订单数
        type: integer
      order_count:
        description: 订单数
        type: integer
      takeout_orders:
        description: 外卖订单数
        type: integer
      total_commission:
        description: 平台佣金(分)
        type: integer
      total_gmv:
        description: 总GMV(分)
        type: integer
    type: object
  api.platformOverviewResponse:
    properties:
      active_merchants:
        description: 活跃商户数
        type: integer
      active_users:
        description: 活跃用户数
        type: integer
      total_commission:
        description: 平台总佣金(分)
        type: integer
      total_gmv:
        description: 总GMV(分)
        type: integer
      total_orders:
        description: 总订单数
        type: integer
    type: object
  api.premiumScoreLogItem:
    properties:
      change_amount:
        description: 变更量（正数为增加，负数为减少）
        type: integer
      change_type:
        description: 变更类型：normal_order/premium_order/adjustment
        type: string
      change_type_name:
        description: 变更类型中文名
        type: string
      created_at:
        description: 变更时间
        type: string
      id:
        type: integer
      new_score:
        description: 变更后积分
        type: integer
      old_score:
        description: 变更前积分
        type: integer
      related_delivery_id:
        description: 关联配送单ID
        type: integer
      related_order_id:
        description: 关联订单ID
        type: integer
      remark:
        description: 备注
        type: string
    type: object
  api.printerResponse:
    properties:
      created_at:
        type: string
      id:
        type: integer
      is_active:
        type: boolean
      merchant_id:
        type: integer
      print_dine_in:
        type: boolean
      print_reservation:
        type: boolean
      print_takeout:
        type: boolean
      printer_name:
        type: string
      printer_sn:
        type: string
      printer_type:
        type: string
      updated_at:
        type: string
    type: object
  api.promotionItem:
    properties:
      description:
        description: 优惠描述
        type: string
      min_amount:
        description: 起点金额（分）
        type: integer
      title:
        description: 优惠标题
        type: string
      type:
        description: delivery_fee_return, discount, voucher
        type: string
      valid_until:
        description: 有效期
        type: string
      value:
        description: 优惠金额或比例
        type: integer
    type: object
  api.realtimeDashboardResponse:
    properties:
      active_merchants_24h:
        description: 24小时活跃商户数
        type: integer
      active_users_24h:
        description: 24小时活跃用户数
        type: integer
      delivering_orders:
        description: 配送中订单数
        type: integer
      gmv_24h:
        description: 24小时GMV(分)
        type: integer
      orders_24h:
        description: 24小时订单数
        type: integer
      pending_orders:
        description: 待接单订单数
        type: integer
      preparing_orders:
        description: 制作中订单数
        type: integer
      ready_orders:
        description: 待取餐订单数
        type: integer
    type: object
  api.rechargeRequest:
    properties:
      membership_id:
        minimum: 1
        type: integer
      payment_method:
        enum:
        - wechat
        - alipay
        type: string
      recharge_amount:
        description: 最大100万元
        maximum: 100000000
        minimum: 1
        type: integer
    required:
    - membership_id
    - payment_method
    - recharge_amount
    type: object
  api.rechargeRuleResponse:
    properties:
      bonus_amount:
        type: integer
      created_at:
        type: string
      id:
        type: integer
      is_active:
        type: boolean
      merchant_id:
        type: integer
      recharge_amount:
        type: integer
      valid_from:
        type: string
      valid_until:
        type: string
    type: object
  api.recommendCombosResponse:
    properties:
      algorithm:
        type: string
      combos:
        items:
          $ref: '#/definitions/api.comboSummary'
        type: array
      expired_at:
        type: string
    type: object
  api.recommendDishesAPIResponse:
    properties:
      code:
        example: 0
        type: integer
      data:
        $ref: '#/definitions/api.recommendDishesResponse'
      message:
        example: ok
        type: string
    type: object
  api.recommendDishesResponse:
    properties:
      algorithm:
        type: string
      dishes:
        items:
          $ref: '#/definitions/api.dishSummary'
        type: array
      expired_at:
        type: string
    type: object
  api.recommendMerchantsResponse:
    properties:
      algorithm:
        type: string
      expired_at:
        type: string
      merchants:
        items:
          $ref: '#/definitions/api.merchantSummary'
        type: array
    type: object
  api.recommendedOrderResponse:
    properties:
      delivery_fee:
        type: integer
      delivery_latitude:
        type: number
      delivery_longitude:
        type: number
      distance:
        description: 商家到顾客距离
        type: integer
      distance_score:
        type: integer
      distance_to_pickup:
        description: 直线距离（米）
        type: integer
      estimated_minutes:
        description: 预估时间（分钟）
        type: integer
      expires_at:
        type: string
      merchant_id:
        type: integer
      order_id:
        type: integer
      pickup_latitude:
        type: number
      pickup_longitude:
        type: number
      profit_score:
        type: integer
      real_distance:
        description: 真实骑行距离（米）
        type: integer
      real_duration:
        description: 真实骑行时间（秒）
        type: integer
      route_score:
        type: integer
      total_score:
        type: integer
      urgency_score:
        type: integer
    type: object
  api.refundOrderResponse:
    properties:
      created_at:
        type: string
      id:
        type: integer
      out_refund_no:
        type: string
      payment_order_id:
        type: integer
      refund_amount:
        type: integer
      refund_reason:
        type: string
      refund_type:
        type: string
      refunded_at:
        type: string
      status:
        type: string
    type: object
  api.regionAvailabilityResponse:
    properties:
      code:
        type: string
      is_available:
        type: boolean
      name:
        type: string
      reason:
        description: 不可用原因
        type: string
      region_id:
        type: integer
    type: object
  api.regionComparisonRow:
    properties:
      active_users:
        description: 活跃用户数
        type: integer
      avg_order_amount:
        description: 平均订单金额(分)
        type: integer
      merchant_count:
        description: 商户数
        type: integer
      order_count:
        description: 订单数
        type: integer
      region_id:
        description: 区域ID
        type: integer
      region_name:
        description: 区域名称
        type: string
      total_commission:
        description: 总佣金(分)
        type: integer
      total_gmv:
        description: 总GMV(分)
        type: integer
    type: object
  api.regionDailyTrendRow:
    properties:
      active_merchants:
        type: integer
      active_users:
        type: integer
      date:
        type: string
      order_count:
        type: integer
      total_commission:
        type: integer
      total_gmv:
        type: integer
    type: object
  api.regionResponse:
    properties:
      code:
        type: string
      id:
        type: integer
      latitude:
        type: string
      level:
        type: integer
      longitude:
        type: string
      name:
        type: string
      parent_id:
        type: integer
    type: object
  api.regionStatsResponse:
    properties:
      merchant_count:
        type: integer
      region_id:
        type: integer
      region_name:
        type: string
      total_commission:
        type: integer
      total_gmv:
        type: integer
      total_orders:
        type: integer
    type: object
  api.rejectOrderBody:
    properties:
      reason:
        description: 拒单原因 (必填)
        example: 材料售罄
        maxLength: 200
        minLength: 2
        type: string
    required:
    - reason
    type: object
  api.renewAccessTokenRequest:
    properties:
      refresh_token:
        maxLength: 1024
        minLength: 1
        type: string
    required:
    - refresh_token
    type: object
  api.renewAccessTokenResponse:
    properties:
      access_token:
        type: string
      access_token_expires_at:
        type: string
    type: object
  api.replyReviewRequest:
    properties:
      reply:
        maxLength: 500
        minLength: 1
        type: string
    required:
    - reply
    type: object
  api.reservationItem:
    properties:
      combo_id:
        minimum: 1
        type: integer
      dish_id:
        minimum: 1
        type: integer
      quantity:
        maximum: 99
        minimum: 1
        type: integer
    required:
    - quantity
    type: object
  api.reservationResponse:
    properties:
      cancel_reason:
        type: string
      cancelled_at:
        type: string
      completed_at:
        type: string
      confirmed_at:
        type: string
      contact_name:
        type: string
      contact_phone:
        type: string
      created_at:
        type: string
      deposit_amount:
        type: integer
      guest_count:
        type: integer
      id:
        type: integer
      merchant_id:
        type: integer
      notes:
        type: string
      paid_at:
        type: string
      payment_deadline:
        type: string
      payment_mode:
        type: string
      prepaid_amount:
        type: integer
      refund_deadline:
        type: string
      reservation_date:
        type: string
      reservation_time:
        type: string
      status:
        type: string
      table_id:
        type: integer
      table_no:
        type: string
      table_type:
        type: string
      updated_at:
        type: string
      user_id:
        type: integer
    type: object
  api.resumeOperatorMerchantRequest:
    properties:
      reason:
        maxLength: 500
        minLength: 5
        type: string
    required:
    - reason
    type: object
  api.resumeOperatorRiderRequest:
    properties:
      reason:
        maxLength: 500
        minLength: 5
        type: string
    required:
    - reason
    type: object
  api.reverseGeocodeAPIResponse:
    properties:
      code:
        example: 0
        type: integer
      data:
        $ref: '#/definitions/api.reverseGeocodeResponse'
      message:
        example: ok
        type: string
    type: object
  api.reverseGeocodeResponse:
    properties:
      address:
        type: string
      city:
        type: string
      district:
        type: string
      formatted_address:
        type: string
      province:
        type: string
      street:
        type: string
      street_number:
        type: string
    type: object
  api.reviewAppealRequest:
    properties:
      compensation_amount:
        description: 申诉成功时的补偿金额（分），最大10万元
        maximum: 10000000
        minimum: 1
        type: integer
      review_notes:
        maxLength: 500
        minLength: 5
        type: string
      status:
        enum:
        - approved
        - rejected
        type: string
    required:
    - review_notes
    - status
    type: object
  api.reviewMerchantApplicationRequest:
    properties:
      application_id:
        minimum: 1
        type: integer
      approve:
        type: boolean
      reject_reason:
        maxLength: 500
        type: string
    required:
    - application_id
    - approve
    type: object
  api.reviewResponse:
    properties:
      content:
        type: string
      created_at:
        type: string
      id:
        type: integer
      images:
        items:
          type: string
        type: array
      is_visible:
        type: boolean
      merchant_id:
        type: integer
      merchant_reply:
        type: string
      order_id:
        type: integer
      replied_at:
        type: string
      user_id:
        type: integer
    type: object
  api.riderApplicationResponse:
    properties:
      created_at:
        type: string
      health_cert_ocr:
        $ref: '#/definitions/api.HealthCertOCRData'
      health_cert_url:
        type: string
      id:
        type: integer
      id_card_back_url:
        type: string
      id_card_front_url:
        type: string
      id_card_ocr:
        $ref: '#/definitions/api.IDCardOCRData'
      phone:
        type: string
      real_name:
        type: string
      reject_reason:
        type: string
      status:
        type: string
      submitted_at:
        type: string
      updated_at:
        type: string
      user_id:
        type: integer
    type: object
  api.riderApplymentStatusResponse:
    properties:
      applyment_id:
        description: 微信进件ID
        type: integer
      created_at:
        type: string
      reject_reason:
        description: 拒绝原因
        type: string
      status:
        description: 状态
        type: string
      status_desc:
        description: 状态描述
        type: string
      sub_mch_id:
        description: 二级商户号（开户成功后返回）
        type: string
      updated_at:
        type: string
    type: object
  api.riderBindBankRequest:
    properties:
      account_bank:
        description: 开户银行
        type: string
      account_name:
        description: 账户名称
        type: string
      account_number:
        description: 银行账号
        type: string
      account_type:
        description: 银行账户信息 - 骑手都是个人，使用对私账户
        enum:
        - ACCOUNT_TYPE_PRIVATE
        type: string
      bank_address_code:
        description: 开户银行省市编码
        type: string
      bank_name:
        description: 开户银行全称
        type: string
      contact_phone:
        description: 联系手机号
        type: string
    required:
    - account_bank
    - account_name
    - account_number
    - account_type
    - bank_address_code
    - contact_phone
    type: object
  api.riderBindBankResponse:
    properties:
      applyment_id:
        type: integer
      message:
        type: string
      status:
        type: string
    type: object
  api.riderDetailResponse:
    properties:
      created_at:
        type: string
      credit_score:
        type: integer
      current_latitude:
        type: number
      current_longitude:
        type: number
      deposit_amount:
        type: integer
      frozen_deposit:
        type: integer
      high_value_qualified:
        type: boolean
      id:
        type: integer
      id_card_no:
        type: string
      is_online:
        type: boolean
      location_updated_at:
        type: string
      phone:
        type: string
      real_name:
        type: string
      region_id:
        type: integer
      status:
        type: string
      total_earnings:
        type: integer
      total_orders:
        type: integer
      updated_at:
        type: string
      user_id:
        type: integer
    type: object
  api.riderListItem:
    properties:
      created_at:
        type: string
      deposit_amount:
        type: integer
      id:
        type: integer
      is_online:
        type: boolean
      phone:
        type: string
      real_name:
        type: string
      region_id:
        type: integer
      status:
        type: string
      total_earnings:
        type: integer
      total_orders:
        type: integer
      user_id:
        type: integer
    type: object
  api.riderPremiumScoreResponse:
    properties:
      can_accept_premium_order:
        description: 是否可以接高值单（积分≥0）
        type: boolean
      premium_score:
        description: 高值单资格积分（可为负）
        type: integer
      real_name:
        description: 真实姓名
        type: string
      rider_id:
        description: 骑手ID
        type: integer
    type: object
  api.riderRankingRow:
    properties:
      avg_delivery_time_seconds:
        description: 平均配送时长(秒)
        type: integer
      completed_count:
        description: 完成次数
        type: integer
      delivery_count:
        description: 配送次数
        type: integer
      rider_id:
        description: 骑手ID
        type: integer
      rider_name:
        description: 骑手姓名
        type: string
      total_earnings:
        description: 总收入(分)
        type: integer
    type: object
  api.riderResponse:
    properties:
      created_at:
        type: string
      credit_score:
        type: integer
      current_latitude:
        type: number
      current_longitude:
        type: number
      deposit_amount:
        type: integer
      frozen_deposit:
        type: integer
      id:
        type: integer
      is_online:
        type: boolean
      location_updated_at:
        type: string
      online_duration:
        type: integer
      phone:
        type: string
      real_name:
        type: string
      status:
        type: string
      total_earnings:
        type: integer
      total_orders:
        type: integer
      user_id:
        type: integer
    type: object
  api.riderStatusResponse:
    properties:
      active_deliveries:
        description: 当前配送中订单数量
        type: integer
      can_go_offline:
        description: 是否可以下线
        type: boolean
      can_go_online:
        description: 是否可以上线
        type: boolean
      current_latitude:
        type: number
      current_longitude:
        type: number
      is_online:
        description: 是否在线
        type: boolean
      location_updated_at:
        type: string
      online_block_reason:
        description: 不能上线的原因
        type: string
      online_status:
        description: 在线状态描述：offline/online/delivering
        type: string
      status:
        description: 账号状态：pending/approved/active/suspended/rejected
        type: string
    type: object
  api.roomAvailabilityResponse:
    properties:
      date:
        type: string
      room_id:
        type: integer
      room_no:
        type: string
      time_slots:
        items:
          $ref: '#/definitions/api.timeSlot'
        type: array
    type: object
  api.roomDetailResponse:
    properties:
      capacity:
        type: integer
      description:
        type: string
      id:
        type: integer
      images:
        items:
          type: string
        type: array
      merchant_address:
        type: string
      merchant_id:
        type: integer
      merchant_latitude:
        type: number
      merchant_logo:
        type: string
      merchant_longitude:
        type: number
      merchant_name:
        description: 商户信息
        type: string
      merchant_phone:
        type: string
      minimum_spend:
        type: integer
      monthly_reservations:
        type: integer
      primary_image:
        type: string
      room_no:
        type: string
      status:
        type: string
      tags:
        items:
          $ref: '#/definitions/api.tableTagInfo'
        type: array
    type: object
  api.roomListItemResponse:
    properties:
      capacity:
        type: integer
      description:
        type: string
      id:
        type: integer
      merchant_id:
        type: integer
      minimum_spend:
        type: integer
      monthly_reservations:
        type: integer
      primary_image:
        type: string
      room_no:
        type: string
      status:
        type: string
    type: object
  api.scanTableCategoryInfo:
    properties:
      dishes:
        items:
          $ref: '#/definitions/api.scanTableDishInfo'
        type: array
      id:
        type: integer
      name:
        type: string
      sort_order:
        type: integer
    type: object
  api.scanTableComboInfo:
    properties:
      description:
        type: string
      id:
        type: integer
      image_url:
        type: string
      is_available:
        type: boolean
      name:
        type: string
      original_price:
        type: integer
      price:
        type: integer
    type: object
  api.scanTableDishInfo:
    properties:
      category_id:
        type: integer
      category_name:
        type: string
      description:
        type: string
      id:
        type: integer
      image_url:
        type: string
      is_available:
        type: boolean
      member_price:
        type: integer
      name:
        type: string
      price:
        type: integer
      sort_order:
        type: integer
    type: object
  api.scanTableMerchantInfo:
    properties:
      address:
        type: string
      description:
        type: string
      id:
        type: integer
      logo_url:
        type: string
      name:
        type: string
      phone:
        type: string
      status:
        type: string
    type: object
  api.scanTablePromotionInfo:
    properties:
      description:
        type: string
      min_amount:
        type: integer
      return_value:
        description: 满返金额 或 满减金额
        type: integer
      type:
        description: delivery_return / discount
        type: string
    type: object
  api.scanTableResponse:
    properties:
      categories:
        items:
          $ref: '#/definitions/api.scanTableCategoryInfo'
        type: array
      combos:
        items:
          $ref: '#/definitions/api.scanTableComboInfo'
        type: array
      merchant:
        $ref: '#/definitions/api.scanTableMerchantInfo'
      promotions:
        items:
          $ref: '#/definitions/api.scanTablePromotionInfo'
        type: array
      table:
        $ref: '#/definitions/api.scanTableTableInfo'
    type: object
  api.scanTableTableInfo:
    properties:
      capacity:
        type: integer
      description:
        type: string
      id:
        type: integer
      minimum_spend:
        type: integer
      status:
        type: string
      table_no:
        type: string
      table_type:
        type: string
    type: object
  api.setBusinessHoursRequest:
    properties:
      hours:
        description: 一周的营业时间
        items:
          $ref: '#/definitions/api.businessHourItem'
        maxItems: 7
        minItems: 1
        type: array
    required:
    - hours
    type: object
  api.setDishCustomizationsRequest:
    properties:
      groups:
        description: 定制分组列表，最多20个分组
        items:
          $ref: '#/definitions/api.customizationGroupInput'
        maxItems: 20
        type: array
    type: object
  api.signUploadURLRequest:
    properties:
      path:
        maxLength: 2048
        minLength: 1
        type: string
    required:
    - path
    type: object
  api.signUploadURLResponse:
    properties:
      expires:
        type: integer
      url:
        type: string
    type: object
  api.suspendOperatorMerchantRequest:
    properties:
      duration_hours:
        maximum: 720
        minimum: 1
        type: integer
      reason:
        maxLength: 500
        minLength: 5
        type: string
    required:
    - duration_hours
    - reason
    type: object
  api.suspendOperatorRiderRequest:
    properties:
      duration_hours:
        maximum: 720
        minimum: 1
        type: integer
      reason:
        maxLength: 500
        minLength: 5
        type: string
    required:
    - duration_hours
    - reason
    type: object
  api.tableImageResponse:
    properties:
      id:
        type: integer
      image_url:
        type: string
      is_primary:
        type: boolean
      sort_order:
        type: integer
      table_id:
        type: integer
    type: object
  api.tableResponse:
    properties:
      capacity:
        type: integer
      created_at:
        type: string
      current_reservation_id:
        type: integer
      description:
        type: string
      id:
        type: integer
      merchant_id:
        type: integer
      minimum_spend:
        type: integer
      qr_code_url:
        type: string
      status:
        type: string
      table_no:
        type: string
      table_type:
        type: string
      tags:
        items:
          $ref: '#/definitions/api.tagInfo'
        type: array
      updated_at:
        type: string
    type: object
  api.tableTagInfo:
    properties:
      id:
        type: integer
      name:
        type: string
      type:
        type: string
    type: object
  api.tagInfo:
    properties:
      id:
        type: integer
      name:
        type: string
    type: object
  api.tagResponse:
    properties:
      id:
        type: integer
      name:
        type: string
    type: object
  api.tencentDirectionAPIResponse:
    properties:
      code:
        example: 0
        type: integer
      data: {}
      message:
        example: ok
        type: string
    type: object
  api.timeSlot:
    properties:
      available:
        description: 是否可预约
        type: boolean
      time:
        description: 时间如 "11:00", "11:30"
        type: string
    type: object
  api.toggleComboOnlineBodyRequest:
    properties:
      is_online:
        description: true=上架, false=下架
        type: boolean
    required:
    - is_online
    type: object
  api.topSellingDishRow:
    properties:
      dish_id:
        type: integer
      dish_name:
        type: string
      dish_price:
        type: integer
      total_revenue:
        type: integer
      total_sold:
        type: integer
    type: object
  api.trackBehaviorRequest:
    properties:
      behavior_type:
        enum:
        - view
        - detail
        - cart
        - purchase
        type: string
      combo_id:
        minimum: 1
        type: integer
      dish_id:
        minimum: 1
        type: integer
      duration:
        description: 停留时长（秒），最大24小时
        maximum: 86400
        minimum: 0
        type: integer
      merchant_id:
        minimum: 1
        type: integer
    required:
    - behavior_type
    type: object
  api.transactionResponse:
    properties:
      amount:
        type: integer
      balance_after:
        type: integer
      created_at:
        type: string
      id:
        type: integer
      membership_id:
        type: integer
      notes:
        type: string
      related_order_id:
        type: integer
      type:
        type: string
    type: object
  api.unreadCountResponse:
    properties:
      count:
        type: integer
    type: object
  api.updateCartItemRequest:
    properties:
      customizations:
        additionalProperties: true
        description: 定制选项 (选填)
        type: object
      quantity:
        description: 数量 (选填，范围：1-99)
        maximum: 99
        minimum: 1
        type: integer
    type: object
  api.updateComboSetRequest:
    properties:
      combo_price:
        description: 套餐价格（分）
        maximum: 100000000
        type: integer
      description:
        description: 描述，最大500字符
        maxLength: 500
        type: string
      is_online:
        description: 是否上架
        type: boolean
      name:
        description: 套餐名称，最大100字符
        maxLength: 100
        minLength: 1
        type: string
    type: object
  api.updateDailyInventoryRequest:
    properties:
      date:
        type: string
      dish_id:
        minimum: 1
        type: integer
      sold_quantity:
        minimum: 0
        type: integer
      total_quantity:
        minimum: -1
        type: integer
    required:
    - date
    - dish_id
    type: object
  api.updateDeliveryFeeConfigRequest:
    properties:
      base_distance:
        type: integer
      base_fee:
        type: integer
      extra_fee_per_km:
        type: integer
      is_active:
        type: boolean
      max_fee:
        type: integer
      min_fee:
        type: integer
      value_ratio:
        type: number
    type: object
  api.updateDishCategoryRequest:
    properties:
      name:
        maxLength: 30
        minLength: 1
        type: string
      sort_order:
        maximum: 999
        minimum: 0
        type: integer
    type: object
  api.updateDishRequest:
    properties:
      category_id:
        minimum: 1
        type: integer
      description:
        description: 描述，最大1000字符
        maxLength: 1000
        type: string
      image_url:
        description: 图片URL，最大500字符
        maxLength: 500
        type: string
      is_available:
        type: boolean
      is_online:
        type: boolean
      member_price:
        maximum: 100000000
        minimum: 0
        type: integer
      name:
        description: 菜品名称，最大100字符
        maxLength: 100
        minLength: 1
        type: string
      prepare_time:
        description: 预估制作时间（分钟），1-120分钟
        maximum: 120
        minimum: 1
        type: integer
      price:
        description: 价格（分），最大100万元
        maximum: 100000000
        minimum: 1
        type: integer
      sort_order:
        minimum: 0
        type: integer
    type: object
  api.updateDishStatusRequest:
    properties:
      is_online:
        description: true=上架, false=下架
        type: boolean
    required:
    - is_online
    type: object
  api.updateDisplayConfigRequest:
    properties:
      enable_kds:
        type: boolean
      enable_print:
        type: boolean
      enable_voice:
        type: boolean
      kds_url:
        maxLength: 500
        type: string
      print_dine_in:
        type: boolean
      print_reservation:
        type: boolean
      print_takeout:
        type: boolean
      voice_dine_in:
        type: boolean
      voice_takeout:
        type: boolean
    type: object
  api.updateLocationRequest:
    properties:
      locations:
        items:
          $ref: '#/definitions/api.locationPoint'
        maxItems: 100
        minItems: 1
        type: array
    required:
    - locations
    type: object
  api.updateMembershipSettingsRequest:
    properties:
      allow_with_discount:
        type: boolean
      allow_with_voucher:
        type: boolean
      balance_usable_scenes:
        items:
          type: string
        type: array
      bonus_usable_scenes:
        items:
          type: string
        type: array
      max_deduction_percent:
        maximum: 100
        minimum: 1
        type: integer
    type: object
  api.updateMerchantBasicInfoRequest:
    properties:
      business_address:
        maxLength: 200
        minLength: 5
        type: string
      contact_phone:
        type: string
      latitude:
        type: string
      longitude:
        type: string
      merchant_name:
        maxLength: 50
        minLength: 2
        type: string
      region_id:
        minimum: 1
        type: integer
    type: object
  api.updateMerchantImagesRequest:
    properties:
      environment_images:
        description: 环境照URL数组，最多5张
        items:
          type: string
        type: array
      storefront_images:
        description: 门头照URL数组，最多3张
        items:
          type: string
        type: array
    type: object
  api.updateMerchantRequest:
    properties:
      address:
        maxLength: 200
        minLength: 5
        type: string
      description:
        maxLength: 500
        type: string
      latitude:
        type: string
      logo_url:
        maxLength: 500
        type: string
      longitude:
        type: string
      name:
        maxLength: 50
        minLength: 2
        type: string
      phone:
        maxLength: 11
        minLength: 11
        type: string
      version:
        description: '✅ P1-2: 乐观锁版本号'
        type: integer
    required:
    - version
    type: object
  api.updateMerchantStatusRequest:
    properties:
      auto_close_at:
        description: 可选，自动打烊时间 (RFC3339格式)
        maxLength: 50
        type: string
      is_open:
        description: true=开店营业, false=打烊
        type: boolean
    required:
    - is_open
    type: object
  api.updateNotificationPreferencesRequest:
    properties:
      do_not_disturb_end:
        description: HH:MM:SS
        type: string
      do_not_disturb_start:
        description: HH:MM:SS
        type: string
      enable_delivery_notifications:
        type: boolean
      enable_order_notifications:
        type: boolean
      enable_payment_notifications:
        type: boolean
      enable_system_notifications:
        type: boolean
    type: object
  api.updateOperatorApplicationBasicRequest:
    properties:
      contact_name:
        maxLength: 20
        minLength: 2
        type: string
      contact_phone:
        type: string
      name:
        maxLength: 50
        minLength: 2
        type: string
      requested_contract_years:
        maximum: 10
        minimum: 1
        type: integer
    type: object
  api.updateOperatorApplicationRegionRequest:
    properties:
      region_id:
        type: integer
    required:
    - region_id
    type: object
  api.updatePrinterRequest:
    properties:
      is_active:
        type: boolean
      print_dine_in:
        type: boolean
      print_reservation:
        type: boolean
      print_takeout:
        type: boolean
      printer_key:
        maxLength: 100
        type: string
      printer_name:
        maxLength: 100
        type: string
    type: object
  api.updateRechargeRuleRequest:
    properties:
      bonus_amount:
        maximum: 100000000
        minimum: 0
        type: integer
      is_active:
        type: boolean
      recharge_amount:
        maximum: 100000000
        minimum: 1
        type: integer
      valid_from:
        type: string
      valid_until:
        type: string
    type: object
  api.updateRecommendationConfigRequest:
    properties:
      auto_adjust:
        type: boolean
      exploitation_ratio:
        maximum: 1
        minimum: 0
        type: number
      exploration_ratio:
        maximum: 1
        minimum: 0
        type: number
      random_ratio:
        maximum: 1
        minimum: 0
        type: number
    type: object
  api.updateRiderApplicationBasicRequest:
    properties:
      phone:
        type: string
      real_name:
        maxLength: 50
        minLength: 2
        type: string
    type: object
  api.updateSingleInventoryRequest:
    properties:
      date:
        type: string
      sold_quantity:
        minimum: 0
        type: integer
      total_quantity:
        minimum: -1
        type: integer
    required:
    - date
    type: object
  api.updateTableRequest:
    properties:
      capacity:
        maximum: 100
        minimum: 1
        type: integer
      description:
        maxLength: 500
        type: string
      minimum_spend:
        maximum: 100000000
        minimum: 0
        type: integer
      qr_code_url:
        maxLength: 500
        type: string
      status:
        enum:
        - available
        - occupied
        - disabled
        type: string
      table_no:
        maxLength: 50
        type: string
    type: object
  api.updateTableStatusRequest:
    properties:
      current_reservation_id:
        minimum: 1
        type: integer
      status:
        enum:
        - available
        - occupied
        - disabled
        type: string
    required:
    - status
    type: object
  api.updateUserAddressRequest:
    properties:
      contact_name:
        example: 张三
        maxLength: 50
        minLength: 1
        type: string
      contact_phone:
        example: "13800138000"
        maxLength: 11
        minLength: 11
        type: string
      detail_address:
        example: 深圳市南山区科苑路15号
        maxLength: 200
        minLength: 1
        type: string
      latitude:
        example: "22.528499"
        type: string
      longitude:
        example: "113.946874"
        type: string
      region_id:
        example: 1
        minimum: 1
        type: integer
    type: object
  api.updateUserRequest:
    properties:
      avatar_url:
        maxLength: 2048
        minLength: 1
        type: string
      full_name:
        maxLength: 50
        minLength: 1
        type: string
    type: object
  api.updateVoucherRequest:
    properties:
      allowed_order_types:
        description: 允许的订单类型
        items:
          type: string
        type: array
      amount:
        maximum: 100000000
        minimum: 1
        type: integer
      description:
        maxLength: 500
        type: string
      is_active:
        type: boolean
      min_order_amount:
        maximum: 100000000
        minimum: 0
        type: integer
      name:
        maxLength: 100
        minLength: 1
        type: string
      total_quantity:
        maximum: 1000000
        minimum: 1
        type: integer
      valid_from:
        type: string
      valid_until:
        type: string
    type: object
  api.uploadImageResponse:
    properties:
      image_url:
        type: string
    type: object
  api.userAddressResponse:
    properties:
      contact_name:
        type: string
      contact_phone:
        type: string
      created_at:
        type: string
      detail_address:
        type: string
      id:
        type: integer
      is_default:
        type: boolean
      latitude:
        type: string
      longitude:
        type: string
      region_id:
        type: integer
      region_name:
        type: string
      user_id:
        type: integer
    type: object
  api.userCartsResponse:
    properties:
      carts:
        description: 各商户购物车列表
        items:
          $ref: '#/definitions/api.merchantCartResponse'
        type: array
      summary:
        allOf:
        - $ref: '#/definitions/api.cartSummaryResponse'
        description: 汇总统计
    type: object
  api.userResponse:
    properties:
      avatar_url:
        type: string
      created_at:
        type: string
      full_name:
        type: string
      id:
        type: integer
      phone:
        type: string
      roles:
        items:
          type: string
        type: array
      wechat_openid:
        type: string
    type: object
  api.userVoucherResponse:
    properties:
      amount:
        type: integer
      code:
        type: string
      expires_at:
        type: string
      id:
        type: integer
      merchant_id:
        type: integer
      merchant_name:
        type: string
      min_order_amount:
        type: integer
      name:
        type: string
      obtained_at:
        type: string
      order_id:
        type: integer
      status:
        type: string
      used_at:
        type: string
      user_id:
        type: integer
      voucher_id:
        type: integer
    type: object
  api.voucherResponse:
    properties:
      allowed_order_types:
        description: 允许的订单类型
        items:
          type: string
        type: array
      amount:
        type: integer
      claimed_quantity:
        type: integer
      code:
        type: string
      created_at:
        type: string
      description:
        type: string
      id:
        type: integer
      is_active:
        type: boolean
      merchant_id:
        type: integer
      min_order_amount:
        type: integer
      name:
        type: string
      total_quantity:
        type: integer
      used_quantity:
        type: integer
      valid_from:
        type: string
      valid_until:
        type: string
    type: object
  api.wechatLoginRequest:
    properties:
      code:
        maxLength: 256
        minLength: 1
        type: string
      device_id:
        maxLength: 128
        minLength: 1
        type: string
      device_type:
        enum:
        - ios
        - android
        - miniprogram
        - h5
        type: string
    required:
    - code
    - device_id
    - device_type
    type: object
  api.wechatLoginResponse:
    properties:
      access_token:
        type: string
      access_token_expires_at:
        type: string
      refresh_token:
        type: string
      refresh_token_expires_at:
        type: string
      session_id:
        type: integer
      user:
        $ref: '#/definitions/api.userResponse'
    type: object
  api.withdrawRequest:
    properties:
      amount:
        maximum: 5000000
        minimum: 100
        type: integer
      remark:
        maxLength: 200
        type: string
    required:
    - amount
    type: object
  db.GetOrderStatsRow:
    properties:
      cancelled_count:
        type: integer
      completed_count:
        type: integer
      delivering_count:
        type: integer
      paid_count:
        type: integer
      pending_count:
        type: integer
      preparing_count:
        type: integer
      ready_count:
        type: integer
    type: object
host: localhost:8080
info:
  contact:
    email: support@locallife.com
    name: API Support
  description: |-
    本地生活服务平台 API 文档，包含用户、商户、订单、配送、支付等完整业务功能。

    【图片URL约定】API 中的图片字段（如 image_url / avatar_url / logo_url）通常返回以 /uploads/ 开头的路径。
    - 公共展示素材（例如菜品/桌台/包间/评价图片、商户logo等）可直接通过 GET /uploads/... 访问。
    - 敏感材料（证照、身份证、健康证等）必须先调用 POST /v1/uploads/sign 获取短期签名URL，再用该URL下载。
  license:
    name: Apache 2.0
    url: http://www.apache.org/licenses/LICENSE-2.0.html
  termsOfService: http://swagger.io/terms/
  title: LocalLife API
  version: "1.0"
paths:
  /delivery-fee/calculate:
    post:
      consumes:
      - application/json
      description: Calculate delivery fee based on region, distance, and promotions
      parameters:
      - description: Calculation parameters
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.calculateDeliveryFeeRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/api.DeliveryFeeResult'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: Config not found
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Calculate delivery fee
      tags:
      - delivery-fee
  /delivery-fee/config/{region_id}:
    get:
      consumes:
      - application/json
      description: Get delivery fee configuration for a region
      parameters:
      - description: Region ID
        in: path
        name: region_id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/api.deliveryFeeConfigResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: Config not found
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get delivery fee config
      tags:
      - delivery-fee
  /delivery-fee/merchants/{id}/promotions:
    post:
      consumes:
      - application/json
      description: Create delivery fee promotion for merchant. Only the merchant owner
        can create promotions for their own merchant.
      parameters:
      - description: Merchant ID
        in: path
        name: id
        required: true
        type: integer
      - description: Promotion details
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.createDeliveryPromotionRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/api.deliveryPromotionResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: Merchant role required or not authorized for this merchant
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Create delivery promotion (Merchant)
      tags:
      - delivery-fee
  /delivery-fee/merchants/{merchant_id}/promotions:
    get:
      consumes:
      - application/json
      description: Get all delivery promotions for a merchant. Only the merchant owner
        can view their own promotions.
      parameters:
      - description: Merchant ID
        in: path
        name: merchant_id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/api.deliveryPromotionResponse'
            type: array
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: Merchant role required or not authorized for this merchant
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: List delivery promotions (Merchant)
      tags:
      - delivery-fee
  /delivery-fee/merchants/{merchant_id}/promotions/{id}:
    delete:
      consumes:
      - application/json
      description: Delete a delivery fee promotion. Only the merchant owner can delete
        their own promotions.
      parameters:
      - description: Merchant ID
        in: path
        name: merchant_id
        required: true
        type: integer
      - description: Promotion ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "204":
          description: No Content
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: Merchant role required or not authorized for this merchant
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: Promotion not found
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Delete delivery promotion (Merchant)
      tags:
      - delivery-fee
  /delivery-fee/regions/{region_id}/config:
    patch:
      consumes:
      - application/json
      description: Update delivery fee configuration for a region (operator only).
        Supports partial updates.
      parameters:
      - description: Region ID
        in: path
        name: region_id
        required: true
        type: integer
      - description: Update fields
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.updateDeliveryFeeConfigRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/api.deliveryFeeConfigResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: Operator role required or not authorized for this region
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: Config not found
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Update delivery fee config (Operator)
      tags:
      - delivery-fee
    post:
      consumes:
      - application/json
      description: Create delivery fee configuration for a region (operator only).
        Each region can only have one active configuration.
      parameters:
      - description: Region ID
        in: path
        name: region_id
        required: true
        type: integer
      - description: Fee config details
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.createDeliveryFeeConfigRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/api.deliveryFeeConfigResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: Operator role required or not authorized for this region
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "409":
          description: Config already exists for this region
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Create delivery fee config (Operator)
      tags:
      - delivery-fee
  /operator/peak-hours/{id}:
    delete:
      consumes:
      - application/json
      description: Delete a peak hour configuration (operator only). Verifies operator
        has permission for the region.
      parameters:
      - description: Peak hour config ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "204":
          description: No Content
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: Operator role required or not authorized for this region
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: Config not found
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Delete peak hour config (Operator)
      tags:
      - delivery-fee
  /operator/regions/{region_id}/peak-hours:
    get:
      consumes:
      - application/json
      description: Get all peak hour configurations for a region. Only operator can
        access.
      parameters:
      - description: Region ID
        in: path
        name: region_id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/api.peakHourConfigResponse'
            type: array
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: Operator role required
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: List peak hour configs (Operator)
      tags:
      - delivery-fee
    post:
      consumes:
      - application/json
      description: Create peak hour delivery fee configuration for a region (operator
        only). Time format is HH:MM.
      parameters:
      - description: Region ID
        in: path
        name: region_id
        required: true
        type: integer
      - description: Peak hour config details
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.createPeakHourConfigRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/api.peakHourConfigResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: Operator role required or not authorized for this region
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Create peak hour config (Operator)
      tags:
      - delivery-fee
  /platform/stats/categories:
    get:
      consumes:
      - application/json
      description: 获取各商户分类的销售统计数据
      parameters:
      - description: '开始日期 (格式: 2025-01-01)'
        in: query
        name: start_date
        required: true
        type: string
      - description: '结束日期 (格式: 2025-01-31)'
        in: query
        name: end_date
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 分类统计数据列表
          schema:
            items:
              $ref: '#/definitions/api.categoryStatRow'
            type: array
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/api.errorRes'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.errorRes'
        "403":
          description: 权限不足
          schema:
            $ref: '#/definitions/api.errorRes'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.errorRes'
      security:
      - BearerAuth: []
      summary: 获取分类销售统计
      tags:
      - Platform
  /platform/stats/daily:
    get:
      consumes:
      - application/json
      description: 获取指定时间范围内每日的平台统计数据，包括订单数、GMV、佣金及订单类型分布
      parameters:
      - description: '开始日期 (格式: 2025-01-01)'
        in: query
        name: start_date
        required: true
        type: string
      - description: '结束日期 (格式: 2025-01-31)'
        in: query
        name: end_date
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 每日统计数据列表
          schema:
            items:
              $ref: '#/definitions/api.platformDailyStatRow'
            type: array
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/api.errorRes'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.errorRes'
        "403":
          description: 权限不足
          schema:
            $ref: '#/definitions/api.errorRes'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.errorRes'
      security:
      - BearerAuth: []
      summary: 获取平台日趋势统计
      tags:
      - Platform
  /platform/stats/growth/merchants:
    get:
      consumes:
      - application/json
      description: 获取每日新增审核通过的商户数量统计
      parameters:
      - description: '开始日期 (格式: 2025-01-01)'
        in: query
        name: start_date
        required: true
        type: string
      - description: '结束日期 (格式: 2025-01-31)'
        in: query
        name: end_date
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 商户增长数据列表
          schema:
            items:
              $ref: '#/definitions/api.growthStatRow'
            type: array
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/api.errorRes'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.errorRes'
        "403":
          description: 权限不足
          schema:
            $ref: '#/definitions/api.errorRes'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.errorRes'
      security:
      - BearerAuth: []
      summary: 获取商户增长统计
      tags:
      - Platform
  /platform/stats/growth/users:
    get:
      consumes:
      - application/json
      description: 获取每日新注册用户数量统计
      parameters:
      - description: '开始日期 (格式: 2025-01-01)'
        in: query
        name: start_date
        required: true
        type: string
      - description: '结束日期 (格式: 2025-01-31)'
        in: query
        name: end_date
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 用户增长数据列表
          schema:
            items:
              $ref: '#/definitions/api.growthStatRow'
            type: array
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/api.errorRes'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.errorRes'
        "403":
          description: 权限不足
          schema:
            $ref: '#/definitions/api.errorRes'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.errorRes'
      security:
      - BearerAuth: []
      summary: 获取用户增长统计
      tags:
      - Platform
  /platform/stats/hourly:
    get:
      consumes:
      - application/json
      description: 获取每小时的订单数量和GMV分布，用于分析订单高峰时段
      parameters:
      - description: '开始日期 (格式: 2025-01-01)'
        in: query
        name: start_date
        required: true
        type: string
      - description: '结束日期 (格式: 2025-01-31)'
        in: query
        name: end_date
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 时段分布数据列表
          schema:
            items:
              $ref: '#/definitions/api.hourlyDistributionRow'
            type: array
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/api.errorRes'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.errorRes'
        "403":
          description: 权限不足
          schema:
            $ref: '#/definitions/api.errorRes'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.errorRes'
      security:
      - BearerAuth: []
      summary: 获取订单时段分布
      tags:
      - Platform
  /platform/stats/merchants/ranking:
    get:
      consumes:
      - application/json
      description: 获取商户按销售额排序的排行榜，支持分页
      parameters:
      - description: '开始日期 (格式: 2025-01-01)'
        in: query
        name: start_date
        required: true
        type: string
      - description: '结束日期 (格式: 2025-01-31)'
        in: query
        name: end_date
        required: true
        type: string
      - description: '页码 (默认: 1)'
        in: query
        minimum: 1
        name: page
        type: integer
      - description: '每页数量 (默认: 20, 最大: 100)'
        in: query
        maximum: 100
        minimum: 1
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 商户排行列表
          schema:
            items:
              $ref: '#/definitions/api.merchantRankingRow'
            type: array
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/api.errorRes'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.errorRes'
        "403":
          description: 权限不足
          schema:
            $ref: '#/definitions/api.errorRes'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.errorRes'
      security:
      - BearerAuth: []
      summary: 获取商户销售排行榜
      tags:
      - Platform
  /platform/stats/overview:
    get:
      consumes:
      - application/json
      description: 获取指定时间范围内的平台全局统计数据，包括订单数、GMV、佣金、活跃商户和用户数
      parameters:
      - description: '开始日期 (格式: 2025-01-01)'
        in: query
        name: start_date
        required: true
        type: string
      - description: '结束日期 (格式: 2025-01-31)'
        in: query
        name: end_date
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 平台概览数据
          schema:
            $ref: '#/definitions/api.platformOverviewResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/api.errorRes'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.errorRes'
        "403":
          description: 权限不足
          schema:
            $ref: '#/definitions/api.errorRes'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.errorRes'
      security:
      - BearerAuth: []
      summary: 获取平台全局概览
      tags:
      - Platform
  /platform/stats/realtime:
    get:
      consumes:
      - application/json
      description: 获取最近24小时的实时统计数据，包括订单数、GMV及各状态订单分布
      produces:
      - application/json
      responses:
        "200":
          description: 实时大盘数据
          schema:
            $ref: '#/definitions/api.realtimeDashboardResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.errorRes'
        "403":
          description: 权限不足
          schema:
            $ref: '#/definitions/api.errorRes'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.errorRes'
      security:
      - BearerAuth: []
      summary: 获取实时大盘数据
      tags:
      - Platform
  /platform/stats/regions/compare:
    get:
      consumes:
      - application/json
      description: 获取各区域的销售数据对比，包括商户数、订单数、GMV、佣金等
      parameters:
      - description: '开始日期 (格式: 2025-01-01)'
        in: query
        name: start_date
        required: true
        type: string
      - description: '结束日期 (格式: 2025-01-31)'
        in: query
        name: end_date
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 区域对比数据列表
          schema:
            items:
              $ref: '#/definitions/api.regionComparisonRow'
            type: array
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/api.errorRes'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.errorRes'
        "403":
          description: 权限不足
          schema:
            $ref: '#/definitions/api.errorRes'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.errorRes'
      security:
      - BearerAuth: []
      summary: 获取区域对比分析
      tags:
      - Platform
  /platform/stats/riders/ranking:
    get:
      consumes:
      - application/json
      description: 获取骑手按完成配送数排序的绩效排行榜，支持分页
      parameters:
      - description: '开始日期 (格式: 2025-01-01)'
        in: query
        name: start_date
        required: true
        type: string
      - description: '结束日期 (格式: 2025-01-31)'
        in: query
        name: end_date
        required: true
        type: string
      - description: '页码 (默认: 1)'
        in: query
        minimum: 1
        name: page
        type: integer
      - description: '每页数量 (默认: 20, 最大: 100)'
        in: query
        maximum: 100
        minimum: 1
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 骑手绩效排行列表
          schema:
            items:
              $ref: '#/definitions/api.riderRankingRow'
            type: array
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/api.errorRes'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.errorRes'
        "403":
          description: 权限不足
          schema:
            $ref: '#/definitions/api.errorRes'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.errorRes'
      security:
      - BearerAuth: []
      summary: 获取骑手绩效排行榜
      tags:
      - Platform
  /rider/orders/{id}/delay:
    post:
      consumes:
      - application/json
      description: 骑手申报订单配送将延迟，通知顾客和商户
      parameters:
      - description: 订单ID
        in: path
        name: id
        required: true
        type: integer
      - description: 延时申报信息
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.delayReportRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/api.delayReportResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 非该订单骑手
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 订单不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 骑手延时申报
      tags:
      - riders
  /rider/orders/{id}/exception:
    post:
      consumes:
      - application/json
      description: 骑手上报配送过程中遇到的异常情况
      parameters:
      - description: 订单ID
        in: path
        name: id
        required: true
        type: integer
      - description: 异常上报信息
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.exceptionReportRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/api.exceptionReportResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 非该订单骑手
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 订单不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 骑手异常上报
      tags:
      - riders
  /uploads/sign:
    post:
      consumes:
      - application/json
      description: |-
        用于访问 uploads 下的敏感图片（证照/身份证/健康证等）。

        说明：
        - 公共展示素材通常可直接访问 /uploads/...（无需签名）。
        - 私有/敏感图片必须先调用本接口获取短期签名URL，再使用该URL下载。
      parameters:
      - description: 签名请求（path 为 uploads 相对路径，如 uploads/merchants/1/licenses/xxx.jpg
          或 merchants/1/licenses/xxx.jpg）
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.signUploadURLRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 签名URL与过期时间（Unix秒）
          schema:
            $ref: '#/definitions/api.signUploadURLResponse'
      security:
      - BearerAuth: []
      summary: 生成上传文件的签名下载URL
  /v1/addresses:
    get:
      consumes:
      - application/json
      description: 获取当前用户的所有地址
      produces:
      - application/json
      responses:
        "200":
          description: 地址列表
          schema:
            items:
              $ref: '#/definitions/api.userAddressResponse'
            type: array
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取用户地址列表
      tags:
      - 用户地址
    post:
      consumes:
      - application/json
      description: 为当前用户创建新的收货地址。若未提供 region_id，后端将根据经纬度自动匹配。
      parameters:
      - description: 创建地址请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.createUserAddressRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 创建成功的地址
          schema:
            $ref: '#/definitions/api.userAddressResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 创建用户地址
      tags:
      - 用户地址
  /v1/addresses/{id}:
    delete:
      consumes:
      - application/json
      description: 删除指定地址
      parameters:
      - description: 地址ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "204":
          description: 删除成功
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 禁止访问
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 地址不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 删除用户地址
      tags:
      - 用户地址
    get:
      consumes:
      - application/json
      description: 根据ID获取指定地址
      parameters:
      - description: 地址ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 地址信息
          schema:
            $ref: '#/definitions/api.userAddressResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 禁止访问
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 地址不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取用户地址
      tags:
      - 用户地址
    patch:
      consumes:
      - application/json
      description: 更新指定地址的信息。若更新了经纬度但未提供 region_id，后端将自动重新匹配。
      parameters:
      - description: 地址ID
        in: path
        name: id
        required: true
        type: integer
      - description: 更新地址请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.updateUserAddressRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 更新后的地址
          schema:
            $ref: '#/definitions/api.userAddressResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 禁止访问
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 地址不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 更新用户地址
      tags:
      - 用户地址
  /v1/addresses/{id}/default:
    patch:
      consumes:
      - application/json
      description: 将指定地址设为默认收货地址
      parameters:
      - description: 地址ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 设置后的默认地址
          schema:
            $ref: '#/definitions/api.userAddressResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 禁止访问
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 地址不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 设置默认地址
      tags:
      - 用户地址
  /v1/admin/merchants/applications:
    get:
      consumes:
      - application/json
      description: 分页获取商户入驻申请列表，仅管理员可用
      parameters:
      - description: 按状态筛选
        enum:
        - pending
        - approved
        - rejected
        in: query
        name: status
        type: string
      - description: 页码
        in: query
        minimum: 1
        name: page_id
        required: true
        type: integer
      - description: 每页数量
        in: query
        maximum: 50
        minimum: 5
        name: page_size
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 申请列表
          schema:
            items:
              $ref: '#/definitions/api.merchantApplicationResponse'
            type: array
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 无管理员权限
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取商户入驻申请列表（管理员）
      tags:
      - 商户管理
  /v1/admin/merchants/applications/review:
    post:
      consumes:
      - application/json
      description: 通过或拒绝商户入驻申请，仅管理员可用
      parameters:
      - description: 审核决定
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.reviewMerchantApplicationRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 审核结果
          schema:
            $ref: '#/definitions/api.merchantApplicationResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 无管理员权限
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 申请不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 审核商户入驻申请（管理员）
      tags:
      - 商户管理
  /v1/admin/riders:
    get:
      consumes:
      - application/json
      description: 管理员或运营商分页获取骑手列表，支持状态筛选
      parameters:
      - description: 筛选状态
        enum:
        - pending
        - approved
        - active
        - suspended
        - rejected
        in: query
        name: status
        type: string
      - default: 1
        description: 页码
        in: query
        minimum: 1
        name: page
        type: integer
      - default: 20
        description: 每页数量
        in: query
        maximum: 100
        minimum: 1
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 骑手列表
          schema:
            items:
              $ref: '#/definitions/api.riderResponse'
            type: array
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未登录
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 无权限
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取骑手列表（管理员）
      tags:
      - 骑手管理
  /v1/admin/riders/{rider_id}/approve:
    post:
      consumes:
      - application/json
      description: 管理员审核通过骑手入驻申请，骑手状态从pending变为pending_bindbank，需要完成微信支付开户才能接单
      parameters:
      - description: 骑手ID
        in: path
        name: rider_id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 审核成功
          schema:
            $ref: '#/definitions/api.riderResponse'
        "400":
          description: 状态不允许审核
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未登录
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 无权限
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 骑手不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 审核通过骑手申请（管理员）
      tags:
      - 骑手管理
  /v1/admin/riders/{rider_id}/reject:
    post:
      consumes:
      - application/json
      description: 管理员拒绝骑手入驻申请，骑手状态从pending变为rejected
      parameters:
      - description: 骑手ID
        in: path
        name: rider_id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 拒绝成功
          schema:
            $ref: '#/definitions/api.riderResponse'
        "400":
          description: 状态不允许审核
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未登录
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 无权限
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 骑手不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 拒绝骑手申请（管理员）
      tags:
      - 骑手管理
  /v1/auth/refresh:
    post:
      consumes:
      - application/json
      description: 使用刷新令牌获取新的访问令牌
      parameters:
      - description: 刷新令牌请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.renewAccessTokenRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 新的访问令牌
          schema:
            $ref: '#/definitions/api.renewAccessTokenResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 令牌无效或已过期
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 会话不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      summary: 刷新访问令牌
      tags:
      - 认证
  /v1/auth/wechat-login:
    post:
      consumes:
      - application/json
      description: Authenticate user with WeChat code, create user if not exists
      parameters:
      - description: WeChat login request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.wechatLoginRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/api.wechatLoginResponse'
        "400":
          description: Invalid request parameters
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      summary: WeChat mini-program login
      tags:
      - auth
  /v1/behaviors/track:
    post:
      consumes:
      - application/json
      description: 记录用户浏览、详情、加购、购买等行为数据，用于个性化推荐
      parameters:
      - description: 行为数据
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.trackBehaviorRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 记录成功
          schema:
            additionalProperties: true
            type: object
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未认证
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 上报用户行为埋点
      tags:
      - 推荐引擎
  /v1/cart:
    get:
      consumes:
      - application/json
      description: 获取指定商户的购物车内容
      parameters:
      - description: 商户ID
        format: int64
        in: query
        name: merchant_id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 购物车内容
          schema:
            $ref: '#/definitions/api.cartResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取购物车
      tags:
      - 购物车
  /v1/cart/calculate:
    post:
      consumes:
      - application/json
      description: 计算购物车总金额，包括商品小计、配送费、优惠减免等。可选传入地址ID计算真实配送费，传入优惠券ID计算优惠减免
      parameters:
      - description: 计算请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.calculateCartRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 计算结果
          schema:
            $ref: '#/definitions/api.calculateCartResponse'
        "400":
          description: 请求参数错误/购物车为空
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 商户不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 计算购物车金额
      tags:
      - 购物车
  /v1/cart/clear:
    post:
      consumes:
      - application/json
      description: 清空指定商户购物车中的所有商品
      parameters:
      - description: 清空购物车请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.clearCartRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 清空后的购物车
          schema:
            $ref: '#/definitions/api.cartResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 清空购物车
      tags:
      - 购物车
  /v1/cart/combined-checkout/preview:
    post:
      consumes:
      - application/json
      description: 预览多商户合单结算金额，返回各商户子单和合计金额
      parameters:
      - description: 结算请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.combinedCheckoutRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 结算预览
          schema:
            $ref: '#/definitions/api.combinedCheckoutResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 预览合单结算
      tags:
      - 购物车
  /v1/cart/items:
    post:
      consumes:
      - application/json
      description: 添加菜品或套餐到购物车，dish_id和combo_id二选一
      parameters:
      - description: 商品信息
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.addCartItemRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 更新后的购物车
          schema:
            $ref: '#/definitions/api.cartResponse'
        "400":
          description: 请求参数错误/商品不可售
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 商户/商品不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 添加商品到购物车
      tags:
      - 购物车
  /v1/cart/items/{id}:
    delete:
      consumes:
      - application/json
      description: 从购物车中移除指定商品
      parameters:
      - description: 购物车商品ID
        format: int64
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 更新后的购物车
          schema:
            $ref: '#/definitions/api.cartResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 商品不属于当前用户的购物车
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 商品不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 删除购物车商品
      tags:
      - 购物车
    patch:
      consumes:
      - application/json
      description: 更新购物车商品的数量或定制选项
      parameters:
      - description: 购物车商品ID
        format: int64
        in: path
        name: id
        required: true
        type: integer
      - description: 更新内容
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.updateCartItemRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 更新后的购物车
          schema:
            $ref: '#/definitions/api.cartResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 商品不属于当前用户的购物车
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 商品不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 更新购物车商品
      tags:
      - 购物车
  /v1/cart/summary:
    get:
      consumes:
      - application/json
      description: 获取用户在所有商户的购物车汇总信息，用于显示购物车角标和合单结算入口
      produces:
      - application/json
      responses:
        "200":
          description: 购物车汇总
          schema:
            $ref: '#/definitions/api.userCartsResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取用户所有购物车汇总
      tags:
      - 购物车
  /v1/claims:
    get:
      consumes:
      - application/json
      description: 获取当前用户提交的所有索赔记录
      parameters:
      - default: 1
        description: 页码
        in: query
        minimum: 1
        name: page
        type: integer
      - default: 20
        description: 每页数量
        in: query
        maximum: 100
        minimum: 1
        name: page_size
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 索赔列表
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取我的索赔列表
      tags:
      - 索赔管理
  /v1/claims/{id}:
    get:
      consumes:
      - application/json
      description: 获取指定索赔的详细信息，只能查看自己提交的索赔
      parameters:
      - description: 索赔ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 索赔详情
          schema:
            $ref: '#/definitions/api.claimResponse'
        "400":
          description: 无效的索赔ID
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 该索赔不属于当前用户
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 索赔不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取索赔详情
      tags:
      - 索赔管理
  /v1/combos:
    get:
      description: 获取商户的套餐列表（分页）
      parameters:
      - description: 页码
        in: query
        minimum: 1
        name: page_id
        required: true
        type: integer
      - description: 每页数量
        in: query
        maximum: 50
        minimum: 5
        name: page_size
        required: true
        type: integer
      - description: 上架状态过滤
        in: query
        name: is_online
        type: boolean
      produces:
      - application/json
      responses:
        "200":
          description: 套餐列表
          schema:
            $ref: '#/definitions/api.listComboSetsResponse'
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未认证
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 非商户用户
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取套餐列表
      tags:
      - 套餐管理
    post:
      consumes:
      - application/json
      description: 创建套餐并可选关联菜品
      parameters:
      - description: 套餐信息
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.createComboSetRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 创建成功
          schema:
            $ref: '#/definitions/api.comboSetResponse'
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未认证
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 商户不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 创建套餐
      tags:
      - 套餐管理
  /v1/combos/{id}:
    delete:
      description: 删除套餐（级联删除关联关系）
      parameters:
      - description: 套餐ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 'message: combo set deleted'
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未认证
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 非套餐所有者
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 套餐不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 删除套餐
      tags:
      - 套餐管理
    get:
      description: 获取套餐详情（包含关联的菜品和标签），需要验证套餐归属权
      parameters:
      - description: 套餐ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 套餐详情
          schema:
            $ref: '#/definitions/api.comboSetWithDetailsResponse'
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 非套餐所有者
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 套餐或商户不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取套餐详情
      tags:
      - 套餐管理
    put:
      consumes:
      - application/json
      description: 更新套餐的基本信息
      parameters:
      - description: 套餐ID
        in: path
        name: id
        required: true
        type: integer
      - description: 更新内容
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.updateComboSetRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 更新成功
          schema:
            $ref: '#/definitions/api.comboSetResponse'
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未认证
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 非套餐所有者
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 套餐不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 更新套餐信息
      tags:
      - 套餐管理
  /v1/combos/{id}/dishes:
    post:
      consumes:
      - application/json
      description: 向套餐添加一个菜品
      parameters:
      - description: 套餐ID
        in: path
        name: id
        required: true
        type: integer
      - description: 菜品信息
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.addComboDishBodyRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 'message: dish added to combo set'
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未认证
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 非套餐所有者或菜品不属于该商户
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 套餐、商户或菜品不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 向套餐添加菜品
      tags:
      - 套餐管理
  /v1/combos/{id}/dishes/{dish_id}:
    delete:
      description: 从套餐移除一个菜品
      parameters:
      - description: 套餐ID
        in: path
        name: id
        required: true
        type: integer
      - description: 菜品ID
        in: path
        name: dish_id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 'message: dish removed from combo set'
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未认证
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 非套餐所有者
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 套餐或商户不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 从套餐移除菜品
      tags:
      - 套餐管理
  /v1/combos/{id}/online:
    put:
      consumes:
      - application/json
      description: 更新套餐的上架状态
      parameters:
      - description: 套餐ID
        in: path
        name: id
        required: true
        type: integer
      - description: 状态更新
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.toggleComboOnlineBodyRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 'message: combo set online status updated'
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未认证
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 非套餐所有者
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 套餐不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 上架/下架套餐
      tags:
      - 套餐管理
  /v1/delivery/:delivery_id/confirm-delivery:
    post:
      consumes:
      - application/json
      description: 骑手确认已将餐品送达给顾客，会自动解冻押金并结算配送费。只能在delivering状态下调用
      parameters:
      - description: 配送单ID
        in: path
        minimum: 1
        name: delivery_id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 送达成功
          schema:
            $ref: '#/definitions/api.deliveryResponse'
        "400":
          description: 参数校验失败或状态不允许
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 无权操作此配送单
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 配送单不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 确认送达
      tags:
      - 配送管理-骑手
  /v1/delivery/:delivery_id/confirm-pickup:
    post:
      consumes:
      - application/json
      description: 骑手确认已从商家取到餐品。只能在picking状态下调用
      parameters:
      - description: 配送单ID
        in: path
        minimum: 1
        name: delivery_id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 状态更新成功
          schema:
            $ref: '#/definitions/api.deliveryResponse'
        "400":
          description: 参数校验失败或状态不允许
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 无权操作此配送单
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 配送单不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 确认取餐
      tags:
      - 配送管理-骑手
  /v1/delivery/:delivery_id/rider-location:
    get:
      consumes:
      - application/json
      description: 获取配送骑手的最新位置，仅订单所有者或配送骑手可查看
      parameters:
      - description: 配送单ID
        in: path
        minimum: 1
        name: delivery_id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 骑手最新位置
          schema:
            $ref: '#/definitions/api.locationResponse'
        "400":
          description: 参数校验失败
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 无权查看此配送单位置
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 配送单不存在或无位置信息
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取骑手最新位置
      tags:
      - 配送管理-顾客
  /v1/delivery/:delivery_id/start-delivery:
    post:
      consumes:
      - application/json
      description: 骑手开始配送餐品给顾客。只能在picked状态下调用
      parameters:
      - description: 配送单ID
        in: path
        minimum: 1
        name: delivery_id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 状态更新成功
          schema:
            $ref: '#/definitions/api.deliveryResponse'
        "400":
          description: 参数校验失败或状态不允许
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 无权操作此配送单
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 配送单不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 开始配送
      tags:
      - 配送管理-骑手
  /v1/delivery/:delivery_id/start-pickup:
    post:
      consumes:
      - application/json
      description: 骑手开始前往商家取餐。只能在assigned状态下调用
      parameters:
      - description: 配送单ID
        in: path
        minimum: 1
        name: delivery_id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 状态更新成功
          schema:
            $ref: '#/definitions/api.deliveryResponse'
        "400":
          description: 参数校验失败或状态不允许
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 无权操作此配送单
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 配送单不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 开始取餐
      tags:
      - 配送管理-骑手
  /v1/delivery/:delivery_id/track:
    get:
      consumes:
      - application/json
      description: 获取骑手配送过程中的位置历史，仅订单所有者或配送骑手可查看
      parameters:
      - description: 配送单ID
        in: path
        minimum: 1
        name: delivery_id
        required: true
        type: integer
      - description: 获取指定时间之后的位置
        format: date-time
        in: query
        name: since
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 位置历史列表
          schema:
            items:
              $ref: '#/definitions/api.locationResponse'
            type: array
        "400":
          description: 参数校验失败
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 无权查看此配送单轨迹
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 配送单不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取配送轨迹
      tags:
      - 配送管理-顾客
  /v1/delivery/active:
    get:
      consumes:
      - application/json
      description: 获取骑手当前正在进行的配送单列表
      produces:
      - application/json
      responses:
        "200":
          description: 活跃配送单列表
          schema:
            items:
              $ref: '#/definitions/api.deliveryResponse'
            type: array
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 非骑手用户
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 查询当前活跃配送
      tags:
      - 配送管理-骑手
  /v1/delivery/grab/:order_id:
    post:
      consumes:
      - application/json
      description: 骑手抢单接单，会自动冻结押金并从订单池移除
      parameters:
      - description: 订单ID
        in: path
        minimum: 1
        name: order_id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 抢单成功，返回配送单详情
          schema:
            $ref: '#/definitions/api.deliveryResponse'
        "400":
          description: 参数校验失败或骑手未上线/押金不足/订单已过期
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 高值单资格不足或订单不在服务区域
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 非骑手用户或订单不存在/已被接走
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 抢单
      tags:
      - 配送管理-骑手
  /v1/delivery/history:
    get:
      consumes:
      - application/json
      description: 获取骑手的配送历史列表，支持状态过滤和分页
      parameters:
      - description: 状态过滤
        enum:
        - assigned
        - picking
        - picked
        - delivering
        - delivered
        - completed
        - cancelled
        in: query
        name: status
        type: string
      - default: 1
        description: 页码
        in: query
        minimum: 1
        name: page
        type: integer
      - default: 20
        description: 每页数量
        in: query
        maximum: 100
        minimum: 1
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 配送单列表
          schema:
            items:
              $ref: '#/definitions/api.deliveryResponse'
            type: array
        "400":
          description: 参数校验失败
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 非骑手用户
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 查询配送历史
      tags:
      - 配送管理-骑手
  /v1/delivery/order/:order_id:
    get:
      consumes:
      - application/json
      description: 获取指定订单的配送信息，仅订单所有者可查看
      parameters:
      - description: 订单ID
        in: path
        minimum: 1
        name: order_id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 配送单详情
          schema:
            $ref: '#/definitions/api.deliveryResponse'
        "400":
          description: 参数校验失败
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 无权查看此订单配送信息
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 配送单不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 根据订单查询配送信息
      tags:
      - 配送管理-顾客
  /v1/delivery/recommend:
    get:
      consumes:
      - application/json
      description: 根据骑手当前位置获取推荐的可接订单列表，按综合评分排序
      parameters:
      - description: 骑手当前经度
        in: query
        maximum: 180
        minimum: -180
        name: longitude
        required: true
        type: number
      - description: 骑手当前纬度
        in: query
        maximum: 90
        minimum: -90
        name: latitude
        required: true
        type: number
      produces:
      - application/json
      responses:
        "200":
          description: 推荐订单列表
          schema:
            items:
              $ref: '#/definitions/api.recommendedOrderResponse'
            type: array
        "400":
          description: 参数校验失败或骑手未上线
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 非骑手用户
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取推荐订单
      tags:
      - 配送管理-骑手
  /v1/dishes:
    get:
      consumes:
      - application/json
      description: 分页获取当前商户的菜品列表，支持筛选
      parameters:
      - description: 按分类筛选
        in: query
        name: category_id
        type: integer
      - description: 按上架状态筛选
        in: query
        name: is_online
        type: boolean
      - description: 按可用状态筛选
        in: query
        name: is_available
        type: boolean
      - description: 页码
        in: query
        minimum: 1
        name: page_id
        required: true
        type: integer
      - description: 每页数量
        in: query
        maximum: 50
        minimum: 5
        name: page_size
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 菜品列表
          schema:
            $ref: '#/definitions/api.listDishesResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 商户不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取商户菜品列表
      tags:
      - 菜品管理
    post:
      consumes:
      - application/json
      description: 为商户创建新菜品，可同时关联食材和标签（使用事务保证原子性）
      parameters:
      - description: 菜品详情
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.createDishRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 创建成功的菜品
          schema:
            $ref: '#/definitions/api.dishResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 商户不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 创建菜品
      tags:
      - 菜品管理
  /v1/dishes/{id}:
    delete:
      consumes:
      - application/json
      description: 软删除菜品（标记为删除）
      parameters:
      - description: 菜品ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 'message: dish deleted successfully'
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未认证
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 非菜品所有者
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 菜品不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 删除菜品
      tags:
      - 菜品管理
    get:
      consumes:
      - application/json
      description: 获取菜品详细信息，包括食材、标签和定制选项
      parameters:
      - description: 菜品ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/api.dishResponse'
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未认证
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 菜品或商户不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取菜品详情
      tags:
      - 菜品管理
    put:
      consumes:
      - application/json
      description: 更新菜品信息（部分更新）
      parameters:
      - description: 菜品ID
        in: path
        name: id
        required: true
        type: integer
      - description: 菜品更新详情
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.updateDishRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/api.dishResponse'
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未认证
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 非菜品所有者
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 菜品不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 更新菜品信息
      tags:
      - 菜品管理
  /v1/dishes/{id}/customizations:
    get:
      description: 获取菜品的所有定制分组和选项
      parameters:
      - description: 菜品ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/api.dishCustomizationsResponse'
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 菜品不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      summary: 获取菜品定制选项
      tags:
      - 菜品管理
    put:
      consumes:
      - application/json
      description: 设置/替换菜品的所有定制分组和选项（规格定制）
      parameters:
      - description: 菜品ID
        in: path
        name: id
        required: true
        type: integer
      - description: 定制分组
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.setDishCustomizationsRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/api.dishCustomizationsResponse'
        "400":
          description: 参数错误或标签不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未认证
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 非商户或菜品不属于该商户
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 菜品不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 设置菜品定制选项
      tags:
      - 菜品管理
  /v1/dishes/{id}/status:
    patch:
      consumes:
      - application/json
      description: 上架或下架菜品
      parameters:
      - description: 菜品ID
        in: path
        name: id
        required: true
        type: integer
      - description: 状态更新
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.updateDishStatusRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/api.dishStatusResponse'
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未认证
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 非商户
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 菜品不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 更新菜品上下架状态
      tags:
      - 菜品管理
  /v1/dishes/batch/status:
    patch:
      consumes:
      - application/json
      description: 批量上架或下架多个菜品
      parameters:
      - description: 批量状态更新
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.batchUpdateDishStatusRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/api.batchDishStatusResponse'
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未认证
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 非商户
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 批量更新菜品上下架状态
      tags:
      - 菜品管理
  /v1/dishes/categories:
    get:
      consumes:
      - application/json
      description: 获取当前商户的所有菜品分类
      produces:
      - application/json
      responses:
        "200":
          description: 分类列表
          schema:
            $ref: '#/definitions/api.listDishCategoriesResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 商户不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取菜品分类列表
      tags:
      - 菜品管理
    post:
      consumes:
      - application/json
      description: 为商户创建新的菜品分类
      parameters:
      - description: 分类详情
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.createDishCategoryRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 创建成功的分类
          schema:
            $ref: '#/definitions/api.dishCategoryResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 商户不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 创建菜品分类
      tags:
      - 菜品管理
  /v1/dishes/categories/{id}:
    delete:
      consumes:
      - application/json
      description: 删除当前商户的菜品分类
      parameters:
      - description: 分类ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 删除成功消息
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 无权操作此分类
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 分类不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 删除菜品分类
      tags:
      - 菜品管理
    patch:
      consumes:
      - application/json
      description: 更新当前商户的菜品分类
      parameters:
      - description: 分类ID
        in: path
        name: id
        required: true
        type: integer
      - description: 分类详情
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.updateDishCategoryRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 更新后的分类
          schema:
            $ref: '#/definitions/api.dishCategoryResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 无权操作此分类
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 分类不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 更新菜品分类
      tags:
      - 菜品管理
  /v1/dishes/images/upload:
    post:
      consumes:
      - multipart/form-data
      description: 上传菜品展示图片（上传前微信图片安全检测通过才会落盘）
      parameters:
      - description: 图片文件
        in: formData
        name: image
        required: true
        type: file
      produces:
      - application/json
      responses:
        "200":
          description: 上传成功
          schema:
            $ref: '#/definitions/api.uploadImageResponse'
        "400":
          description: 请求参数错误或内容安全检测未通过
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 非商户
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "502":
          description: 微信接口异常
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 上传菜品图片
      tags:
      - 菜品管理
  /v1/favorites/dishes:
    get:
      consumes:
      - application/json
      description: 获取用户收藏的菜品列表
      parameters:
      - default: 1
        description: 页码
        in: query
        minimum: 1
        name: page
        type: integer
      - default: 20
        description: 每页数量
        in: query
        maximum: 100
        minimum: 1
        name: page_size
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 收藏菜品列表
          schema:
            additionalProperties: true
            type: object
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未认证
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取收藏的菜品列表
      tags:
      - 收藏管理
    post:
      consumes:
      - application/json
      description: 将菜品添加到用户的收藏列表
      parameters:
      - description: 菜品ID
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.addFavoriteDishRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 收藏成功
          schema:
            additionalProperties: true
            type: object
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未认证
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 菜品不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 收藏菜品
      tags:
      - 收藏管理
  /v1/favorites/dishes/{id}:
    delete:
      consumes:
      - application/json
      description: 将菜品从用户的收藏列表中移除
      parameters:
      - description: 菜品ID
        format: int64
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 取消成功
          schema:
            additionalProperties: true
            type: object
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未认证
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 取消收藏菜品
      tags:
      - 收藏管理
  /v1/favorites/merchants:
    get:
      consumes:
      - application/json
      description: 获取用户收藏的商户列表
      parameters:
      - default: 1
        description: 页码
        in: query
        minimum: 1
        name: page
        type: integer
      - default: 20
        description: 每页数量
        in: query
        maximum: 100
        minimum: 1
        name: page_size
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 收藏商户列表
          schema:
            additionalProperties: true
            type: object
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未认证
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取收藏的商户列表
      tags:
      - 收藏管理
    post:
      consumes:
      - application/json
      description: 将商户添加到用户的收藏列表
      parameters:
      - description: 商户ID
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.addFavoriteMerchantRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 收藏成功
          schema:
            additionalProperties: true
            type: object
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未认证
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 商户不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 收藏商户
      tags:
      - 收藏管理
  /v1/favorites/merchants/{id}:
    delete:
      consumes:
      - application/json
      description: 将商户从用户的收藏列表中移除
      parameters:
      - description: 商户ID
        format: int64
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 取消成功
          schema:
            additionalProperties: true
            type: object
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未认证
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 取消收藏商户
      tags:
      - 收藏管理
  /v1/history/browse:
    get:
      consumes:
      - application/json
      description: 获取用户的浏览历史记录，可按类型筛选
      parameters:
      - description: 筛选类型
        enum:
        - merchant
        - dish
        in: query
        name: type
        type: string
      - default: 1
        description: 页码
        in: query
        name: page
        type: integer
      - default: 20
        description: 每页数量
        in: query
        maximum: 100
        minimum: 1
        name: page_size
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 浏览历史列表
          schema:
            $ref: '#/definitions/api.listBrowseHistoryResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取浏览历史
      tags:
      - 浏览历史
  /v1/inventory:
    get:
      description: 列出商户某日的所有菜品库存
      parameters:
      - description: 日期(YYYY-MM-DD)
        in: query
        name: date
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 库存列表
          schema:
            $ref: '#/definitions/api.listDailyInventoryResponse'
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未认证
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 商户不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 查询每日库存
      tags:
      - 库存管理
    post:
      consumes:
      - application/json
      description: 为指定菜品创建某日的库存记录，-1表示无限库存
      parameters:
      - description: 库存信息
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.createDailyInventoryRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 创建成功
          schema:
            $ref: '#/definitions/api.dailyInventoryResponse'
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未认证
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 商户不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 创建每日库存
      tags:
      - 库存管理
    put:
      consumes:
      - application/json
      description: 更新指定菜品某日的库存数量
      parameters:
      - description: 库存更新信息
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.updateDailyInventoryRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 更新成功
          schema:
            $ref: '#/definitions/api.dailyInventoryResponse'
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未认证
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 库存不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 更新库存
      tags:
      - 库存管理
  /v1/inventory/{dish_id}:
    patch:
      consumes:
      - application/json
      description: 通过菜品ID更新指定菜品的库存
      parameters:
      - description: 菜品ID
        in: path
        name: dish_id
        required: true
        type: integer
      - description: 库存更新信息
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.updateSingleInventoryRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 更新成功
          schema:
            $ref: '#/definitions/api.dailyInventoryResponse'
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未认证
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 库存不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 更新单品库存
      tags:
      - 库存管理
  /v1/inventory/check:
    post:
      consumes:
      - application/json
      description: 检查库存是否充足并原子扣减（用于下单）
      parameters:
      - description: 扣减请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.checkInventoryRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 检查结果
          schema:
            $ref: '#/definitions/api.checkInventoryResponse'
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未认证
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 商户不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 检查并扣减库存
      tags:
      - 库存管理
  /v1/inventory/stats:
    get:
      description: 获取商户某日的库存汇总数据
      parameters:
      - description: 日期(YYYY-MM-DD)
        in: query
        name: date
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 统计数据
          schema:
            $ref: '#/definitions/api.inventoryStatsResponse'
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未认证
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 商户不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取库存统计
      tags:
      - 库存管理
  /v1/kitchen/orders:
    get:
      description: 获取厨房显示系统(KDS)的订单列表，包含新订单、制作中、待取餐三种状态
      produces:
      - application/json
      responses:
        "200":
          description: 订单列表和统计信息
          schema:
            $ref: '#/definitions/api.kitchenOrdersResponse'
        "401":
          description: 未认证
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 非商户用户
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取厨房订单列表
      tags:
      - 厨房管理(KDS)
  /v1/kitchen/orders/{id}:
    get:
      description: 获取单个订单在厨房视图中的详细信息（商品、定制、备注等）
      parameters:
      - description: 订单ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 订单详情
          schema:
            $ref: '#/definitions/api.kitchenOrderResponse'
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未认证
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 非商户用户或订单不属于该商户
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 订单不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取厨房订单详情
      tags:
      - 厨房管理(KDS)
  /v1/kitchen/orders/{id}/preparing:
    post:
      description: 将订单标记为制作中状态（仅已支付订单可操作）
      parameters:
      - description: 订单ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 更新后的订单信息
          schema:
            $ref: '#/definitions/api.kitchenOrderResponse'
        "400":
          description: 参数错误或订单状态不允许
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未认证
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 非商户用户或订单不属于该商户
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 订单不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 开始制作订单
      tags:
      - 厨房管理(KDS)
  /v1/kitchen/orders/{id}/ready:
    post:
      description: 将订单标记为出餐完成/待取餐状态（仅制作中或已支付订单可操作）
      parameters:
      - description: 订单ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 更新后的订单信息
          schema:
            $ref: '#/definitions/api.kitchenOrderResponse'
        "400":
          description: 参数错误或订单状态不允许
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未认证
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 非商户用户或订单不属于该商户
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 订单不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 标记订单出餐完成
      tags:
      - 厨房管理(KDS)
  /v1/location/direction/bicycling:
    get:
      description: 后端请求腾讯 LBS /ws/direction/v1/bicycling 并原样返回 JSON（不暴露 key）。
      parameters:
      - description: '起点坐标，格式: lat,lng'
        example: '"39.908722,116.397499"'
        in: query
        name: from
        required: true
        type: string
      - description: '终点坐标，格式: lat,lng'
        example: '"39.914722,116.404499"'
        in: query
        name: to
        required: true
        type: string
      - description: 路线策略（腾讯 LBS policy 参数）
        example: 0
        in: query
        name: policy
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/api.tencentDirectionAPIResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      summary: 腾讯骑行路线（后端代理）
      tags:
      - 位置
  /v1/location/reverse-geocode:
    get:
      description: 使用腾讯 LBS 将经纬度解析为地址（服务端调用腾讯接口，不暴露 key）。
      parameters:
      - description: 纬度
        example: 39.908722
        in: query
        name: latitude
        required: true
        type: number
      - description: 经度
        example: 116.397499
        in: query
        name: longitude
        required: true
        type: number
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/api.reverseGeocodeAPIResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      summary: 逆地址解析
      tags:
      - 位置
  /v1/memberships:
    get:
      description: 获取当前用户的所有会员卡
      parameters:
      - description: 页码
        in: query
        minimum: 1
        name: page_id
        required: true
        type: integer
      - description: 每页数量
        in: query
        maximum: 50
        minimum: 5
        name: page_size
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 会员列表
          schema:
            items:
              $ref: '#/definitions/api.membershipResponse'
            type: array
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未认证
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取用户会员列表
      tags:
      - 会员管理
    post:
      consumes:
      - application/json
      description: 加入商户的会员计划
      parameters:
      - description: 商户ID
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.joinMembershipRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 加入成功
          schema:
            $ref: '#/definitions/api.membershipResponse'
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未认证
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 商户不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 加入会员
      tags:
      - 会员管理
  /v1/memberships/{id}:
    get:
      description: 获取会员卡的详细信息
      parameters:
      - description: 会员ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 会员详情
          schema:
            $ref: '#/definitions/api.membershipResponse'
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未认证
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 非会员所有者
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 会员不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取会员详情
      tags:
      - 会员管理
  /v1/memberships/{id}/transactions:
    get:
      description: 获取会员卡的交易历史记录（充值、消费等）
      parameters:
      - description: 会员ID
        in: path
        name: id
        required: true
        type: integer
      - description: 页码
        in: query
        minimum: 1
        name: page_id
        required: true
        type: integer
      - description: 每页数量
        in: query
        maximum: 50
        minimum: 5
        name: page_size
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 交易流水列表
          schema:
            items:
              $ref: '#/definitions/api.transactionResponse'
            type: array
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未认证
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 非会员卡所有者
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 会员卡不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取会员交易流水
      tags:
      - 会员管理
  /v1/memberships/recharge:
    post:
      consumes:
      - application/json
      description: 用户为会员卡充值，支持微信/支付宝支付，自动匹配赠送规则
      parameters:
      - description: 充值信息
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.rechargeRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 支付参数和交易信息
          schema:
            type: object
        "400":
          description: 参数错误或用户未绑定微信
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未认证
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 非会员卡所有者
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 会员卡不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 会员卡充值
      tags:
      - 会员管理
  /v1/merchant/appeals:
    get:
      consumes:
      - application/json
      description: 商户查看自己提交的申诉列表
      parameters:
      - description: 页码
        in: query
        minimum: 1
        name: page_id
        required: true
        type: integer
      - description: 每页数量
        in: query
        maximum: 50
        minimum: 1
        name: page_size
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 成功返回申诉列表
          schema:
            additionalProperties: true
            type: object
        "400":
          description: 参数错误
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 未授权
          schema:
            additionalProperties: true
            type: object
        "403":
          description: 非商户用户
          schema:
            additionalProperties: true
            type: object
        "500":
          description: 服务器错误
          schema:
            additionalProperties: true
            type: object
      security:
      - Bearer: []
      summary: 获取申诉列表
      tags:
      - 商户申诉管理
    post:
      consumes:
      - application/json
      description: 商户对已批准的索赔提交申诉，每个索赔只能申诉一次
      parameters:
      - description: 申诉请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.createMerchantAppealRequest'
      produces:
      - application/json
      responses:
        "201":
          description: 成功创建申诉
          schema:
            $ref: '#/definitions/api.appealResponse'
        "400":
          description: 参数错误
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 未授权
          schema:
            additionalProperties: true
            type: object
        "403":
          description: 非商户用户或索赔不属于该商户
          schema:
            additionalProperties: true
            type: object
        "404":
          description: 索赔不存在
          schema:
            additionalProperties: true
            type: object
        "409":
          description: 已存在申诉
          schema:
            additionalProperties: true
            type: object
        "500":
          description: 服务器错误
          schema:
            additionalProperties: true
            type: object
      security:
      - Bearer: []
      summary: 提交申诉
      tags:
      - 商户申诉管理
  /v1/merchant/appeals/{id}:
    get:
      consumes:
      - application/json
      description: 商户查看自己提交的申诉详细信息
      parameters:
      - description: 申诉ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 成功返回申诉详情
          schema:
            additionalProperties: true
            type: object
        "400":
          description: 参数错误
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 未授权
          schema:
            additionalProperties: true
            type: object
        "403":
          description: 非商户用户
          schema:
            additionalProperties: true
            type: object
        "404":
          description: 申诉不存在
          schema:
            additionalProperties: true
            type: object
        "500":
          description: 服务器错误
          schema:
            additionalProperties: true
            type: object
      security:
      - Bearer: []
      summary: 获取申诉详情
      tags:
      - 商户申诉管理
  /v1/merchant/application:
    get:
      consumes:
      - application/json
      description: 获取当前用户的商户入驻申请草稿，如果没有则创建一个空草稿。已通过的申请不会返回。
      produces:
      - application/json
      responses:
        "200":
          description: 获取成功
          schema:
            $ref: '#/definitions/api.merchantApplicationDraftResponse'
        "201":
          description: 创建成功
          schema:
            $ref: '#/definitions/api.merchantApplicationDraftResponse'
        "401":
          description: 未登录
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "409":
          description: 已有通过或待审核的申请
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取或创建商户入驻申请草稿
      tags:
      - 商户申请
  /v1/merchant/application/basic:
    put:
      consumes:
      - application/json
      description: 更新商户名称、联系电话、地址、经纬度等基础信息。若提供经纬度但未提供 region_id，后端将自动匹配最近区域。支持在 approved/rejected
        状态下直接编辑（会自动重置为 draft）。
      parameters:
      - description: 基础信息
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.updateMerchantBasicInfoRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 更新成功
          schema:
            $ref: '#/definitions/api.merchantApplicationDraftResponse'
        "400":
          description: 参数错误或非草稿状态
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未登录
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 申请不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 更新商户申请基础信息
      tags:
      - 商户申请
  /v1/merchant/application/foodpermit/ocr:
    post:
      consumes:
      - multipart/form-data
      description: 上传食品经营许可证图片，使用通用印刷体OCR识别并解析有效期等信息
      parameters:
      - description: 食品经营许可证图片
        in: formData
        name: image
        required: true
        type: file
      produces:
      - application/json
      responses:
        "200":
          description: 识别结果
          schema:
            $ref: '#/definitions/api.merchantApplicationDraftResponse'
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未登录
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 申请不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 上传食品经营许可证并OCR识别
      tags:
      - 商户申请
  /v1/merchant/application/idcard/ocr:
    post:
      consumes:
      - multipart/form-data
      description: 上传法人身份证照片（正面或背面），调用微信OCR识别并保存结果
      parameters:
      - description: 身份证图片
        in: formData
        name: image
        required: true
        type: file
      - description: 正面Front/背面Back
        in: formData
        name: side
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 识别结果
          schema:
            $ref: '#/definitions/api.merchantApplicationDraftResponse'
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未登录
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 申请不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 上传法人身份证并OCR识别
      tags:
      - 商户申请
  /v1/merchant/application/images:
    put:
      consumes:
      - application/json
      description: 保存商户门头照和店内环境照URL数组到草稿
      parameters:
      - description: 图片URL数组
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.updateMerchantImagesRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 更新成功
          schema:
            $ref: '#/definitions/api.merchantApplicationDraftResponse'
        "400":
          description: 参数错误或非草稿状态
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未登录
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 申请不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 更新门头照和环境照
      tags:
      - 商户申请
  /v1/merchant/application/license/ocr:
    post:
      consumes:
      - multipart/form-data
      description: 上传营业执照图片，调用微信OCR识别并保存结果，自动填充企业名称、信用代码、经营范围等
      parameters:
      - description: 营业执照图片（可选；不传则使用已上传的营业执照图片）
        in: formData
        name: image
        type: file
      produces:
      - application/json
      responses:
        "200":
          description: 识别结果
          schema:
            $ref: '#/definitions/api.merchantApplicationDraftResponse'
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未登录
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 申请不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 上传营业执照并OCR识别
      tags:
      - 商户申请
  /v1/merchant/application/reset:
    post:
      consumes:
      - application/json
      description: 将被拒绝的申请重置为草稿状态，可重新编辑提交
      produces:
      - application/json
      responses:
        "200":
          description: 重置成功
          schema:
            $ref: '#/definitions/api.merchantApplicationDraftResponse'
        "400":
          description: 非拒绝状态无法重置
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未登录
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 申请不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 重置被拒绝的商户申请
      tags:
      - 商户申请
  /v1/merchant/application/submit:
    post:
      consumes:
      - application/json
      description: 提交商户入驻申请，系统自动审核。提交前必须确保所有必填项（包括 region_id）已填充。支持从 draft/rejected/approved
        状态提交。
      produces:
      - application/json
      responses:
        "200":
          description: 申请结果（approved/rejected）
          schema:
            $ref: '#/definitions/api.merchantApplicationDraftResponse'
        "400":
          description: 参数不完整或非草稿状态
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未登录
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 申请不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 提交商户入驻申请
      tags:
      - 商户申请
  /v1/merchant/applyment/status:
    get:
      consumes:
      - application/json
      description: 查询商户微信二级商户进件状态
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/api.merchantApplymentStatusResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 查询商户开户状态
      tags:
      - 商户
  /v1/merchant/bindbank:
    post:
      consumes:
      - application/json
      description: 商户审核通过后，绑定银行卡信息并提交微信二级商户进件
      parameters:
      - description: 银行卡信息
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.merchantBindBankRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/api.merchantBindBankResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 商户绑定银行卡并提交微信开户
      tags:
      - 商户
  /v1/merchant/claims:
    get:
      consumes:
      - application/json
      description: 商户查看已批准的索赔列表，包含订单信息和申诉状态
      parameters:
      - description: 页码
        in: query
        minimum: 1
        name: page_id
        required: true
        type: integer
      - description: 每页数量
        in: query
        maximum: 50
        minimum: 1
        name: page_size
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 成功返回索赔列表
          schema:
            additionalProperties: true
            type: object
        "400":
          description: 参数错误
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 未授权
          schema:
            additionalProperties: true
            type: object
        "403":
          description: 非商户用户
          schema:
            additionalProperties: true
            type: object
        "500":
          description: 服务器错误
          schema:
            additionalProperties: true
            type: object
      security:
      - Bearer: []
      summary: 获取商户收到的索赔列表
      tags:
      - 商户申诉管理
  /v1/merchant/claims/{id}:
    get:
      consumes:
      - application/json
      description: 商户查看单个索赔的详细信息，包含申诉信息
      parameters:
      - description: 索赔ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 成功返回索赔详情
          schema:
            additionalProperties: true
            type: object
        "400":
          description: 参数错误
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 未授权
          schema:
            additionalProperties: true
            type: object
        "403":
          description: 非商户用户
          schema:
            additionalProperties: true
            type: object
        "404":
          description: 索赔不存在
          schema:
            additionalProperties: true
            type: object
        "500":
          description: 服务器错误
          schema:
            additionalProperties: true
            type: object
      security:
      - Bearer: []
      summary: 获取索赔详情
      tags:
      - 商户申诉管理
  /v1/merchant/devices:
    get:
      consumes:
      - application/json
      description: 商户获取已注册的打印机设备列表
      parameters:
      - description: 是否只返回启用的打印机
        in: query
        name: only_active
        type: boolean
      produces:
      - application/json
      responses:
        "200":
          description: 成功返回打印机列表
          schema:
            additionalProperties: true
            type: object
        "400":
          description: 参数错误
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 未授权
          schema:
            additionalProperties: true
            type: object
        "404":
          description: 商户不存在
          schema:
            additionalProperties: true
            type: object
        "500":
          description: 服务器错误
          schema:
            additionalProperties: true
            type: object
      security:
      - Bearer: []
      summary: 获取打印机列表
      tags:
      - 商户设备管理
    post:
      consumes:
      - application/json
      description: 商户注册新的云打印机设备，支持飞鹅云和易联云
      parameters:
      - description: 打印机信息
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.createPrinterRequest'
      produces:
      - application/json
      responses:
        "201":
          description: 成功注册打印机
          schema:
            $ref: '#/definitions/api.printerResponse'
        "400":
          description: 参数错误
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 未授权
          schema:
            additionalProperties: true
            type: object
        "404":
          description: 商户不存在
          schema:
            additionalProperties: true
            type: object
        "409":
          description: 打印机序列号已存在
          schema:
            additionalProperties: true
            type: object
        "500":
          description: 服务器错误
          schema:
            additionalProperties: true
            type: object
      security:
      - Bearer: []
      summary: 注册打印机
      tags:
      - 商户设备管理
  /v1/merchant/devices/{id}:
    delete:
      consumes:
      - application/json
      description: 商户删除已注册的打印机设备
      parameters:
      - description: 打印机ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 删除成功
          schema:
            additionalProperties: true
            type: object
        "400":
          description: 参数错误
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 未授权
          schema:
            additionalProperties: true
            type: object
        "403":
          description: 打印机不属于该商户
          schema:
            additionalProperties: true
            type: object
        "404":
          description: 打印机不存在
          schema:
            additionalProperties: true
            type: object
        "500":
          description: 服务器错误
          schema:
            additionalProperties: true
            type: object
      security:
      - Bearer: []
      summary: 删除打印机
      tags:
      - 商户设备管理
    get:
      consumes:
      - application/json
      description: 商户获取指定打印机的详细信息
      parameters:
      - description: 打印机ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 成功返回打印机详情
          schema:
            $ref: '#/definitions/api.printerResponse'
        "400":
          description: 参数错误
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 未授权
          schema:
            additionalProperties: true
            type: object
        "403":
          description: 打印机不属于该商户
          schema:
            additionalProperties: true
            type: object
        "404":
          description: 打印机不存在
          schema:
            additionalProperties: true
            type: object
        "500":
          description: 服务器错误
          schema:
            additionalProperties: true
            type: object
      security:
      - Bearer: []
      summary: 获取打印机详情
      tags:
      - 商户设备管理
    put:
      consumes:
      - application/json
      description: 商户更新打印机的配置信息
      parameters:
      - description: 打印机ID
        in: path
        name: id
        required: true
        type: integer
      - description: 更新内容
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.updatePrinterRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 更新成功
          schema:
            $ref: '#/definitions/api.printerResponse'
        "400":
          description: 参数错误
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 未授权
          schema:
            additionalProperties: true
            type: object
        "403":
          description: 打印机不属于该商户
          schema:
            additionalProperties: true
            type: object
        "404":
          description: 打印机不存在
          schema:
            additionalProperties: true
            type: object
        "500":
          description: 服务器错误
          schema:
            additionalProperties: true
            type: object
      security:
      - Bearer: []
      summary: 更新打印机配置
      tags:
      - 商户设备管理
  /v1/merchant/devices/{id}/test:
    post:
      consumes:
      - application/json
      description: 向打印机发送测试打印命令（功能尚未接入云打印服务）
      parameters:
      - description: 打印机ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 测试命令已发送
          schema:
            additionalProperties: true
            type: object
        "400":
          description: 参数错误
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 未授权
          schema:
            additionalProperties: true
            type: object
        "403":
          description: 打印机不属于该商户
          schema:
            additionalProperties: true
            type: object
        "404":
          description: 打印机不存在
          schema:
            additionalProperties: true
            type: object
        "500":
          description: 服务器错误
          schema:
            additionalProperties: true
            type: object
        "501":
          description: 功能尚未实现
          schema:
            additionalProperties: true
            type: object
      security:
      - Bearer: []
      summary: 测试打印机
      tags:
      - 商户设备管理
  /v1/merchant/display-config:
    get:
      consumes:
      - application/json
      description: 商户获取订单展示配置，包括打印、语音播报、KDS等设置
      produces:
      - application/json
      responses:
        "200":
          description: 成功返回配置
          schema:
            $ref: '#/definitions/api.getDisplayConfigResponse'
        "401":
          description: 未授权
          schema:
            additionalProperties: true
            type: object
        "404":
          description: 商户不存在
          schema:
            additionalProperties: true
            type: object
        "500":
          description: 服务器错误
          schema:
            additionalProperties: true
            type: object
      security:
      - Bearer: []
      summary: 获取订单展示配置
      tags:
      - 商户设备管理
    put:
      consumes:
      - application/json
      description: 商户更新订单展示配置，包括打印、语音播报、KDS等设置
      parameters:
      - description: 配置更新内容
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.updateDisplayConfigRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 更新成功
          schema:
            $ref: '#/definitions/api.getDisplayConfigResponse'
        "400":
          description: 参数错误
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 未授权
          schema:
            additionalProperties: true
            type: object
        "404":
          description: 商户不存在
          schema:
            additionalProperties: true
            type: object
        "500":
          description: 服务器错误
          schema:
            additionalProperties: true
            type: object
      security:
      - Bearer: []
      summary: 更新订单展示配置
      tags:
      - 商户设备管理
  /v1/merchant/finance/daily:
    get:
      consumes:
      - application/json
      description: 商户查看指定时间范围内的每日财务汇总数据
      parameters:
      - description: 开始日期
        example: "2025-11-01"
        in: query
        name: start_date
        required: true
        type: string
      - description: 结束日期
        example: "2025-11-30"
        in: query
        name: end_date
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 成功返回每日财务汇总
          schema:
            additionalProperties: true
            type: object
        "400":
          description: 参数错误或日期格式错误
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 未授权
          schema:
            additionalProperties: true
            type: object
        "404":
          description: 商户不存在
          schema:
            additionalProperties: true
            type: object
        "500":
          description: 服务器错误
          schema:
            additionalProperties: true
            type: object
      security:
      - Bearer: []
      summary: 获取每日财务汇总
      tags:
      - 商户财务管理
  /v1/merchant/finance/orders:
    get:
      consumes:
      - application/json
      description: 商户查看指定时间范围内的订单收入明细，按分账订单维度展示
      parameters:
      - description: 开始日期
        example: "2025-11-01"
        in: query
        name: start_date
        required: true
        type: string
      - description: 结束日期
        example: "2025-11-30"
        in: query
        name: end_date
        required: true
        type: string
      - default: 1
        description: 页码
        in: query
        minimum: 1
        name: page
        type: integer
      - default: 20
        description: 每页数量
        in: query
        maximum: 100
        minimum: 1
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 成功返回订单收入列表
          schema:
            additionalProperties: true
            type: object
        "400":
          description: 参数错误或日期格式错误
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 未授权
          schema:
            additionalProperties: true
            type: object
        "404":
          description: 商户不存在
          schema:
            additionalProperties: true
            type: object
        "500":
          description: 服务器错误
          schema:
            additionalProperties: true
            type: object
      security:
      - Bearer: []
      summary: 获取订单收入明细
      tags:
      - 商户财务管理
  /v1/merchant/finance/overview:
    get:
      consumes:
      - application/json
      description: 商户查看指定时间范围内的财务汇总数据，包含订单统计、收入统计、满返支出等
      parameters:
      - description: 开始日期
        example: "2025-11-01"
        in: query
        name: start_date
        required: true
        type: string
      - description: 结束日期
        example: "2025-11-30"
        in: query
        name: end_date
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 成功返回财务概览
          schema:
            $ref: '#/definitions/api.financeOverviewResponse'
        "400":
          description: 参数错误或日期格式错误
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 未授权
          schema:
            additionalProperties: true
            type: object
        "404":
          description: 商户不存在
          schema:
            additionalProperties: true
            type: object
        "500":
          description: 服务器错误
          schema:
            additionalProperties: true
            type: object
      security:
      - Bearer: []
      summary: 获取财务概览
      tags:
      - 商户财务管理
  /v1/merchant/finance/promotions:
    get:
      consumes:
      - application/json
      description: 商户查看指定时间范围内的满返优惠支出明细
      parameters:
      - description: 开始日期
        example: "2025-11-01"
        in: query
        name: start_date
        required: true
        type: string
      - description: 结束日期
        example: "2025-11-30"
        in: query
        name: end_date
        required: true
        type: string
      - default: 1
        description: 页码
        in: query
        minimum: 1
        name: page
        type: integer
      - default: 20
        description: 每页数量
        in: query
        maximum: 100
        minimum: 1
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 成功返回满返支出列表
          schema:
            additionalProperties: true
            type: object
        "400":
          description: 参数错误或日期格式错误
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 未授权
          schema:
            additionalProperties: true
            type: object
        "404":
          description: 商户不存在
          schema:
            additionalProperties: true
            type: object
        "500":
          description: 服务器错误
          schema:
            additionalProperties: true
            type: object
      security:
      - Bearer: []
      summary: 获取满返支出明细
      tags:
      - 商户财务管理
  /v1/merchant/finance/service-fees:
    get:
      consumes:
      - application/json
      description: 商户查看指定时间范围内的服务费明细，按日期和订单来源分组
      parameters:
      - description: 开始日期
        example: "2025-11-01"
        in: query
        name: start_date
        required: true
        type: string
      - description: 结束日期
        example: "2025-11-30"
        in: query
        name: end_date
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 成功返回服务费明细
          schema:
            additionalProperties: true
            type: object
        "400":
          description: 参数错误或日期格式错误
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 未授权
          schema:
            additionalProperties: true
            type: object
        "404":
          description: 商户不存在
          schema:
            additionalProperties: true
            type: object
        "500":
          description: 服务器错误
          schema:
            additionalProperties: true
            type: object
      security:
      - Bearer: []
      summary: 获取服务费明细
      tags:
      - 商户财务管理
  /v1/merchant/finance/settlements:
    get:
      consumes:
      - application/json
      description: 商户查看分账订单列表，即结算记录
      parameters:
      - description: 开始日期
        example: "2025-11-01"
        in: query
        name: start_date
        required: true
        type: string
      - description: 结束日期
        example: "2025-11-30"
        in: query
        name: end_date
        required: true
        type: string
      - description: 状态筛选
        enum:
        - pending
        - processing
        - finished
        - failed
        in: query
        name: status
        type: string
      - default: 1
        description: 页码
        in: query
        minimum: 1
        name: page
        type: integer
      - default: 20
        description: 每页数量
        in: query
        maximum: 100
        minimum: 1
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 成功返回结算记录
          schema:
            additionalProperties: true
            type: object
        "400":
          description: 参数错误或日期格式错误
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 未授权
          schema:
            additionalProperties: true
            type: object
        "404":
          description: 商户不存在
          schema:
            additionalProperties: true
            type: object
        "500":
          description: 服务器错误
          schema:
            additionalProperties: true
            type: object
      security:
      - Bearer: []
      summary: 获取结算记录
      tags:
      - 商户财务管理
  /v1/merchant/orders:
    get:
      consumes:
      - application/json
      description: |-
        分页获取当前商户的订单列表，支持按状态筛选

        **订单状态枚举：**
        - pending: 待支付
        - paid: 已支付
        - preparing: 制作中
        - ready: 待配送/待取餐
        - delivering: 配送中
        - completed: 已完成
        - cancelled: 已取消
      parameters:
      - description: 页码(从1开始)
        in: query
        minimum: 1
        name: page_id
        required: true
        type: integer
      - description: 每页条数
        in: query
        maximum: 50
        minimum: 5
        name: page_size
        required: true
        type: integer
      - description: 订单状态筛选
        enum:
        - pending
        - paid
        - preparing
        - ready
        - delivering
        - completed
        - cancelled
        in: query
        name: status
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 订单列表
          schema:
            items:
              $ref: '#/definitions/api.orderResponse'
            type: array
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 非商户用户
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取商户订单列表
      tags:
      - 商户订单管理
  /v1/merchant/orders/{id}:
    get:
      consumes:
      - application/json
      description: 获取指定订单的详细信息（商户视角）
      parameters:
      - description: 订单ID
        in: path
        minimum: 1
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 订单详情
          schema:
            $ref: '#/definitions/api.orderResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 订单不属于当前商户
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 订单不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取商户订单详情
      tags:
      - 商户订单管理
  /v1/merchant/orders/{id}/accept:
    post:
      consumes:
      - application/json
      description: 商户接受订单并开始准备
      parameters:
      - description: 订单ID
        in: path
        minimum: 1
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 接单成功
          schema:
            $ref: '#/definitions/api.orderResponse'
        "400":
          description: 订单状态不允许接单
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 订单不属于当前商户
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 订单不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 商户接单
      tags:
      - 商户订单管理
  /v1/merchant/orders/{id}/complete:
    post:
      consumes:
      - application/json
      description: 商户标记订单已完成（堂食/打包自取订单）
      parameters:
      - description: 订单ID
        in: path
        minimum: 1
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 订单已完成
          schema:
            $ref: '#/definitions/api.orderResponse'
        "400":
          description: 订单状态或类型不允许完成
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 订单不属于当前商户
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 订单不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 完成订单
      tags:
      - 商户订单管理
  /v1/merchant/orders/{id}/ready:
    post:
      consumes:
      - application/json
      description: 商户标记订单已出餐，等待配送或顾客取餐
      parameters:
      - description: 订单ID
        in: path
        minimum: 1
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 标记成功
          schema:
            $ref: '#/definitions/api.orderResponse'
        "400":
          description: 订单状态不允许标记出餐
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 订单不属于当前商户
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 订单不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 标记出餐完成
      tags:
      - 商户订单管理
  /v1/merchant/orders/{id}/reject:
    post:
      consumes:
      - application/json
      description: 商户拒绝订单并说明原因，将触发自动退款
      parameters:
      - description: 订单ID
        in: path
        minimum: 1
        name: id
        required: true
        type: integer
      - description: 拒单原因
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.rejectOrderBody'
      produces:
      - application/json
      responses:
        "200":
          description: 拒单成功
          schema:
            $ref: '#/definitions/api.orderResponse'
        "400":
          description: 订单状态不允许拒单
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 订单不属于当前商户
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 订单不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 商户拒单
      tags:
      - 商户订单管理
  /v1/merchant/orders/stats:
    get:
      consumes:
      - application/json
      description: 获取商户在指定日期范围内的订单统计数据
      parameters:
      - description: 开始日期(YYYY-MM-DD)
        in: query
        name: start_date
        required: true
        type: string
      - description: 结束日期(YYYY-MM-DD)
        in: query
        name: end_date
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 订单统计数据
          schema:
            $ref: '#/definitions/db.GetOrderStatsRow'
        "400":
          description: 日期格式错误/范围超限
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 非商户用户
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取订单统计
      tags:
      - 商户订单管理
  /v1/merchant/stats/categories:
    get:
      consumes:
      - application/json
      description: 商户获取指定日期范围内按菜品分类的销售统计分析
      parameters:
      - description: '开始日期 (格式: YYYY-MM-DD)'
        in: query
        name: start_date
        required: true
        type: string
      - description: '结束日期 (格式: YYYY-MM-DD)'
        in: query
        name: end_date
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 菜品分类统计列表
          schema:
            items:
              $ref: '#/definitions/api.dishCategoryStatsRow'
            type: array
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 商户不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取菜品分类统计
      tags:
      - 商户统计
  /v1/merchant/stats/customers:
    get:
      consumes:
      - application/json
      description: 商户获取所有曾在本店消费的顾客统计信息，支持按总订单数、总金额、最后下单时间排序
      parameters:
      - description: 排序字段 (total_orders/total_amount/last_order_at, 默认last_order_at)
        in: query
        name: order_by
        type: string
      - description: 页码 (默认1)
        in: query
        name: page
        type: integer
      - description: 每页数量 (默认20, 最大100)
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 顾客列表及分页信息
          schema:
            additionalProperties: true
            type: object
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 商户不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取商户顾客列表
      tags:
      - 商户统计
  /v1/merchant/stats/customers/{user_id}:
    get:
      consumes:
      - application/json
      description: 商户获取指定顾客在本店的消费详情，包括统计数据和喜好菜品
      parameters:
      - description: 用户ID
        in: path
        name: user_id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 顾客详情
          schema:
            $ref: '#/definitions/api.customerDetailResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 商户或顾客不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取顾客详情
      tags:
      - 商户统计
  /v1/merchant/stats/daily:
    get:
      consumes:
      - application/json
      description: 商户获取指定日期范围内的每日订单、销售额、佣金等统计数据
      parameters:
      - description: '开始日期 (格式: YYYY-MM-DD)'
        in: query
        name: start_date
        required: true
        type: string
      - description: '结束日期 (格式: YYYY-MM-DD)'
        in: query
        name: end_date
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 日报统计列表
          schema:
            items:
              $ref: '#/definitions/api.dailyStatRow'
            type: array
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 商户不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取商户日报统计
      tags:
      - 商户统计
  /v1/merchant/stats/dishes/top:
    get:
      consumes:
      - application/json
      description: 商户获取指定日期范围内销量最高的菜品列表
      parameters:
      - description: '开始日期 (格式: YYYY-MM-DD)'
        in: query
        name: start_date
        required: true
        type: string
      - description: '结束日期 (格式: YYYY-MM-DD)'
        in: query
        name: end_date
        required: true
        type: string
      - description: 返回数量限制 (默认10, 最大100)
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 菜品销量排行列表
          schema:
            items:
              $ref: '#/definitions/api.topSellingDishRow'
            type: array
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 商户不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取菜品销量排行
      tags:
      - 商户统计
  /v1/merchant/stats/hourly:
    get:
      consumes:
      - application/json
      description: 商户获取指定日期范围内按小时统计的订单分布，分析高峰时段
      parameters:
      - description: '开始日期 (格式: YYYY-MM-DD)'
        in: query
        name: start_date
        required: true
        type: string
      - description: '结束日期 (格式: YYYY-MM-DD)'
        in: query
        name: end_date
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 时段统计列表 (0-23小时)
          schema:
            items:
              $ref: '#/definitions/api.merchantHourlyStatsRow'
            type: array
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 商户不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取商户时段分析
      tags:
      - 商户统计
  /v1/merchant/stats/overview:
    get:
      consumes:
      - application/json
      description: 商户获取指定日期范围内的总体统计数据，包括总天数、总订单数、总销售额、总佣金、日均销售额
      parameters:
      - description: '开始日期 (格式: YYYY-MM-DD)'
        in: query
        name: start_date
        required: true
        type: string
      - description: '结束日期 (格式: YYYY-MM-DD)'
        in: query
        name: end_date
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 概览统计
          schema:
            $ref: '#/definitions/api.merchantOverviewResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 商户不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取商户概览统计
      tags:
      - 商户统计
  /v1/merchant/stats/repurchase:
    get:
      consumes:
      - application/json
      description: 商户获取指定日期范围内的顾客复购率分析，包括总顾客数、复购顾客数、复购率、平均订单数
      parameters:
      - description: '开始日期 (格式: YYYY-MM-DD)'
        in: query
        name: start_date
        required: true
        type: string
      - description: '结束日期 (格式: YYYY-MM-DD)'
        in: query
        name: end_date
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 复购率统计
          schema:
            $ref: '#/definitions/api.merchantRepurchaseRateResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 商户不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取商户复购率
      tags:
      - 商户统计
  /v1/merchant/stats/sources:
    get:
      consumes:
      - application/json
      description: 商户获取指定日期范围内按订单类型（外卖/堂食等）的统计分析
      parameters:
      - description: '开始日期 (格式: YYYY-MM-DD)'
        in: query
        name: start_date
        required: true
        type: string
      - description: '结束日期 (格式: YYYY-MM-DD)'
        in: query
        name: end_date
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 订单来源统计列表
          schema:
            items:
              $ref: '#/definitions/api.merchantOrderSourceStatsRow'
            type: array
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 商户不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取订单来源分析
      tags:
      - 商户统计
  /v1/merchants/{id}/promotions:
    get:
      consumes:
      - application/json
      description: 获取商户所有活跃的优惠活动（满返运费、满减、可领优惠券）
      parameters:
      - description: 商户ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 优惠活动列表
          schema:
            $ref: '#/definitions/api.merchantPromotionsResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 商户不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      summary: 获取商户优惠活动
      tags:
      - 商户
  /v1/merchants/{id}/recharge-rules:
    get:
      description: 获取商户的所有充值规则
      parameters:
      - description: 商户ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 规则列表
          schema:
            items:
              $ref: '#/definitions/api.rechargeRuleResponse'
            type: array
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取充值规则列表
      tags:
      - 会员管理
    post:
      consumes:
      - application/json
      description: 商户创建充值规则（含赠送）
      parameters:
      - description: 商户ID
        in: path
        name: id
        required: true
        type: integer
      - description: 充值规则信息
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.createRechargeRuleRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 创建成功
          schema:
            $ref: '#/definitions/api.rechargeRuleResponse'
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未认证
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 非商户用户
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 创建充值规则
      tags:
      - 会员管理-商户
  /v1/merchants/{id}/recharge-rules/{rule_id}:
    delete:
      description: 商户删除充值规则（仅规则所有者可操作）
      parameters:
      - description: 商户ID
        in: path
        name: id
        required: true
        type: integer
      - description: 充值规则ID
        in: path
        name: rule_id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 删除成功
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未认证
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 非规则所有者
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 规则不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 删除充值规则
      tags:
      - 会员管理-商户
    patch:
      consumes:
      - application/json
      description: 商户更新充值规则（仅规则所有者可操作）
      parameters:
      - description: 商户ID
        in: path
        name: id
        required: true
        type: integer
      - description: 充值规则ID
        in: path
        name: rule_id
        required: true
        type: integer
      - description: 更新字段
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.updateRechargeRuleRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 更新成功
          schema:
            $ref: '#/definitions/api.rechargeRuleResponse'
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未认证
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 非规则所有者
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 规则不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 更新充值规则
      tags:
      - 会员管理-商户
  /v1/merchants/{id}/recharge-rules/active:
    get:
      description: 获取商户当前生效中的充值规则（已激活且在有效期内）
      parameters:
      - description: 商户ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 规则列表
          schema:
            items:
              $ref: '#/definitions/api.rechargeRuleResponse'
            type: array
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取生效中的充值规则
      tags:
      - 会员管理
  /v1/merchants/{id}/rooms:
    get:
      description: C端用户获取商户的可用包间列表（含主图）
      parameters:
      - description: 商户ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 包间列表
          schema:
            $ref: '#/definitions/api.listRoomsForCustomerResponse'
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      summary: 获取可用包间列表
      tags:
      - 包间浏览
  /v1/merchants/{id}/rooms/all:
    get:
      description: C端用户获取商户的全部包间列表（含主图、月销量，包括不可用的）
      parameters:
      - description: 商户ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 包间列表
          schema:
            $ref: '#/definitions/api.listRoomsForCustomerResponse'
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      summary: 获取商户全部包间列表
      tags:
      - 包间浏览
  /v1/merchants/{id}/vouchers:
    get:
      consumes:
      - application/json
      description: 获取指定商户的所有代金券（包含所有状态）
      parameters:
      - description: 商户ID
        in: path
        name: id
        required: true
        type: integer
      - description: 页码
        in: query
        minimum: 1
        name: page_id
        required: true
        type: integer
      - description: 每页数量
        in: query
        maximum: 50
        minimum: 5
        name: page_size
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 代金券列表
          schema:
            items:
              $ref: '#/definitions/api.voucherResponse'
            type: array
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未认证
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取商户代金券列表
      tags:
      - 代金券管理-商户
    post:
      consumes:
      - application/json
      description: 商户创建代金券模板（仅商户可操作）
      parameters:
      - description: 商户ID
        in: path
        name: id
        required: true
        type: integer
      - description: 代金券信息
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.createVoucherRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 创建成功
          schema:
            $ref: '#/definitions/api.voucherResponse'
        "400":
          description: 参数错误或时间范围无效
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未认证
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 非商户用户或无权操作此商户
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 创建代金券
      tags:
      - 代金券管理-商户
  /v1/merchants/{id}/vouchers/{voucher_id}:
    delete:
      consumes:
      - application/json
      description: 商户删除代金券模板（仅商户可操作，且不能有未使用的用户代金券）
      parameters:
      - description: 商户ID
        in: path
        name: id
        required: true
        type: integer
      - description: 代金券ID
        in: path
        name: voucher_id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 删除成功
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未认证
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 非代金券所有者
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 代金券不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "409":
          description: 存在未使用的用户代金券，无法删除
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 删除代金券
      tags:
      - 代金券管理-商户
    patch:
      consumes:
      - application/json
      description: 商户更新代金券信息（仅商户可操作）
      parameters:
      - description: 商户ID
        in: path
        name: id
        required: true
        type: integer
      - description: 代金券ID
        in: path
        name: voucher_id
        required: true
        type: integer
      - description: 更新字段
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.updateVoucherRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 更新成功
          schema:
            $ref: '#/definitions/api.voucherResponse'
        "400":
          description: 参数错误或时间范围无效
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未认证
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 非代金券所有者
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 代金券不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 更新代金券
      tags:
      - 代金券管理-商户
  /v1/merchants/{id}/vouchers/active:
    get:
      consumes:
      - application/json
      description: 获取商户当前可领取的代金券（已激活、在有效期内、未领完）
      parameters:
      - description: 商户ID
        in: path
        name: id
        required: true
        type: integer
      - description: 页码
        in: query
        minimum: 1
        name: page_id
        required: true
        type: integer
      - description: 每页数量
        in: query
        maximum: 50
        minimum: 5
        name: page_size
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 可领取代金券列表
          schema:
            items:
              $ref: '#/definitions/api.voucherResponse'
            type: array
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未认证
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取可领取代金券列表
      tags:
      - 代金券管理
  /v1/merchants/applications:
    post:
      consumes:
      - application/json
      description: 提交商户入驻申请，包括营业执照、法人身份证等信息
      parameters:
      - description: 商户入驻申请信息
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.createMerchantApplicationRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 申请提交成功
          schema:
            $ref: '#/definitions/api.merchantApplicationResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "409":
          description: 已存在待审核或已通过的申请
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 提交商户入驻申请
      tags:
      - 商户
  /v1/merchants/applications/me:
    get:
      consumes:
      - application/json
      description: 获取当前用户提交的商户入驻申请状态和详情
      produces:
      - application/json
      responses:
        "200":
          description: 申请详情
          schema:
            $ref: '#/definitions/api.merchantApplicationResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 未找到申请记录
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取当前用户的商户入驻申请
      tags:
      - 商户
  /v1/merchants/images/upload:
    post:
      consumes:
      - multipart/form-data
      description: 上传商户入驻所需图片（营业执照、身份证、Logo、门头照、环境照）
      parameters:
      - description: 图片类别
        enum:
        - business_license
        - id_front
        - id_back
        - logo
        - storefront
        - environment
        in: formData
        name: category
        required: true
        type: string
      - description: 图片文件
        in: formData
        name: image
        required: true
        type: file
      produces:
      - application/json
      responses:
        "200":
          description: 上传成功
          schema:
            $ref: '#/definitions/api.uploadImageResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 上传商户图片
      tags:
      - 商户
  /v1/merchants/me:
    get:
      consumes:
      - application/json
      description: 获取当前用户关联的商户详细信息
      produces:
      - application/json
      responses:
        "200":
          description: 商户信息
          schema:
            $ref: '#/definitions/api.merchantResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 商户不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取当前商户信息
      tags:
      - 商户
    patch:
      consumes:
      - application/json
      description: 更新商户基本信息（使用乐观锁防止并发冲突）
      parameters:
      - description: 商户更新信息
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.updateMerchantRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 更新后的商户信息
          schema:
            $ref: '#/definitions/api.merchantResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 商户不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "409":
          description: 版本冲突
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 更新商户信息
      tags:
      - 商户
  /v1/merchants/me/business-hours:
    get:
      description: 获取当前商户每周的营业时间
      produces:
      - application/json
      responses:
        "200":
          description: 营业时间列表
          schema:
            $ref: '#/definitions/api.businessHoursListResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 非商户用户
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取商户营业时间
      tags:
      - 商户
    put:
      consumes:
      - application/json
      description: 设置商户每周的营业时间
      parameters:
      - description: 营业时间列表
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.setBusinessHoursRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 设置后的营业时间
          schema:
            $ref: '#/definitions/api.businessHoursListResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 非商户用户
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 设置商户营业时间
      tags:
      - 商户
  /v1/merchants/me/membership-settings:
    get:
      description: 获取当前商户的会员使用设置（余额使用场景、赠送金使用场景、叠加优惠等）
      produces:
      - application/json
      responses:
        "200":
          description: 会员设置
          schema:
            $ref: '#/definitions/api.membershipSettingsResponse'
        "401":
          description: 未认证
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 商户不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取商户会员设置
      tags:
      - 会员管理-商户
    put:
      consumes:
      - application/json
      description: 更新当前商户的会员使用设置（余额使用场景、赠送金使用场景、叠加优惠等）
      parameters:
      - description: 会员设置
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.updateMembershipSettingsRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 更新成功
          schema:
            $ref: '#/definitions/api.membershipSettingsResponse'
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未认证
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 商户不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 更新商户会员设置
      tags:
      - 会员管理-商户
  /v1/merchants/me/status:
    get:
      description: 获取当前商户的开店/打烊状态
      produces:
      - application/json
      responses:
        "200":
          description: 营业状态
          schema:
            $ref: '#/definitions/api.merchantStatusResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 非商户用户
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取商户营业状态
      tags:
      - 商户
    patch:
      consumes:
      - application/json
      description: 商户设置开店/打烊状态，可设置自动打烊时间
      parameters:
      - description: 状态更新
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.updateMerchantStatusRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 更新后的状态
          schema:
            $ref: '#/definitions/api.merchantStatusResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 商户被暂停或无权限
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 更新商户营业状态
      tags:
      - 商户
  /v1/notifications:
    get:
      consumes:
      - application/json
      description: 获取当前用户的通知列表，支持按读取状态和通知类型筛选，支持分页
      parameters:
      - description: '筛选读取状态: true-已读, false-未读'
        in: query
        name: is_read
        type: boolean
      - description: '筛选通知类型: order/payment/delivery/system/food_safety'
        in: query
        name: type
        type: string
      - description: 每页数量(默认20, 最大100)
        in: query
        name: limit
        type: integer
      - description: 分页偏移量(默认0)
        in: query
        name: offset
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/api.listNotificationsResponse'
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取通知列表
      tags:
      - 通知管理
  /v1/notifications/{id}:
    delete:
      consumes:
      - application/json
      description: 删除指定通知，仅能删除自己的通知
      parameters:
      - description: 通知ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "204":
          description: 无返回内容
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 通知不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 删除通知
      tags:
      - 通知管理
  /v1/notifications/{id}/read:
    put:
      consumes:
      - application/json
      description: 将指定通知标记为已读状态，仅能操作自己的通知
      parameters:
      - description: 通知ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/api.notificationResponse'
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 通知不存在或已读
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 标记通知已读
      tags:
      - 通知管理
  /v1/notifications/preferences:
    get:
      consumes:
      - application/json
      description: 获取用户的通知偏好设置，如不存在则自动创建默认设置
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/api.notificationPreferencesResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取通知偏好设置
      tags:
      - 通知管理
    put:
      consumes:
      - application/json
      description: 更新用户的通知偏好设置，包括各类通知开关和免打扰时段
      parameters:
      - description: 偏好设置更新内容
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.updateNotificationPreferencesRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/api.notificationPreferencesResponse'
        "400":
          description: 参数错误或时间格式错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 更新通知偏好设置
      tags:
      - 通知管理
  /v1/notifications/read-all:
    put:
      consumes:
      - application/json
      description: 将当前用户的所有未读通知标记为已读
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/api.markAllAsReadResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 全部标记已读
      tags:
      - 通知管理
  /v1/notifications/unread/count:
    get:
      consumes:
      - application/json
      description: 获取当前用户的未读通知数量
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/api.unreadCountResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取未读通知数量
      tags:
      - 通知管理
  /v1/operator/appeals:
    get:
      consumes:
      - application/json
      description: 运营商查看自己管辖区域内的申诉列表，可按状态筛选
      parameters:
      - description: 状态筛选
        enum:
        - pending
        - approved
        - rejected
        in: query
        name: status
        type: string
      - description: 页码
        in: query
        minimum: 1
        name: page_id
        required: true
        type: integer
      - description: 每页数量
        in: query
        maximum: 50
        minimum: 1
        name: page_size
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 成功返回申诉列表
          schema:
            additionalProperties: true
            type: object
        "400":
          description: 参数错误
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 未授权
          schema:
            additionalProperties: true
            type: object
        "403":
          description: 非运营商用户
          schema:
            additionalProperties: true
            type: object
        "500":
          description: 服务器错误
          schema:
            additionalProperties: true
            type: object
      security:
      - Bearer: []
      summary: 获取区域内申诉列表
      tags:
      - 运营商申诉管理
  /v1/operator/appeals/{id}:
    get:
      consumes:
      - application/json
      description: 运营商查看区域内申诉的详细信息，包含索赔、订单、用户信用分等信息
      parameters:
      - description: 申诉ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 成功返回申诉详情
          schema:
            additionalProperties: true
            type: object
        "400":
          description: 参数错误
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 未授权
          schema:
            additionalProperties: true
            type: object
        "403":
          description: 非运营商用户
          schema:
            additionalProperties: true
            type: object
        "404":
          description: 申诉不存在
          schema:
            additionalProperties: true
            type: object
        "500":
          description: 服务器错误
          schema:
            additionalProperties: true
            type: object
      security:
      - Bearer: []
      summary: 获取申诉详情
      tags:
      - 运营商申诉管理
  /v1/operator/appeals/{id}/review:
    post:
      consumes:
      - application/json
      description: 运营商审核申诉，批准时需提供补偿金额，系统会自动更新用户信用分
      parameters:
      - description: 申诉ID
        in: path
        name: id
        required: true
        type: integer
      - description: 审核请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.reviewAppealRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 审核成功
          schema:
            $ref: '#/definitions/api.appealResponse'
        "400":
          description: 参数错误或申诉已审核
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 未授权
          schema:
            additionalProperties: true
            type: object
        "403":
          description: 非运营商用户或申诉不在管辖区域
          schema:
            additionalProperties: true
            type: object
        "404":
          description: 申诉不存在
          schema:
            additionalProperties: true
            type: object
        "500":
          description: 服务器错误
          schema:
            additionalProperties: true
            type: object
      security:
      - Bearer: []
      summary: 审核申诉
      tags:
      - 运营商申诉管理
  /v1/operator/application:
    get:
      description: 获取当前用户的运营商申请信息
      produces:
      - application/json
      responses:
        "200":
          description: 申请信息
          schema:
            $ref: '#/definitions/api.operatorApplicationResponse'
        "401":
          description: 未登录
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 没有申请记录
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取当前运营商申请状态
      tags:
      - 运营商申请
    post:
      consumes:
      - application/json
      description: 获取当前用户的运营商申请草稿，如果没有则需要提供区域ID创建新草稿。已通过的申请不会返回。
      parameters:
      - description: 创建草稿需要提供区域ID
        in: body
        name: request
        schema:
          $ref: '#/definitions/api.createOperatorApplicationRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 获取成功
          schema:
            $ref: '#/definitions/api.operatorApplicationResponse'
        "201":
          description: 创建成功
          schema:
            $ref: '#/definitions/api.operatorApplicationResponse'
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未登录
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "409":
          description: 已有通过或待审核的申请，或区域已被占用
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取或创建运营商入驻申请草稿
      tags:
      - 运营商申请
  /v1/operator/application/basic:
    put:
      consumes:
      - application/json
      description: 更新运营商名称、联系人、联系电话、申请合同年限（仅草稿状态可编辑）
      parameters:
      - description: 基础信息
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.updateOperatorApplicationBasicRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 更新成功
          schema:
            $ref: '#/definitions/api.operatorApplicationResponse'
        "400":
          description: 参数错误或非草稿状态
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未登录
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 申请不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 更新运营商申请基础信息
      tags:
      - 运营商申请
  /v1/operator/application/idcard/ocr:
    post:
      consumes:
      - multipart/form-data
      description: 上传法人身份证照片（正面或背面），调用微信OCR识别并保存结果
      parameters:
      - description: 身份证图片
        in: formData
        name: image
        required: true
        type: file
      - description: 正面Front/背面Back
        in: formData
        name: side
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 识别结果
          schema:
            $ref: '#/definitions/api.operatorApplicationResponse'
        "400":
          description: 参数错误或非草稿状态
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未登录
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 申请不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 上传法人身份证并OCR识别
      tags:
      - 运营商申请
  /v1/operator/application/license/ocr:
    post:
      consumes:
      - multipart/form-data
      description: 上传营业执照图片，调用微信OCR识别并保存结果，自动填充企业名称、信用代码等
      parameters:
      - description: 营业执照图片
        in: formData
        name: image
        required: true
        type: file
      produces:
      - application/json
      responses:
        "200":
          description: 识别结果
          schema:
            $ref: '#/definitions/api.operatorApplicationResponse'
        "400":
          description: 参数错误或非草稿状态
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未登录
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 申请不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 上传营业执照并OCR识别
      tags:
      - 运营商申请
  /v1/operator/application/region:
    put:
      consumes:
      - application/json
      description: 更新运营商申请的目标区域（仅草稿状态可修改）
      parameters:
      - description: 区域信息
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.updateOperatorApplicationRegionRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 更新成功
          schema:
            $ref: '#/definitions/api.operatorApplicationResponse'
        "400":
          description: 参数错误或非草稿状态
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未登录
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 申请不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "409":
          description: 区域已被占用
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 更新申请的区域
      tags:
      - 运营商申请
  /v1/operator/application/reset:
    post:
      description: 将被拒绝的申请重置为草稿状态，允许重新编辑提交
      produces:
      - application/json
      responses:
        "200":
          description: 重置成功
          schema:
            $ref: '#/definitions/api.operatorApplicationResponse'
        "400":
          description: 只能重置被拒绝的申请
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未登录
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 申请不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 重置被拒绝的申请为草稿
      tags:
      - 运营商申请
  /v1/operator/application/submit:
    post:
      description: 提交申请进入人工审核流程。与商户/骑手不同，运营商需要人工审核。
      produces:
      - application/json
      responses:
        "200":
          description: 提交成功，等待审核
          schema:
            $ref: '#/definitions/api.operatorApplicationResponse'
        "400":
          description: 信息不完整或非草稿状态
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未登录
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 申请不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "409":
          description: 区域已被占用
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 提交运营商入驻申请
      tags:
      - 运营商申请
  /v1/operator/applyment/bindbank:
    post:
      consumes:
      - application/json
      description: 运营商审核通过后，绑定银行卡信息并提交微信二级商户进件
      parameters:
      - description: 银行卡信息
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.operatorBindBankRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/api.operatorBindBankResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 运营商绑定银行卡并提交微信开户
      tags:
      - 运营商
  /v1/operator/applyment/status:
    get:
      consumes:
      - application/json
      description: 获取运营商微信支付开户申请状态
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/api.operatorApplymentStatusResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取运营商开户状态
      tags:
      - 运营商
  /v1/operator/merchants:
    get:
      consumes:
      - application/json
      description: 运营商获取其管辖区域内的所有商户，支持按状态筛选
      parameters:
      - description: 商户状态
        enum:
        - pending
        - approved
        - rejected
        - suspended
        in: query
        name: status
        type: string
      - default: 1
        description: 页码
        in: query
        name: page
        type: integer
      - default: 20
        description: 每页数量
        in: query
        maximum: 100
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/api.listOperatorMerchantsResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/api.errorMessage'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.errorMessage'
        "403":
          description: 无权限
          schema:
            $ref: '#/definitions/api.errorMessage'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.errorMessage'
      security:
      - BearerAuth: []
      summary: 获取区域商户列表
      tags:
      - 运营商-商户骑手管理
  /v1/operator/merchants/{id}:
    get:
      consumes:
      - application/json
      description: 运营商获取其管辖区域内指定商户的详细信息
      parameters:
      - description: 商户ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/api.merchantDetailResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/api.errorMessage'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.errorMessage'
        "403":
          description: 无权限
          schema:
            $ref: '#/definitions/api.errorMessage'
        "404":
          description: 商户不存在
          schema:
            $ref: '#/definitions/api.errorMessage'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.errorMessage'
      security:
      - BearerAuth: []
      summary: 获取商户详情
      tags:
      - 运营商-商户骑手管理
  /v1/operator/merchants/{id}/resume:
    post:
      consumes:
      - application/json
      description: 运营商恢复其管辖区域内被暂停的商户
      parameters:
      - description: 商户ID
        in: path
        name: id
        required: true
        type: integer
      - description: 恢复原因
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.resumeOperatorMerchantRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 恢复成功
          schema:
            $ref: '#/definitions/api.MessageResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/api.errorMessage'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.errorMessage'
        "403":
          description: 无权限
          schema:
            $ref: '#/definitions/api.errorMessage'
        "404":
          description: 商户不存在
          schema:
            $ref: '#/definitions/api.errorMessage'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.errorMessage'
      security:
      - BearerAuth: []
      summary: 恢复商户
      tags:
      - 运营商-商户骑手管理
  /v1/operator/merchants/{id}/suspend:
    post:
      consumes:
      - application/json
      description: 运营商暂停其管辖区域内的商户，最长可暂停30天（720小时）
      parameters:
      - description: 商户ID
        in: path
        name: id
        required: true
        type: integer
      - description: 暂停原因和时长
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.suspendOperatorMerchantRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 暂停成功
          schema:
            $ref: '#/definitions/api.MessageResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/api.errorMessage'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.errorMessage'
        "403":
          description: 无权限
          schema:
            $ref: '#/definitions/api.errorMessage'
        "404":
          description: 商户不存在
          schema:
            $ref: '#/definitions/api.errorMessage'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.errorMessage'
      security:
      - BearerAuth: []
      summary: 暂停商户
      tags:
      - 运营商-商户骑手管理
  /v1/operator/merchants/ranking:
    get:
      consumes:
      - application/json
      description: 获取运营商管理区域内商户的销售排行榜
      parameters:
      - description: '开始日期 (格式: 2025-11-01)'
        in: query
        name: start_date
        required: true
        type: string
      - description: '结束日期 (格式: 2025-11-30)'
        in: query
        name: end_date
        required: true
        type: string
      - description: '页码 (默认: 1)'
        in: query
        name: page
        type: integer
      - description: '每页数量 (默认: 20, 最大: 100)'
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 商户排行列表
          schema:
            items:
              $ref: '#/definitions/api.operatorMerchantRankingRow'
            type: array
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 无权限
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取商户排行
      tags:
      - 运营商数据统计
  /v1/operator/regions/{region_id}/stats:
    get:
      consumes:
      - application/json
      description: 获取指定区域在指定日期范围内的统计数据，包括商户数量、订单总数、GMV和佣金
      parameters:
      - description: 区域ID
        in: path
        name: region_id
        required: true
        type: integer
      - description: '开始日期 (格式: 2025-11-01)'
        in: query
        name: start_date
        required: true
        type: string
      - description: '结束日期 (格式: 2025-11-30)'
        in: query
        name: end_date
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 区域统计数据
          schema:
            $ref: '#/definitions/api.regionStatsResponse'
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 无权限访问该区域
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 区域不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取区域统计
      tags:
      - 运营商数据统计
  /v1/operator/riders:
    get:
      consumes:
      - application/json
      description: 运营商获取其管辖区域内的所有骑手，支持按状态筛选
      parameters:
      - description: 骑手状态
        enum:
        - pending
        - active
        - suspended
        - deactivated
        in: query
        name: status
        type: string
      - default: 1
        description: 页码
        in: query
        name: page
        type: integer
      - default: 20
        description: 每页数量
        in: query
        maximum: 100
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/api.listOperatorRidersResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/api.errorMessage'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.errorMessage'
        "403":
          description: 无权限
          schema:
            $ref: '#/definitions/api.errorMessage'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.errorMessage'
      security:
      - BearerAuth: []
      summary: 获取区域骑手列表
      tags:
      - 运营商-商户骑手管理
  /v1/operator/riders/{id}:
    get:
      consumes:
      - application/json
      description: 运营商获取其管辖区域内指定骑手的详细信息
      parameters:
      - description: 骑手ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/api.riderDetailResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/api.errorMessage'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.errorMessage'
        "403":
          description: 无权限
          schema:
            $ref: '#/definitions/api.errorMessage'
        "404":
          description: 骑手不存在
          schema:
            $ref: '#/definitions/api.errorMessage'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.errorMessage'
      security:
      - BearerAuth: []
      summary: 获取骑手详情
      tags:
      - 运营商-商户骑手管理
  /v1/operator/riders/{id}/resume:
    post:
      consumes:
      - application/json
      description: 运营商恢复其管辖区域内被暂停的骑手
      parameters:
      - description: 骑手ID
        in: path
        name: id
        required: true
        type: integer
      - description: 恢复原因
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.resumeOperatorRiderRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 恢复成功
          schema:
            $ref: '#/definitions/api.MessageResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/api.errorMessage'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.errorMessage'
        "403":
          description: 无权限
          schema:
            $ref: '#/definitions/api.errorMessage'
        "404":
          description: 骑手不存在
          schema:
            $ref: '#/definitions/api.errorMessage'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.errorMessage'
      security:
      - BearerAuth: []
      summary: 恢复骑手
      tags:
      - 运营商-商户骑手管理
  /v1/operator/riders/{id}/suspend:
    post:
      consumes:
      - application/json
      description: 运营商暂停其管辖区域内的骑手，最长可暂停30天（720小时）
      parameters:
      - description: 骑手ID
        in: path
        name: id
        required: true
        type: integer
      - description: 暂停原因和时长
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.suspendOperatorRiderRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 暂停成功
          schema:
            $ref: '#/definitions/api.MessageResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/api.errorMessage'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.errorMessage'
        "403":
          description: 无权限
          schema:
            $ref: '#/definitions/api.errorMessage'
        "404":
          description: 骑手不存在
          schema:
            $ref: '#/definitions/api.errorMessage'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.errorMessage'
      security:
      - BearerAuth: []
      summary: 暂停骑手
      tags:
      - 运营商-商户骑手管理
  /v1/operator/riders/ranking:
    get:
      consumes:
      - application/json
      description: 获取运营商管理区域内骑手的配送绩效排行榜
      parameters:
      - description: '开始日期 (格式: 2025-11-01)'
        in: query
        name: start_date
        required: true
        type: string
      - description: '结束日期 (格式: 2025-11-30)'
        in: query
        name: end_date
        required: true
        type: string
      - description: '页码 (默认: 1)'
        in: query
        name: page
        type: integer
      - description: '每页数量 (默认: 20, 最大: 100)'
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 骑手排行列表
          schema:
            items:
              $ref: '#/definitions/api.operatorRiderRankingRow'
            type: array
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 无权限
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取骑手排行
      tags:
      - 运营商数据统计
  /v1/operator/trend/daily:
    get:
      consumes:
      - application/json
      description: 获取运营商管理区域的每日订单、GMV、佣金等趋势数据
      parameters:
      - description: '开始日期 (格式: 2025-11-01)'
        in: query
        name: start_date
        required: true
        type: string
      - description: '结束日期 (格式: 2025-11-30)'
        in: query
        name: end_date
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 每日趋势数据
          schema:
            items:
              $ref: '#/definitions/api.regionDailyTrendRow'
            type: array
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 无权限
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取每日趋势
      tags:
      - 运营商数据统计
  /v1/operators/me/commission:
    get:
      consumes:
      - application/json
      description: 获取运营商的每日佣金明细，支持分页
      parameters:
      - description: '开始日期 (格式: 2025-11-01)'
        in: query
        name: start_date
        required: true
        type: string
      - description: '结束日期 (格式: 2025-11-30)'
        in: query
        name: end_date
        required: true
        type: string
      - description: '页码 (默认: 1)'
        in: query
        name: page
        type: integer
      - description: '每页数量 (默认: 20, 最大: 100)'
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 佣金明细
          schema:
            $ref: '#/definitions/api.operatorCommissionResponse'
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 无权限
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取佣金明细
      tags:
      - 运营商数据统计
  /v1/operators/me/finance/overview:
    get:
      consumes:
      - application/json
      description: 获取运营商的财务概览信息，数据直接从分账记录（profit_sharing_orders）实时统计
      produces:
      - application/json
      responses:
        "200":
          description: 财务概览
          schema:
            $ref: '#/definitions/api.operatorFinanceOverviewResponse'
        "403":
          description: 无权限
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取财务概览
      tags:
      - 运营商数据统计
  /v1/orders:
    get:
      consumes:
      - application/json
      description: |-
        分页获取当前用户的订单列表，支持按状态筛选。

        **订单状态枚举：**
        - pending: 待支付
        - paid: 已支付
        - preparing: 制作中
        - ready: 待配送/待取餐
        - delivering: 配送中
        - completed: 已完成
        - cancelled: 已取消
      parameters:
      - description: 页码(从1开始)
        in: query
        minimum: 1
        name: page_id
        required: true
        type: integer
      - description: 每页条数
        in: query
        maximum: 20
        minimum: 5
        name: page_size
        required: true
        type: integer
      - description: 订单状态筛选
        enum:
        - pending
        - paid
        - preparing
        - ready
        - delivering
        - completed
        - cancelled
        in: query
        name: status
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 订单列表
          schema:
            items:
              $ref: '#/definitions/api.orderResponse'
            type: array
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取订单列表
      tags:
      - 订单管理
    post:
      consumes:
      - application/json
      description: |-
        创建新订单，支持四种类型：外卖(takeout)、堂食(dine_in)、打包自取(takeaway)、预定点菜(reservation)。

        **订单类型与必填字段：**
        - takeout: 必须提供address_id
        - dine_in: 必须提供table_id
        - takeaway: 无额外必填字段
        - reservation: 必须提供reservation_id

        **安全限制：**
        - 外卖订单的地址必须属于当前用户
        - 堂食订单的桌台必须属于指定商户
        - 商户必须处于active状态才能下单
        - 订单中的菜品必须在线且可售
      parameters:
      - description: 订单创建参数
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.createOrderRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 创建成功
          schema:
            $ref: '#/definitions/api.orderResponse'
        "400":
          description: 请求参数错误 / 商户未激活 / 菜品下线 / 桌台不属于该商户
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 地址不属于当前用户
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 商户/地址/桌台/菜品不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 创建订单
      tags:
      - 订单管理
  /v1/orders/{id}:
    get:
      consumes:
      - application/json
      description: 获取指定订单的详细信息，包含订单商品明细。仅订单所有者可查看。
      parameters:
      - description: 订单ID
        in: path
        minimum: 1
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 订单详情
          schema:
            $ref: '#/definitions/api.orderResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 订单不属于当前用户
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 订单不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取订单详情
      tags:
      - 订单管理
  /v1/orders/{id}/cancel:
    post:
      consumes:
      - application/json
      description: |-
        取消订单。仅pending(待支付)或paid(已支付)状态的订单可以取消。

        **业务规则：**
        - 用户只能取消自己的订单
        - preparing(制作中)及之后状态的订单无法取消
        - 已支付订单取消后会触发退款流程
      parameters:
      - description: 订单ID
        in: path
        minimum: 1
        name: id
        required: true
        type: integer
      - description: 取消原因(选填)
        in: body
        name: request
        schema:
          properties:
            reason:
              type: string
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: 取消成功
          schema:
            $ref: '#/definitions/api.orderResponse'
        "400":
          description: 订单状态不允许取消
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 订单不属于当前用户
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 订单不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 取消订单
      tags:
      - 订单管理
  /v1/orders/{id}/confirm:
    post:
      consumes:
      - application/json
      description: 用户确认已收到订单（适用于外卖订单）
      parameters:
      - description: 订单ID
        in: path
        minimum: 1
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 确认成功
          schema:
            $ref: '#/definitions/api.orderResponse'
        "400":
          description: 订单类型或状态不允许确认
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 订单不属于当前用户
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 订单不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 确认收货
      tags:
      - 订单管理
  /v1/orders/{id}/urge:
    post:
      consumes:
      - application/json
      description: 向商户/骑手发送催单通知以加快订单处理
      parameters:
      - description: 订单ID
        in: path
        minimum: 1
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 催单成功
          schema:
            $ref: '#/definitions/api.MessageResponse'
        "400":
          description: 订单状态不允许催单
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 订单不属于当前用户
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 订单不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 催单
      tags:
      - 订单管理
  /v1/orders/calculate:
    get:
      consumes:
      - application/json
      description: |-
        根据购物车商品计算订单金额，用于下单前预览。

        **计算内容：**
        - 商品小计（基于购物车商品）
        - 配送费（外卖订单，基于实时位置或配送地址）
        - 满减优惠
        - 满返运费优惠
        - 优惠券抵扣

        **配送费计算方式：**
        - 传入 latitude/longitude：使用实时位置计算（浏览阶段）
        - 传入 address_id：使用已保存地址计算（下单阶段）
        - 两者都传：优先使用 address_id
      parameters:
      - description: 商户ID
        format: int64
        in: query
        minimum: 1
        name: merchant_id
        required: true
        type: integer
      - description: 订单类型
        enum:
        - takeout
        - dine_in
        - takeaway
        in: query
        name: order_type
        required: true
        type: string
      - description: 用户实时纬度（浏览阶段使用）
        in: query
        name: latitude
        type: number
      - description: 用户实时经度（浏览阶段使用）
        in: query
        name: longitude
        type: number
      - description: 配送地址ID（下单阶段使用）
        format: int64
        in: query
        name: address_id
        type: integer
      - description: 优惠券码
        in: query
        name: voucher_code
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 计算结果
          schema:
            $ref: '#/definitions/api.orderCalculationResponse'
        "400":
          description: 参数错误/购物车为空
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 计算订单金额
      tags:
      - 订单管理
  /v1/payments:
    get:
      consumes:
      - application/json
      description: 分页获取当前用户的支付订单列表
      parameters:
      - description: 页码
        in: query
        minimum: 1
        name: page_id
        required: true
        type: integer
      - description: 每页条数
        in: query
        maximum: 20
        minimum: 5
        name: page_size
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 支付订单列表
          schema:
            items:
              $ref: '#/definitions/api.paymentOrderResponse'
            type: array
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取支付订单列表
      tags:
      - 支付管理
    post:
      consumes:
      - application/json
      description: |-
        为订单或预定创建支付订单，调用微信支付统一下单接口。

        **支付类型：**
        - native: 扫码支付(商户端扫用户付款码)
        - miniprogram: 小程序支付(返回调起支付所需参数)

        **业务类型：**
        - order: 订单支付
        - reservation: 预定押金

        **幂等性：** 如果已存在待支付的支付订单，将直接返回该订单。

        **安全限制：**
        - 订单必须属于当前用户
        - 订单必须处于pending状态
      parameters:
      - description: 支付订单参数
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.createPaymentOrderRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 支付订单(含小程序支付参数)
          schema:
            $ref: '#/definitions/api.paymentOrderResponse'
        "400":
          description: 订单状态不允许支付
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 订单不属于当前用户
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 订单不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 创建支付订单
      tags:
      - 支付管理
  /v1/payments/{id}:
    get:
      consumes:
      - application/json
      description: 根据ID获取支付订单详情
      parameters:
      - description: 支付订单ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 支付订单详情
          schema:
            $ref: '#/definitions/api.paymentOrderResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 支付订单不属于当前用户
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 支付订单不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取支付订单详情
      tags:
      - 支付管理
  /v1/payments/{id}/close:
    post:
      consumes:
      - application/json
      description: 关闭待支付的支付订单
      parameters:
      - description: 支付订单ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 关闭成功的支付订单
          schema:
            $ref: '#/definitions/api.paymentOrderResponse'
        "400":
          description: 请求参数错误或订单状态不允许关闭
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 非订单所有者
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 支付订单不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 关闭支付订单
      tags:
      - 支付管理
  /v1/payments/{id}/refunds:
    get:
      consumes:
      - application/json
      description: 获取指定支付订单的所有退款记录
      parameters:
      - description: 支付订单ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 退款订单列表
          schema:
            items:
              $ref: '#/definitions/api.refundOrderResponse'
            type: array
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 无访问权限
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 支付订单不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取支付订单的退款列表
      tags:
      - 退款管理
  /v1/platform/ws:
    get:
      consumes:
      - application/json
      description: 将HTTP连接升级为WebSocket，用于平台运营人员接收实时告警推送
      parameters:
      - description: Authentication token (required if Authorization header is missing)
        in: query
        name: token
        type: string
      produces:
      - application/json
      responses:
        "101":
          description: 协议升级成功
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 仅平台运营人员可连接
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 平台运营WebSocket连接端点
      tags:
      - 通知管理
  /v1/recommendations/combos:
    get:
      consumes:
      - application/json
      description: 基于用户行为和偏好，使用EE算法推荐个性化套餐列表。返回完整的套餐信息包括月销量、优惠百分比、标签、商户信息、距离和运费估算。
      parameters:
      - default: 10
        description: 返回数量
        in: query
        maximum: 50
        minimum: 1
        name: limit
        type: integer
      - description: 用户当前纬度（用于计算距离和运费）
        in: query
        name: user_latitude
        type: number
      - description: 用户当前经度（用于计算距离和运费）
        in: query
        name: user_longitude
        type: number
      produces:
      - application/json
      responses:
        "200":
          description: 推荐套餐列表
          schema:
            $ref: '#/definitions/api.recommendCombosResponse'
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未认证
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 推荐套餐
      tags:
      - 推荐引擎
  /v1/recommendations/dishes:
    get:
      consumes:
      - application/json
      description: 基于用户行为和偏好，使用EE算法推荐个性化菜品列表。返回完整的菜品信息包括月销量、会员价、标签、商户信息、距离和运费估算。
      parameters:
      - default: 20
        description: 返回数量
        in: query
        maximum: 50
        minimum: 1
        name: limit
        type: integer
      - description: 用户当前纬度（用于计算距离和运费）
        in: query
        name: user_latitude
        type: number
      - description: 用户当前经度（用于计算距离和运费）
        in: query
        name: user_longitude
        type: number
      produces:
      - application/json
      responses:
        "200":
          description: 推荐菜品列表
          schema:
            $ref: '#/definitions/api.recommendDishesAPIResponse'
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未认证
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 推荐菜品
      tags:
      - 推荐引擎
  /v1/recommendations/merchants:
    get:
      consumes:
      - application/json
      description: 基于用户行为和偏好，使用EE算法推荐个性化商户列表。返回完整的商户信息包括月订单量、标签、距离和运费估算。
      parameters:
      - default: 10
        description: 返回数量
        in: query
        maximum: 50
        minimum: 1
        name: limit
        type: integer
      - description: 用户当前纬度（用于计算距离和运费）
        in: query
        name: user_latitude
        type: number
      - description: 用户当前经度（用于计算距离和运费）
        in: query
        name: user_longitude
        type: number
      produces:
      - application/json
      responses:
        "200":
          description: 推荐商户列表
          schema:
            $ref: '#/definitions/api.recommendMerchantsResponse'
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未认证
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 推荐商户
      tags:
      - 推荐引擎
  /v1/recommendations/rooms:
    get:
      consumes:
      - application/json
      description: 浏览本地区域的可用包间，无需指定预订日期时段。支持按区域、人数、低消等筛选。返回包间主图和近30天预订量。
      parameters:
      - description: 区域ID
        in: query
        name: region_id
        type: integer
      - description: 最小容纳人数
        in: query
        name: min_capacity
        type: integer
      - description: 最大容纳人数
        in: query
        name: max_capacity
        type: integer
      - description: 最大低消（分）
        in: query
        name: max_minimum_spend
        type: integer
      - description: 页码
        in: query
        minimum: 1
        name: page_id
        required: true
        type: integer
      - description: 每页数量
        in: query
        maximum: 50
        minimum: 1
        name: page_size
        required: true
        type: integer
      - description: 用户当前纬度（用于计算距离）
        in: query
        name: user_latitude
        type: number
      - description: 用户当前经度（用于计算距离）
        in: query
        name: user_longitude
        type: number
      produces:
      - application/json
      responses:
        "200":
          description: 包间列表
          schema:
            $ref: '#/definitions/api.exploreRoomsResponse'
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未认证
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 探索附近包间
      tags:
      - 推荐引擎
  /v1/refunds:
    post:
      consumes:
      - application/json
      description: 商户为已支付的支付订单创建退款
      parameters:
      - description: 退款详情
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.createRefundOrderRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 退款订单
          schema:
            $ref: '#/definitions/api.refundOrderResponse'
        "400":
          description: 请求参数错误或订单状态不允许退款
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 非商户用户
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 支付订单不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 创建退款订单（商户端）
      tags:
      - 退款管理
  /v1/refunds/{id}:
    get:
      consumes:
      - application/json
      description: 根据ID获取退款订单详情
      parameters:
      - description: 退款订单ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 退款订单详情
          schema:
            $ref: '#/definitions/api.refundOrderResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 无访问权限
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 退款订单不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取退款订单详情
      tags:
      - 退款管理
  /v1/regions:
    get:
      consumes:
      - application/json
      description: 分页获取区域列表，支持按层级和上级区域筛选
      parameters:
      - description: 区域层级（1=省 2=市 3=区县）
        in: query
        maximum: 4
        minimum: 1
        name: level
        type: integer
      - description: 上级区域ID
        in: query
        minimum: 1
        name: parent_id
        type: integer
      - description: 页码
        in: query
        minimum: 1
        name: page_id
        required: true
        type: integer
      - description: 每页数量
        in: query
        maximum: 100
        minimum: 5
        name: page_size
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 区域列表
          schema:
            items:
              $ref: '#/definitions/api.regionResponse'
            type: array
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      summary: 获取区域列表
      tags:
      - 区域管理
  /v1/regions/{id}:
    get:
      consumes:
      - application/json
      description: 根据ID获取区域详细信息
      parameters:
      - description: 区域ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 区域详情
          schema:
            $ref: '#/definitions/api.regionResponse'
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 区域不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      summary: 获取区域详情
      tags:
      - 区域管理
  /v1/regions/{id}/check:
    get:
      consumes:
      - application/json
      description: 检查指定区县是否已被其他运营商绑定
      parameters:
      - description: 区域ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 区域可用性信息
          schema:
            $ref: '#/definitions/api.regionAvailabilityResponse'
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 区域不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 检查区县是否可申请
      tags:
      - 区域管理
  /v1/regions/{id}/children:
    get:
      consumes:
      - application/json
      description: 获取指定区域的所有直接下级区域
      parameters:
      - description: 上级区域ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 下级区域列表
          schema:
            items:
              $ref: '#/definitions/api.regionResponse'
            type: array
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      summary: 获取下级区域列表
      tags:
      - 区域管理
  /v1/regions/{id}/recommendation-config:
    get:
      consumes:
      - application/json
      description: 获取指定区域的EE算法推荐配置，如果不存在则返回默认配置
      parameters:
      - description: 区域ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 推荐配置
          schema:
            $ref: '#/definitions/api.getRecommendationConfigResponse'
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未认证
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 无权限（非该区域运营商）
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取区域推荐配置
      tags:
      - 推荐配置管理
    patch:
      consumes:
      - application/json
      description: 更新指定区域的EE算法推荐配置，比例之和必须等于1.0
      parameters:
      - description: 区域ID
        in: path
        name: id
        required: true
        type: integer
      - description: 配置更新
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.updateRecommendationConfigRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 更新后的配置
          schema:
            $ref: '#/definitions/api.getRecommendationConfigResponse'
        "400":
          description: 参数错误（如比例之和不为1）
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未认证
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 无权限（非该区域运营商）
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 更新区域推荐配置
      tags:
      - 推荐配置管理
  /v1/regions/available:
    get:
      consumes:
      - application/json
      description: 返回当前尚未被运营商绑定的区县列表，供新运营商选择
      parameters:
      - description: 上级区域ID（可选，用于过滤指定城市下的区县）
        in: query
        minimum: 1
        name: parent_id
        type: integer
      - description: 区域层级
        in: query
        maximum: 4
        minimum: 1
        name: level
        type: integer
      - description: 页码
        in: query
        minimum: 1
        name: page_id
        required: true
        type: integer
      - description: 每页数量
        in: query
        maximum: 100
        minimum: 5
        name: page_size
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 可申请的区县列表
          schema:
            additionalProperties: true
            type: object
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取可申请的区县列表
      tags:
      - 区域管理
  /v1/regions/search:
    get:
      consumes:
      - application/json
      description: 按名称模糊搜索区域
      parameters:
      - description: 搜索关键词
        in: query
        maxLength: 100
        minLength: 1
        name: q
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 搜索结果（最多100条）
          schema:
            items:
              $ref: '#/definitions/api.regionResponse'
            type: array
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      summary: 搜索区域
      tags:
      - 区域管理
  /v1/reservations:
    post:
      consumes:
      - application/json
      description: 用户创建包间预定，支持定金模式（到店点菜）和全款模式（在线预点菜品）
      parameters:
      - description: 预定请求
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/api.createReservationRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/api.reservationResponse'
        "400":
          description: 参数错误/桌台不可预定/时间段已被预定
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 桌台不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "409":
          description: 时间段已被预定
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 创建包间预定
      tags:
      - 预定管理
  /v1/reservations/{id}:
    get:
      consumes:
      - application/json
      description: 用户查看自己的预定详情，或商户查看自己商户的预定详情
      parameters:
      - description: 预定ID
        format: int64
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/api.reservationResponse'
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 无权访问该预定
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 预定不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取预定详情
      tags:
      - 预定管理
  /v1/reservations/{id}/add-dishes:
    post:
      consumes:
      - application/json
      description: 用户可以为已确认的预定追加菜品
      parameters:
      - description: 预定ID
        format: int64
        in: path
        name: id
        required: true
        type: integer
      - description: 追加菜品请求
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/api.addDishesRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      summary: 为预定追加菜品
      tags:
      - 预定管理
  /v1/reservations/{id}/cancel:
    post:
      consumes:
      - application/json
      description: 用户取消自己的预定，或商户取消店铺的预定。已支付的预定在退款截止时间前可全额退款。
      parameters:
      - description: 预定ID
        format: int64
        in: path
        name: id
        required: true
        type: integer
      - description: 取消原因
        in: body
        name: body
        schema:
          $ref: '#/definitions/api.cancelReservationRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/api.reservationResponse'
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 无权取消该预定
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 预定不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "409":
          description: 预定状态不允许取消/退款截止时间已过
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 取消预定
      tags:
      - 预定管理
  /v1/reservations/{id}/complete:
    post:
      consumes:
      - application/json
      description: 商户标记预定完成（客人离店），释放桌台
      parameters:
      - description: 预定ID
        format: int64
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/api.reservationResponse'
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 非商户或预定不属于该商户
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 预定不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "409":
          description: 预定状态不允许完成
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 完成预定
      tags:
      - 预定管理-商户
  /v1/reservations/{id}/confirm:
    post:
      consumes:
      - application/json
      description: 商户确认已支付的预定，更新桌台状态为已占用
      parameters:
      - description: 预定ID
        format: int64
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/api.reservationResponse'
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 非商户或预定不属于该商户
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 预定不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "409":
          description: 预定状态不允许确认
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 确认预定
      tags:
      - 预定管理-商户
  /v1/reservations/{id}/no-show:
    post:
      consumes:
      - application/json
      description: 商户标记已支付/已确认的预定为未到店，定金/预付款将被没收
      parameters:
      - description: 预定ID
        format: int64
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/api.reservationResponse'
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 非商户或预定不属于该商户
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 预定不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "409":
          description: 预定状态不允许标记为未到店
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 标记未到店
      tags:
      - 预定管理-商户
  /v1/reservations/me:
    get:
      consumes:
      - application/json
      description: 用户查看自己的所有预定记录
      parameters:
      - description: 页码
        in: query
        minimum: 1
        name: page_id
        required: true
        type: integer
      - description: 每页数量
        in: query
        maximum: 50
        minimum: 5
        name: page_size
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            properties:
              reservations:
                items:
                  $ref: '#/definitions/api.reservationResponse'
                type: array
            type: object
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取我的预定列表
      tags:
      - 预定管理
  /v1/reservations/merchant:
    get:
      consumes:
      - application/json
      description: 商户查看自己店铺的所有预定记录，支持按日期或状态筛选
      parameters:
      - description: 筛选日期 (YYYY-MM-DD)
        in: query
        name: date
        type: string
      - description: 筛选状态
        enum:
        - pending
        - paid
        - confirmed
        - completed
        - cancelled
        - expired
        - no_show
        in: query
        name: status
        type: string
      - description: 页码
        in: query
        minimum: 1
        name: page_id
        required: true
        type: integer
      - description: 每页数量
        in: query
        maximum: 50
        minimum: 5
        name: page_size
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            properties:
              reservations:
                items:
                  $ref: '#/definitions/api.reservationResponse'
                type: array
            type: object
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 非商户
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取商户预定列表
      tags:
      - 预定管理-商户
  /v1/reservations/merchant/stats:
    get:
      consumes:
      - application/json
      description: 商户查看各状态预定数量统计
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            properties:
              cancelled_count:
                format: int64
                type: integer
              completed_count:
                format: int64
                type: integer
              confirmed_count:
                format: int64
                type: integer
              expired_count:
                format: int64
                type: integer
              no_show_count:
                format: int64
                type: integer
              paid_count:
                format: int64
                type: integer
              pending_count:
                format: int64
                type: integer
            type: object
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 非商户
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取预定统计
      tags:
      - 预定管理-商户
  /v1/reviews:
    post:
      consumes:
      - application/json
      description: 用户为已完成的订单创建评价。低信用用户（<600分）的评价将被标记为不可见。
      parameters:
      - description: 评价信息
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.createReviewRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 评价创建成功
          schema:
            $ref: '#/definitions/api.reviewResponse'
        "400":
          description: 参数错误或订单状态不允许评价
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 订单不属于当前用户
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 订单不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "409":
          description: 订单已评价
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 创建评价
      tags:
      - 评价管理
  /v1/reviews/{id}:
    delete:
      consumes:
      - application/json
      description: 运营商删除违规评价，只能删除自己管辖区域商户的评价
      parameters:
      - description: 评价ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 删除成功
          schema:
            additionalProperties: true
            type: object
        "400":
          description: 无效的评价ID
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 只能删除管辖区域商户的评价
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 评价不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 删除评价（运营商）
      tags:
      - 评价管理-运营商
    get:
      consumes:
      - application/json
      description: 获取指定评价的详细信息
      parameters:
      - description: 评价ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 评价详情
          schema:
            $ref: '#/definitions/api.reviewResponse'
        "400":
          description: 无效的评价ID
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 评价不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取评价详情
      tags:
      - 评价管理
  /v1/reviews/{id}/reply:
    post:
      consumes:
      - application/json
      description: 商户回复顾客的评价
      parameters:
      - description: 评价ID
        in: path
        name: id
        required: true
        type: integer
      - description: 回复内容
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.replyReviewRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 回复成功
          schema:
            $ref: '#/definitions/api.reviewResponse'
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 无权回复此评价
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 评价不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 回复评价（商户）
      tags:
      - 评价管理-商户
  /v1/reviews/images/upload:
    post:
      consumes:
      - multipart/form-data
      description: 上传用户评价所需图片（上传前微信图片安全检测通过才会落盘）
      parameters:
      - description: 图片文件
        in: formData
        name: image
        required: true
        type: file
      produces:
      - application/json
      responses:
        "200":
          description: 上传成功
          schema:
            $ref: '#/definitions/api.uploadImageResponse'
        "400":
          description: 请求参数错误或内容安全检测未通过
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "502":
          description: 微信接口异常
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 上传评价图片
      tags:
      - 评价管理
  /v1/reviews/me:
    get:
      consumes:
      - application/json
      description: 获取当前用户创建的所有评价
      parameters:
      - description: 页码
        in: query
        minimum: 1
        name: page_id
        required: true
        type: integer
      - description: 每页数量
        in: query
        maximum: 50
        minimum: 5
        name: page_size
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 评价列表
          schema:
            additionalProperties: true
            type: object
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取我的评价列表
      tags:
      - 评价管理
  /v1/reviews/merchants/{id}:
    get:
      consumes:
      - application/json
      description: 获取商户的可见评价列表，顾客视角，仅展示高信用用户的评价
      parameters:
      - description: 商户ID
        in: path
        name: id
        required: true
        type: integer
      - description: 页码
        in: query
        minimum: 1
        name: page_id
        required: true
        type: integer
      - description: 每页数量
        in: query
        maximum: 50
        minimum: 5
        name: page_size
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 评价列表
          schema:
            additionalProperties: true
            type: object
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取商户评价列表（公开）
      tags:
      - 评价管理
  /v1/reviews/merchants/{id}/all:
    get:
      consumes:
      - application/json
      description: 商户查看自己店铺的所有评价，包括低信用用户的隐藏评价
      parameters:
      - description: 商户ID
        in: path
        name: id
        required: true
        type: integer
      - description: 页码
        in: query
        minimum: 1
        name: page_id
        required: true
        type: integer
      - description: 每页数量
        in: query
        maximum: 50
        minimum: 5
        name: page_size
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 评价列表
          schema:
            additionalProperties: true
            type: object
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 无权访问该商户
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取商户所有评价（商户专用）
      tags:
      - 评价管理-商户
  /v1/rider/appeals:
    get:
      consumes:
      - application/json
      description: 骑手查看自己提交的申诉列表
      parameters:
      - description: 页码
        in: query
        minimum: 1
        name: page_id
        required: true
        type: integer
      - description: 每页数量
        in: query
        maximum: 50
        minimum: 1
        name: page_size
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 成功返回申诉列表
          schema:
            additionalProperties: true
            type: object
        "400":
          description: 参数错误
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 未授权
          schema:
            additionalProperties: true
            type: object
        "403":
          description: 非骑手用户
          schema:
            additionalProperties: true
            type: object
        "500":
          description: 服务器错误
          schema:
            additionalProperties: true
            type: object
      security:
      - Bearer: []
      summary: 获取申诉列表
      tags:
      - 骑手申诉管理
    post:
      consumes:
      - application/json
      description: 骑手对与自己配送订单相关的索赔提交申诉
      parameters:
      - description: 申诉请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.createRiderAppealRequest'
      produces:
      - application/json
      responses:
        "201":
          description: 成功创建申诉
          schema:
            $ref: '#/definitions/api.appealResponse'
        "400":
          description: 参数错误
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 未授权
          schema:
            additionalProperties: true
            type: object
        "403":
          description: 非骑手用户或索赔与骑手无关
          schema:
            additionalProperties: true
            type: object
        "404":
          description: 索赔不存在
          schema:
            additionalProperties: true
            type: object
        "409":
          description: 已存在申诉
          schema:
            additionalProperties: true
            type: object
        "500":
          description: 服务器错误
          schema:
            additionalProperties: true
            type: object
      security:
      - Bearer: []
      summary: 提交申诉
      tags:
      - 骑手申诉管理
  /v1/rider/appeals/{id}:
    get:
      consumes:
      - application/json
      description: 骑手查看自己提交的申诉详细信息
      parameters:
      - description: 申诉ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 成功返回申诉详情
          schema:
            additionalProperties: true
            type: object
        "400":
          description: 参数错误
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 未授权
          schema:
            additionalProperties: true
            type: object
        "403":
          description: 非骑手用户
          schema:
            additionalProperties: true
            type: object
        "404":
          description: 申诉不存在
          schema:
            additionalProperties: true
            type: object
        "500":
          description: 服务器错误
          schema:
            additionalProperties: true
            type: object
      security:
      - Bearer: []
      summary: 获取申诉详情
      tags:
      - 骑手申诉管理
  /v1/rider/application:
    get:
      consumes:
      - application/json
      description: 如果用户已有申请则返回现有申请，否则创建新的草稿
      produces:
      - application/json
      responses:
        "200":
          description: 申请信息
          schema:
            $ref: '#/definitions/api.riderApplicationResponse'
        "201":
          description: 新建草稿
          schema:
            $ref: '#/definitions/api.riderApplicationResponse'
        "401":
          description: 未登录
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 创建或获取骑手申请草稿
      tags:
      - 骑手申请
  /v1/rider/application/basic:
    put:
      consumes:
      - application/json
      description: 更新姓名、手机号等基础信息，仅草稿状态可修改
      parameters:
      - description: 基础信息
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.updateRiderApplicationBasicRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 更新后的申请信息
          schema:
            $ref: '#/definitions/api.riderApplicationResponse'
        "400":
          description: 参数错误或状态不允许修改
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未登录
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 申请不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 更新骑手申请基础信息
      tags:
      - 骑手申请
  /v1/rider/application/healthcert:
    post:
      consumes:
      - multipart/form-data
      description: 上传健康证照片
      parameters:
      - description: 健康证图片
        in: formData
        name: image
        required: true
        type: file
      produces:
      - application/json
      responses:
        "200":
          description: 上传结果
          schema:
            $ref: '#/definitions/api.riderApplicationResponse'
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未登录
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 申请不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 上传健康证
      tags:
      - 骑手申请
  /v1/rider/application/idcard/ocr:
    post:
      consumes:
      - multipart/form-data
      description: 上传身份证照片，调用微信OCR识别并保存结果
      parameters:
      - description: 身份证图片
        in: formData
        name: image
        required: true
        type: file
      - description: 正面Front/背面Back
        in: formData
        name: side
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 识别结果
          schema:
            $ref: '#/definitions/api.riderApplicationResponse'
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未登录
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 申请不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 上传身份证并OCR识别
      tags:
      - 骑手申请
  /v1/rider/application/reset:
    post:
      consumes:
      - application/json
      description: 申请被拒绝后，重置为草稿状态以便重新编辑
      produces:
      - application/json
      responses:
        "200":
          description: 重置后的申请
          schema:
            $ref: '#/definitions/api.riderApplicationResponse'
        "400":
          description: 状态不允许重置
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未登录
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 申请不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 重置骑手申请
      tags:
      - 骑手申请
  /v1/rider/application/submit:
    post:
      consumes:
      - application/json
      description: 提交申请进行自动审核。条件：身份证在有效期内且健康证已上传则通过，否则直接拒绝
      produces:
      - application/json
      responses:
        "200":
          description: 审核结果（approved或rejected）
          schema:
            $ref: '#/definitions/api.riderApplicationResponse'
        "400":
          description: 信息不完整
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未登录
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 申请不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 提交骑手申请
      tags:
      - 骑手申请
  /v1/rider/apply:
    post:
      consumes:
      - application/json
      description: 用户提交骑手入驻申请，需要提供真实姓名、身份证号和手机号。申请后状态为pending，等待管理员审核。
      parameters:
      - description: 骑手申请信息
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.applyRiderRequest'
      produces:
      - application/json
      responses:
        "201":
          description: 申请成功
          schema:
            $ref: '#/definitions/api.riderResponse'
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未登录
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "409":
          description: 重复申请
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 骑手入驻申请
      tags:
      - 骑手
  /v1/rider/applyment/bindbank:
    post:
      consumes:
      - application/json
      description: 骑手审核通过后，提交银行卡信息进行微信支付二级商户开户
      parameters:
      - description: 银行卡信息
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.riderBindBankRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/api.riderBindBankResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 骑手绑定银行卡开户
      tags:
      - 骑手
  /v1/rider/applyment/status:
    get:
      consumes:
      - application/json
      description: 获取骑手微信支付开户申请状态
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/api.riderApplymentStatusResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取骑手开户状态
      tags:
      - 骑手
  /v1/rider/claims:
    get:
      consumes:
      - application/json
      description: 骑手查看与自己配送订单相关的已批准索赔列表
      parameters:
      - description: 页码
        in: query
        minimum: 1
        name: page_id
        required: true
        type: integer
      - description: 每页数量
        in: query
        maximum: 50
        minimum: 1
        name: page_size
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 成功返回索赔列表
          schema:
            additionalProperties: true
            type: object
        "400":
          description: 参数错误
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 未授权
          schema:
            additionalProperties: true
            type: object
        "403":
          description: 非骑手用户
          schema:
            additionalProperties: true
            type: object
        "500":
          description: 服务器错误
          schema:
            additionalProperties: true
            type: object
      security:
      - Bearer: []
      summary: 获取骑手收到的索赔列表
      tags:
      - 骑手申诉管理
  /v1/rider/claims/{id}:
    get:
      consumes:
      - application/json
      description: 骑手查看单个索赔的详细信息
      parameters:
      - description: 索赔ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 成功返回索赔详情
          schema:
            additionalProperties: true
            type: object
        "400":
          description: 参数错误
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 未授权
          schema:
            additionalProperties: true
            type: object
        "403":
          description: 非骑手用户
          schema:
            additionalProperties: true
            type: object
        "404":
          description: 索赔不存在
          schema:
            additionalProperties: true
            type: object
        "500":
          description: 服务器错误
          schema:
            additionalProperties: true
            type: object
      security:
      - Bearer: []
      summary: 获取索赔详情
      tags:
      - 骑手申诉管理
  /v1/rider/deposit:
    get:
      consumes:
      - application/json
      description: 获取当前骑手的押金余额信息，包括总押金、冻结押金和可用押金
      produces:
      - application/json
      responses:
        "200":
          description: 押金余额信息
          schema:
            $ref: '#/definitions/api.depositBalanceResponse'
        "401":
          description: 未登录
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 未注册骑手
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取押金余额
      tags:
      - 骑手
    post:
      consumes:
      - application/json
      description: 创建骑手押金充值支付订单，返回微信支付参数
      parameters:
      - description: 充值金额（单位：分）
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.depositRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 微信支付参数
          schema:
            type: object
        "400":
          description: 参数错误或骑手未激活
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未登录
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 未注册骑手
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 骑手押金充值
      tags:
      - 骑手
  /v1/rider/deposits:
    get:
      consumes:
      - application/json
      description: 分页查询当前骑手的押金变动流水记录，包括充值、提现、冻结、解冻、扣款等
      parameters:
      - default: 1
        description: 页码
        in: query
        minimum: 1
        name: page
        type: integer
      - default: 20
        description: 每页数量
        in: query
        maximum: 100
        minimum: 1
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 押金流水列表
          schema:
            items:
              $ref: '#/definitions/api.depositResponse'
            type: array
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未登录
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 未注册骑手
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 查询押金流水
      tags:
      - 骑手
  /v1/rider/location:
    post:
      consumes:
      - application/json
      description: 批量上报骑手GPS位置点，仅在线状态可调用
      parameters:
      - description: 位置点数组
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.updateLocationRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 上报成功
          schema:
            properties:
              count:
                type: integer
              latitude:
                type: number
              longitude:
                type: number
              message:
                type: string
            type: object
        "400":
          description: 参数错误或不在线
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未登录
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 未注册骑手
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 更新骑手位置
      tags:
      - 骑手
  /v1/rider/me:
    get:
      consumes:
      - application/json
      description: 获取当前登录用户的骑手信息，包括状态、押金、统计数据等
      produces:
      - application/json
      responses:
        "200":
          description: 骑手信息
          schema:
            $ref: '#/definitions/api.riderResponse'
        "401":
          description: 未登录
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 未注册骑手
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取当前骑手信息
      tags:
      - 骑手
  /v1/rider/offline:
    post:
      consumes:
      - application/json
      description: 设置骑手状态为离线，停止接单。如果有进行中的配送订单则无法下线
      produces:
      - application/json
      responses:
        "200":
          description: 下线成功
          schema:
            $ref: '#/definitions/api.riderResponse'
        "400":
          description: 有进行中订单
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未登录
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 未注册骑手
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 骑手下线
      tags:
      - 骑手
  /v1/rider/online:
    post:
      consumes:
      - application/json
      description: 设置骑手状态为在线，开始接受订单。需要骑手状态为active且押金充足
      produces:
      - application/json
      responses:
        "200":
          description: 上线成功
          schema:
            $ref: '#/definitions/api.riderResponse'
        "400":
          description: 账号未激活或押金不足
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未登录
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 未注册骑手
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 骑手上线
      tags:
      - 骑手
  /v1/rider/score:
    get:
      consumes:
      - application/json
      description: 获取当前骑手的高值单资格积分及接单资格状态。积分规则：完成普通单+1，完成高值单-3，超时-5，餐损-10。初始积分为0，积分≥0时可以接高值单。
      produces:
      - application/json
      responses:
        "200":
          description: 成功返回积分信息
          schema:
            $ref: '#/definitions/api.riderPremiumScoreResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 非骑手用户或骑手档案不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取高值单资格积分
      tags:
      - 骑手-高值单
  /v1/rider/score/history:
    get:
      consumes:
      - application/json
      description: 分页查询骑手的高值单资格积分变更历史记录
      parameters:
      - default: 1
        description: 页码
        in: query
        minimum: 1
        name: page_id
        required: true
        type: integer
      - default: 20
        description: 每页数量
        in: query
        maximum: 50
        minimum: 5
        name: page_size
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 成功返回积分历史
          schema:
            $ref: '#/definitions/api.listRiderPremiumScoreHistoryResponse'
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 非骑手用户
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取高值单资格积分历史
      tags:
      - 骑手-高值单
  /v1/rider/status:
    get:
      consumes:
      - application/json
      description: 获取骑手当前在线状态、位置信息、配送状态等
      produces:
      - application/json
      responses:
        "200":
          description: 骑手状态
          schema:
            $ref: '#/definitions/api.riderStatusResponse'
        "401":
          description: 未登录
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 未注册骑手
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取骑手当前状态
      tags:
      - 骑手
  /v1/rider/withdraw:
    post:
      consumes:
      - application/json
      description: 从骑手账户提取押金到微信零钱，需要确保没有进行中的配送订单。最小提现金额1元，单次最大提现金额50000元。
      parameters:
      - description: 提现金额（单位：分）
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.withdrawRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 提现成功
          schema:
            $ref: '#/definitions/api.depositResponse'
        "400":
          description: 余额不足、有进行中订单或账号未激活
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未登录
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 未注册骑手
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 骑手押金提现
      tags:
      - 骑手
  /v1/role-access:
    get:
      description: Machine-readable role matrix to help clients avoid calling merchant/operator/admin
        endpoints with wrong identities.
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/api.RoleAccessResponse'
      summary: API role access metadata
      tags:
      - Metadata
  /v1/rooms/{id}:
    get:
      description: C端用户获取包间详细信息（含商户信息、图集、月销量、标签）
      parameters:
      - description: 包间ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 包间详情
          schema:
            $ref: '#/definitions/api.roomDetailResponse'
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 包间不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      summary: 获取包间详情
      tags:
      - 包间浏览
  /v1/rooms/{id}/availability:
    get:
      description: C端用户获取包间的可预约时间段
      parameters:
      - description: 包间ID
        in: path
        name: id
        required: true
        type: integer
      - description: 日期(YYYY-MM-DD)
        in: query
        name: date
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 可用时段
          schema:
            $ref: '#/definitions/api.roomAvailabilityResponse'
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 包间不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取包间可预约时段
      tags:
      - 桌台管理
  /v1/scan/table:
    get:
      consumes:
      - application/json
      description: 扫描桌台二维码获取商户信息、桌台信息、菜单和优惠活动。用于堂食场景，顾客扫码后可查看菜单并下单。
      parameters:
      - description: 商户ID
        in: query
        minimum: 1
        name: merchant_id
        required: true
        type: integer
      - description: 桌台编号
        in: query
        maxLength: 50
        name: table_no
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 扫码成功，返回完整菜单信息
          schema:
            $ref: '#/definitions/api.scanTableResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 商户或桌台不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "503":
          description: 商户未营业或桌台已停用
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      summary: 扫码点餐
      tags:
      - 扫码点餐
  /v1/search/dishes:
    get:
      consumes:
      - application/json
      description: 根据关键词搜索菜品，可选在特定商户内搜索
      parameters:
      - description: 搜索关键词
        in: query
        name: keyword
        required: true
        type: string
      - description: 商户ID（可选，在特定商户内搜索）
        in: query
        name: merchant_id
        type: integer
      - description: 页码
        in: query
        minimum: 1
        name: page_id
        required: true
        type: integer
      - description: 每页数量
        in: query
        maximum: 50
        minimum: 1
        name: page_size
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 搜索结果
          schema:
            additionalProperties: true
            type: object
        "400":
          description: 请求参数错误
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: 服务器内部错误
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 搜索菜品
      tags:
      - Search
  /v1/search/merchants:
    get:
      consumes:
      - application/json
      description: 根据关键词搜索商户，可传入用户位置计算距离和预估运费
      parameters:
      - description: 搜索关键词
        in: query
        name: keyword
        required: true
        type: string
      - description: 页码
        in: query
        minimum: 1
        name: page_id
        required: true
        type: integer
      - description: 每页数量
        in: query
        maximum: 50
        minimum: 1
        name: page_size
        required: true
        type: integer
      - description: 用户当前纬度（用于计算距离和运费）
        in: query
        name: user_latitude
        type: number
      - description: 用户当前经度（用于计算距离和运费）
        in: query
        name: user_longitude
        type: number
      produces:
      - application/json
      responses:
        "200":
          description: 搜索结果
          schema:
            additionalProperties: true
            type: object
        "400":
          description: 请求参数错误
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: 服务器内部错误
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 搜索商户
      tags:
      - Search
  /v1/search/rooms:
    get:
      consumes:
      - application/json
      description: 根据日期、时段、人数、菜系等条件搜索可用包间
      parameters:
      - description: 区域ID
        in: query
        name: region_id
        type: integer
      - description: 最小容纳人数
        in: query
        name: min_capacity
        type: integer
      - description: 最大容纳人数
        in: query
        name: max_capacity
        type: integer
      - description: 最大低消（分）
        in: query
        name: max_minimum_spend
        type: integer
      - description: 预订日期（YYYY-MM-DD）
        in: query
        name: reservation_date
        required: true
        type: string
      - description: 预订时段（HH:MM）
        in: query
        name: reservation_time
        required: true
        type: string
      - description: 菜系/标签ID
        in: query
        name: tag_id
        type: integer
      - description: 页码
        in: query
        minimum: 1
        name: page_id
        required: true
        type: integer
      - description: 每页数量
        in: query
        maximum: 50
        minimum: 1
        name: page_size
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 搜索结果
          schema:
            additionalProperties: true
            type: object
        "400":
          description: 请求参数错误
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: 服务器内部错误
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 搜索包间
      tags:
      - Search
  /v1/tables:
    get:
      description: 商户列出自己的所有桌台/包间
      parameters:
      - description: 桌台类型
        enum:
        - table
        - room
        in: query
        name: table_type
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 桌台列表
          schema:
            $ref: '#/definitions/api.listTablesResponse'
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未认证
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 非商户用户
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取桌台列表
      tags:
      - 桌台管理
    post:
      consumes:
      - application/json
      description: 商户创建新的桌台或包间
      parameters:
      - description: 桌台信息
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.createTableRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 创建成功
          schema:
            $ref: '#/definitions/api.tableResponse'
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未认证
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 非商户用户
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "409":
          description: 桌号已存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 创建桌台/包间
      tags:
      - 桌台管理
  /v1/tables/{id}:
    delete:
      description: 商户删除桌台/包间（不能有进行中的预定）
      parameters:
      - description: 桌台ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 'message: table deleted successfully'
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未认证
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 非桌台所有者
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 桌台不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "409":
          description: 有进行中的预定
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 删除桌台
      tags:
      - 桌台管理
    get:
      description: 商户获取自己的桌台/包间详细信息
      parameters:
      - description: 桌台ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 桌台详情
          schema:
            $ref: '#/definitions/api.tableResponse'
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未认证
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 非桌台所有者
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 桌台不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取桌台详情
      tags:
      - 桌台管理
    patch:
      consumes:
      - application/json
      description: 商户更新桌台/包间的信息
      parameters:
      - description: 桌台ID
        in: path
        name: id
        required: true
        type: integer
      - description: 更新内容
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.updateTableRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 更新成功
          schema:
            $ref: '#/definitions/api.tableResponse'
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未认证
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 非桌台所有者
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 桌台不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 更新桌台信息
      tags:
      - 桌台管理
  /v1/tables/{id}/images:
    get:
      description: 获取桌台/包间的所有图片
      parameters:
      - description: 桌台ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 'images: 图片列表'
          schema:
            additionalProperties:
              items:
                $ref: '#/definitions/api.tableImageResponse'
              type: array
            type: object
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取桌台图片列表
      tags:
      - 桌台管理
    post:
      consumes:
      - application/json
      description: 商户为桌台/包间添加图片
      parameters:
      - description: 桌台ID
        in: path
        name: id
        required: true
        type: integer
      - description: 图片信息
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.addTableImageRequest'
      produces:
      - application/json
      responses:
        "201":
          description: 添加成功
          schema:
            $ref: '#/definitions/api.tableImageResponse'
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未认证
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 非桌台所有者
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 桌台不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 添加桌台图片
      tags:
      - 桌台管理
  /v1/tables/{id}/images/{image_id}:
    delete:
      description: 商户删除桌台/包间的图片
      parameters:
      - description: 桌台ID
        in: path
        name: id
        required: true
        type: integer
      - description: 图片ID
        in: path
        name: image_id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 'message: image deleted successfully'
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未认证
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 非桌台所有者
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 桌台不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 删除桌台图片
      tags:
      - 桌台管理
  /v1/tables/{id}/images/{image_id}/primary:
    put:
      description: 商户设置桌台/包间的主图
      parameters:
      - description: 桌台ID
        in: path
        name: id
        required: true
        type: integer
      - description: 图片ID
        in: path
        name: image_id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 设置成功
          schema:
            $ref: '#/definitions/api.tableImageResponse'
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未认证
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 非桌台所有者
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 桌台或图片不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 设置桌台主图
      tags:
      - 桌台管理
  /v1/tables/{id}/qrcode:
    get:
      consumes:
      - application/json
      description: 为指定桌台生成扫码点餐二维码URL。仅桌台所属商户可调用。
      parameters:
      - description: 桌台ID
        in: path
        minimum: 1
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 生成成功
          schema:
            $ref: '#/definitions/api.generateTableQRCodeResponse'
        "400":
          description: 无效的桌台ID
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 非商户或桌台不属于该商户
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 桌台不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 生成桌台二维码
      tags:
      - 桌台管理
  /v1/tables/{id}/status:
    patch:
      consumes:
      - application/json
      description: 商户更新桌台状态（空闲/占用/禁用）
      parameters:
      - description: 桌台ID
        in: path
        name: id
        required: true
        type: integer
      - description: 状态更新
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.updateTableStatusRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 更新成功
          schema:
            $ref: '#/definitions/api.tableResponse'
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未认证
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 非桌台所有者
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 桌台不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 更新桌台状态
      tags:
      - 桌台管理
  /v1/tables/{id}/tags:
    get:
      description: 获取桌台的所有标签
      parameters:
      - description: 桌台ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 'tags: 标签列表'
          schema:
            additionalProperties:
              items:
                $ref: '#/definitions/api.tableTagInfo'
              type: array
            type: object
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取桌台标签列表
      tags:
      - 桌台管理
    post:
      consumes:
      - application/json
      description: 商户为桌台添加标签
      parameters:
      - description: 桌台ID
        in: path
        name: id
        required: true
        type: integer
      - description: 标签信息
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.addTableTagRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 'message: tag added successfully'
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: 参数错误或标签类型不正确
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未认证
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 非桌台所有者
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 桌台或标签不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "409":
          description: 标签已存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 添加桌台标签
      tags:
      - 桌台管理
  /v1/tables/{id}/tags/{tag_id}:
    delete:
      description: 商户移除桌台的标签
      parameters:
      - description: 桌台ID
        in: path
        name: id
        required: true
        type: integer
      - description: 标签ID
        in: path
        name: tag_id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 'message: tag removed successfully'
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未认证
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 非桌台所有者
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 桌台不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 移除桌台标签
      tags:
      - 桌台管理
  /v1/tables/images/upload:
    post:
      consumes:
      - multipart/form-data
      description: 上传桌台/包间展示图片（上传前微信图片安全检测通过才会落盘）
      parameters:
      - description: 图片文件
        in: formData
        name: image
        required: true
        type: file
      produces:
      - application/json
      responses:
        "200":
          description: 上传成功
          schema:
            $ref: '#/definitions/api.uploadImageResponse'
        "400":
          description: 请求参数错误或内容安全检测未通过
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 非商户
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "502":
          description: 微信接口异常
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 上传桌台/包间图片
      tags:
      - 桌台管理
  /v1/trust-score/appeals:
    post:
      consumes:
      - application/json
      description: 提交信用分申诉，系统采用信用驱动的自动化处理，不设人工申诉通道。信用分将根据后续正常行为自动恢复
      parameters:
      - description: 申诉信息
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.SubmitAppealRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 申诉已记录
          schema:
            $ref: '#/definitions/api.MessageResponse'
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 提交申诉
      tags:
      - 信用分管理
  /v1/trust-score/claims:
    post:
      consumes:
      - application/json
      description: 用户为已完成的订单提交索赔申请。系统会根据用户信用分自动评估，高信用用户可获得秒赔或自动审核，低信用用户需人工审核。
      parameters:
      - description: 索赔信息
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.SubmitClaimRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 索赔提交成功
          schema:
            $ref: '#/definitions/api.SubmitClaimResponse'
        "400":
          description: 参数错误或订单状态不允许索赔
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 订单不属于当前用户
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 订单不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "409":
          description: 该订单已有索赔记录
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 提交索赔
      tags:
      - 索赔管理
  /v1/trust-score/claims/{id}/review:
    patch:
      consumes:
      - application/json
      description: 运营商/客服人工审核索赔申请。仅限低信用用户提交的需要人工审核的索赔。
      parameters:
      - description: 索赔ID
        in: path
        name: id
        required: true
        type: integer
      - description: 审核信息
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.ReviewClaimRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 审核成功
          schema:
            $ref: '#/definitions/api.claimResponse'
        "400":
          description: 参数错误或索赔状态不允许审核
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 无权限审核此索赔
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 索赔不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 审核索赔
      tags:
      - 索赔管理
  /v1/trust-score/food-safety/report:
    post:
      consumes:
      - application/json
      description: 用户上报商户食品安全问题，系统将根据举报频率和用户信用分决定是否熔断商户
      parameters:
      - description: 食安上报信息
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.ReportFoodSafetyRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 上报成功
          schema:
            $ref: '#/definitions/api.ReportFoodSafetyResponse'
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 上报食品安全问题
      tags:
      - 食品安全
  /v1/trust-score/fraud/detect:
    post:
      consumes:
      - application/json
      description: 管理员手动触发欺诈检测，支持三种检测模式：协同索赔检测、设备复用检测、地址聚类检测
      parameters:
      - description: 检测请求（三选一）
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.TriggerFraudDetectionRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 检测结果
          schema:
            $ref: '#/definitions/algorithm.FraudDetectionResult'
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 触发欺诈检测
      tags:
      - 欺诈检测
  /v1/trust-score/history/{role}/{id}:
    get:
      consumes:
      - application/json
      description: 查询指定角色实体的信用分变更历史记录，包括扣分原因、扣分金额、变更时间等
      parameters:
      - description: 角色类型
        enum:
        - customer
        - merchant
        - rider
        in: path
        name: role
        required: true
        type: string
      - description: 实体ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 变更历史列表
          schema:
            items:
              $ref: '#/definitions/api.TrustScoreChangeResponse'
            type: array
        "400":
          description: 无效的角色类型或ID
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 查询信用分变更历史
      tags:
      - 信用分管理
  /v1/trust-score/merchants/{id}/suspend:
    patch:
      consumes:
      - application/json
      description: 管理员手动熔断（停业）商户，指定停业时长和原因
      parameters:
      - description: 商户ID
        in: path
        name: id
        required: true
        type: integer
      - description: 熔断信息
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.SuspendMerchantRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 熔断成功
          schema:
            $ref: '#/definitions/api.MessageResponse'
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 熔断商户
      tags:
      - 商户管理
  /v1/trust-score/profiles/{role}/{id}:
    get:
      consumes:
      - application/json
      description: 根据角色（customer/merchant/rider）和ID查询信用分画像信息，包含信用分、历史订单统计、违规记录等
      parameters:
      - description: 角色类型
        enum:
        - customer
        - merchant
        - rider
        in: path
        name: role
        required: true
        type: string
      - description: 实体ID（用户ID/商户ID/骑手ID）
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 信用分画像（根据角色返回对应字段）
          schema:
            $ref: '#/definitions/api.TrustScoreProfileResponse'
        "400":
          description: 无效的角色类型或ID
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 画像不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 查询信用分画像
      tags:
      - 信用分管理
  /v1/trust-score/recovery:
    post:
      consumes:
      - application/json
      description: 商户或骑手因信用分过低被封禁后，可提交恢复申请。系统自动给一次机会，第二次再犯永久封禁
      parameters:
      - description: 恢复申请信息
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.SubmitRecoveryRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 恢复成功
          schema:
            $ref: '#/definitions/api.MessageResponse'
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 已超过最大恢复次数
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 提交恢复申请
      tags:
      - 信用分管理
  /v1/users/me:
    get:
      consumes:
      - application/json
      description: 获取当前已认证用户的详细信息，包括基本资料和角色列表
      produces:
      - application/json
      responses:
        "200":
          description: 用户信息
          schema:
            $ref: '#/definitions/api.userResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 用户不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取当前用户信息
      tags:
      - 用户
    patch:
      consumes:
      - application/json
      description: 更新当前已认证用户的个人资料
      parameters:
      - description: 更新用户请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.updateUserRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 更新后的用户信息
          schema:
            $ref: '#/definitions/api.userResponse'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 用户不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 更新当前用户信息
      tags:
      - 用户
  /v1/vouchers/{voucher_id}/claim:
    post:
      consumes:
      - application/json
      description: 用户领取指定代金券
      parameters:
      - description: 代金券ID
        in: path
        name: voucher_id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 领取成功
          schema:
            $ref: '#/definitions/api.userVoucherResponse'
        "400":
          description: 参数错误或已领取/已过期/已领完
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未认证
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: 代金券不存在
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 领取代金券
      tags:
      - 代金券管理
  /v1/vouchers/available/{merchant_id}:
    get:
      consumes:
      - application/json
      description: 获取当前用户在指定商户下满足订单金额要求的可用代金券
      parameters:
      - description: 商户ID
        in: path
        name: merchant_id
        required: true
        type: integer
      - description: 订单金额(分)，用于筛选满足最低消费要求的代金券
        in: query
        minimum: 1
        name: order_amount
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 可用代金券列表
          schema:
            items:
              $ref: '#/definitions/api.userVoucherResponse'
            type: array
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未认证
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取指定商户可用代金券
      tags:
      - 代金券管理
  /v1/vouchers/me:
    get:
      consumes:
      - application/json
      description: 获取当前用户拥有的所有代金券（包含所有状态）
      parameters:
      - description: 页码
        in: query
        minimum: 1
        name: page_id
        required: true
        type: integer
      - description: 每页数量
        in: query
        maximum: 50
        minimum: 5
        name: page_size
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 代金券列表
          schema:
            items:
              $ref: '#/definitions/api.userVoucherResponse'
            type: array
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未认证
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取我的代金券列表
      tags:
      - 代金券管理
  /v1/vouchers/me/available:
    get:
      consumes:
      - application/json
      description: 获取当前用户所有可用的代金券（未使用且未过期）
      parameters:
      - description: 页码
        in: query
        minimum: 1
        name: page_id
        required: true
        type: integer
      - description: 每页数量
        in: query
        maximum: 50
        minimum: 5
        name: page_size
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 可用代金券列表
          schema:
            items:
              $ref: '#/definitions/api.userVoucherResponse'
            type: array
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: 未认证
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: 获取我的可用代金券列表
      tags:
      - 代金券管理
  /v1/ws:
    get:
      consumes:
      - application/json
      description: 将HTTP连接升级为WebSocket，用于实时通知推送，仅骑手和商户可用
      parameters:
      - description: Authentication token (required if Authorization header is missing)
        in: query
        name: token
        type: string
      produces:
      - application/json
      responses:
        "101":
          description: 协议升级成功
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "403":
          description: 仅骑手和商户可连接
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: WebSocket连接端点
      tags:
      - 通知管理
securityDefinitions:
  BearerAuth:
    description: 'Enter the token with the `Bearer: ` prefix, e.g. "Bearer abcde12345".'
    in: header
    name: Authorization
    type: apiKey
swagger: "2.0"
